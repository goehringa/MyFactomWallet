(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1061:function(e,t){},1063:function(e,t){},1079:function(e,t){},1124:function(e,t){},1125:function(e,t){},1239:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(86),o=a.n(l),i=(a(648),a(13)),s=a(14),c=a(16),u=a(15),m=a(17),d=a(20),p=a.n(d),h=a(10),f=a(176),b=a.n(f),E=a(148),g=a.n(E),v=a(5),y=a.n(v),x=a(21),C=a.n(x),w=a(78),k=a.n(w),O=a(569),S=a.n(O),N=a(1242),j=a(100),A=a.n(j),F=a(69),T=a.n(F),I=a(111),P=a.n(I),V=a(301),R=a.n(V),L=a(18),B=a(11),W=a(9),M=a(46),D=a.n(M);var H=function(e){var t=e.disableGutterBottom,a=e.text,n=e.color,l={color:n||null};return r.a.createElement(y.a,{gutterBottom:!t,variant:"h6",style:l},a)},K=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleKeyPress",value:function(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}},{key:"render",value:function(){var e,t=this,a=this.props.classes;return r.a.createElement(B.f,{initialValues:{host:"",port:""},onSubmit:function(e,a){console.log("Submitted"),t.props.handleCustomNode(e.host,e.port)},validationSchema:W.object().shape((e={},Object(L.a)(e,"host",W.string().required("Required")),Object(L.a)(e,"port",W.string().required("Required")),e)),render:function(e){var n=e.isSubmitting,l=e.errors,o=e.touched;return r.a.createElement(B.e,{onKeyPress:t.handleKeyPress},r.a.createElement(H,{text:"Custom Node Form",id:"modal-title"}),r.a.createElement(q,{error:!(!l.host||!o.host),name:"host",label:"Host"}),r.a.createElement(B.a,{name:"host",render:function(e){return r.a.createElement("span",{className:a.errorText},e)}}),r.a.createElement(q,{error:!(!l.port||!o.port),name:"port",label:"Port"}),r.a.createElement(B.a,{name:"port",render:function(e){return r.a.createElement("span",{className:a.errorText},e)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,{type:"submit",disabled:n,variant:"contained",color:"primary"},"Submit"))}})}}]),t}(r.a.Component),q=function(e){return r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({spellCheck:!1,maxLength:e.maxLength,autoComplete:"nope"},"autoComplete","off")},a,{label:e.label+" "+(e.error?"*":""),margin:"dense",fullWidth:!0,multiline:!0,error:e.error}))})},J=Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"12px"}}})(K),z=a(99),U=a.n(z),_=a(35),G=a(26),$=r.a.createContext(),Y=function(e){return function(t){return r.a.createElement($.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{factomCliController:a}))})}},X=a(29),Q=a.n(X),Z=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",null,r.a.createElement(C.a,{className:e.menuText,onClick:this.handleOpen},"Help"),r.a.createElement(U.a,{"aria-labelledby":"modal-title",open:this.state.open,onClose:this.handleClose},r.a.createElement(Q.a,{className:e.modalContent},r.a.createElement(H,{text:"Help",id:"modal-title"}),r.a.createElement(y.a,null,"Please go to the #myfactomwallet channel on The Factoid Authority's"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://discord.gg/79kH2pp"},"Discord server"),"\xa0for support."),r.a.createElement("br",null),r.a.createElement(y.a,null,"Ledger Nano X/S documentation can be found"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://help.myfactomwallet.com/"},"here"),"."),r.a.createElement("br",null),r.a.createElement(y.a,null,"MyFactomWallet's Github repositories are"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/MyFactomWallet"},"here"),"."))))}}]),t}(r.a.Component),ee=Object(h.withStyles)(function(e){return{modalContent:{position:"absolute",boxShadow:e.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)",minHeight:"138px",padding:"30px",maxWidth:"425px"},menuText:{color:"white"}}})(Z),te=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={voteAnchorEl:null,networkAnchorEl:null,openCustomNodeForm:!1},a.handleOpenCustomNodeForm=function(){a.setState({openCustomNodeForm:!0})},a.handleCloseCustomNodeForm=function(){a.setState({openCustomNodeForm:!1})},a.handleVoteClick=function(e){a.setState({voteAnchorEl:e.currentTarget})},a.handleVoteClose=function(){a.setState({voteAnchorEl:null})},a.handleNetworkClick=function(e){a.setState({networkAnchorEl:e.currentTarget})},a.handleNetworkClose=function(){a.setState({networkAnchorEl:null})},a.handleTestnet=function(){a.setState({networkAnchorEl:null}),a.props.walletController.handleNetworkChange("testnet")},a.handleMainnet=function(){a.setState({networkAnchorEl:null}),a.props.walletController.handleNetworkChange("mainnet")},a.handleWallet=function(){a.props.walletController.readyToManageWallet||a.props.walletController.isWalletEmpty()||a.props.walletController.setReadyToManageWallet(!0)},a.handleCustomNode=function(e,t){a.handleCloseCustomNodeForm()},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.networkController.networkProps,n=e.factomCliController.blockHeight,l=this.state,o=l.voteAnchorEl,i=l.networkAnchorEl,s="testnet"===a.network;return r.a.createElement(b.a,{position:"static",className:t.root},r.a.createElement(g.a,{className:t.toolbar},r.a.createElement(k.a,{className:t.menuButton,color:"inherit","aria-label":"Menu"},r.a.createElement(N.a,{to:"/"},r.a.createElement("img",{className:t.logo,src:S.a,alt:"logo"}))),r.a.createElement(y.a,{variant:"h6",className:t.flex},r.a.createElement(N.a,{className:t.menuText,to:"/"},"MyFactomWallet",s&&r.a.createElement("span",{className:t.testnetHeader},"\xa0\xa0TESTNET"))),r.a.createElement(C.a,{href:"#/",onClick:this.handleWallet,className:t.menuText},"Wallet"),r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{"aria-owns":o?"simple-vote-menu":null,"aria-haspopup":"true",onClick:this.handleVoteClick,className:t.menuText},"Vote",r.a.createElement(P.a,null)),r.a.createElement(A.a,{id:"simple-vote-menu",anchorEl:o,open:Boolean(o),onClose:this.handleVoteClose},r.a.createElement(T.a,{onClick:this.handleVoteClose,component:N.a,to:"/vote"},"View Polls"),r.a.createElement(T.a,{component:N.a,to:"/createVote",onClick:this.handleVoteClose,replace:!0},"Create Poll"),r.a.createElement(T.a,{component:N.a,to:"/ledgerId",onClick:this.handleVoteClose,replace:!0},"Ledger Identity"))),r.a.createElement(ee,null),r.a.createElement("div",{className:t.network},r.a.createElement(C.a,{"aria-owns":o?"simple-vote-menu":null,"aria-haspopup":"true",onClick:this.handleNetworkClick,className:t.menuText},a.network,": ",n,"\xa0",r.a.createElement(R.a,{titleAccess:"Network Operational",style:{color:"green"}}),r.a.createElement(P.a,null)),r.a.createElement(A.a,{id:"simple-vote-menu",anchorEl:i,open:Boolean(i),onClose:this.handleNetworkClose},r.a.createElement(T.a,{onClick:this.handleMainnet,disabled:!s},"Mainnet\xa0\xa0 ",r.a.createElement(R.a,{style:{color:"green"}})),r.a.createElement(T.a,{onClick:this.handleTestnet,disabled:s},"Testnet\xa0\xa0 ",r.a.createElement(R.a,{style:{color:"green"}}))),r.a.createElement(U.a,{"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",open:this.state.openCustomNodeForm,onClose:this.handleCloseCustomNodeForm},r.a.createElement("div",{className:t.modalContent},r.a.createElement(J,{handleCustomNode:this.handleCustomNode}))))))}}]),t}(r.a.Component),ae=p()(G.b,Y,_.b,Object(h.withStyles)(function(e){return{root:{flexGrow:1,marginBottom:"15px"},toolbar:{width:"90%",margin:"0 auto"},flex:{flex:1},menuButton:{marginTop:3,marginRight:10},logo:{width:"39px"},menuText:{color:"white"},network:{borderStyle:"solid",borderWidth:"1px",color:"green"},subMenuText:{color:"black"},modalContent:{position:"absolute",width:50*e.spacing.unit,backgroundColor:e.palette.background.paper,boxShadow:e.shadows[5],padding:4*e.spacing.unit,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},testnetHeader:{color:"#ffa000"}}}))(te),ne=a(1244),re=a(177),le=a.n(re),oe=Object(h.createMuiTheme)({palette:{}});var ie=function(e){return function(t){return r.a.createElement(h.MuiThemeProvider,{theme:oe},r.a.createElement(le.a,null),r.a.createElement(e,t))}},se=a(225),ce=a(80),ue=a(7),me=a.n(ue),de=a(22),pe=a(52),he=a(182),fe=a.n(he),be=a(50),Ee=a.n(be),ge=a(149),ve=a.n(ge),ye=a(32),xe=a.n(ye),Ce=a(574),we=a.n(Ce),ke=a(37),Oe=1e-8,Se="storageAddresses",Ne=["importType","address","nickname","index","saveLocally"],je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).smartSetState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve.a;return new Promise(function(n){return a.setState(e,fe()([t,n]))})},a.saveStateToLocalStorage=function(){var e=function(e){return e.filter(function(e){return e.saveLocally}).map(function(e){return we()(e,Ne)})},t=Object(pe.a)({},a.state.addresses),n=t.mainnet,r=t.testnet,l={mainnet:{fct:e(n.fct),ec:e(n.ec)},testnet:{fct:e(r.fct),ec:e(r.ec)}};localStorage.setItem(Se,JSON.stringify(l))},a.hydrateStateWithLocalStorage=Object(de.a)(me.a.mark(function e(){var t,n,r,l,o;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=JSON.parse(localStorage.getItem(Se)),xe()(t)){e.next=11;break}return n=function(e){return e.map(function(e){return Object(pe.a)({},e,{balance:null,transactions:[]})})},r=t.mainnet,l=t.testnet,o={mainnet:{fct:n(r.fct),ec:n(r.ec)},testnet:{fct:n(l.fct),ec:n(l.ec)}},e.next=7,a.smartSetState(function(e){return{addresses:o}});case 7:return e.next=9,a.setDefaultIndex();case 9:return e.next=11,a.updateBalances({force:!0});case 11:return e.next=13,a.smartSetState({readyToManageWallet:!a.isWalletEmpty()});case 13:return e.next=15,a.smartSetState({isStateHydrated:!0});case 15:case"end":return e.stop()}},e)})),a.setReadyToManageWallet=function(e){a.smartSetState({readyToManageWallet:e})},a.handleNetworkChange=function(){var e=Object(de.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.smartSetState({isStateHydrated:!1});case 2:return e.next=4,a.props.networkController.changeNetwork(t);case 4:return e.next=6,a.props.factomCliController.connectToServer();case 6:a.hydrateStateWithLocalStorage();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.deleteAddress=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.type,r=a.props.networkController.networkProps.network,(l=Object(ce.a)(a.state.addresses[r][n])).splice(t.index,1),e.next=6,a.smartSetState(function(e){return{addresses:Object(pe.a)({},e.addresses,Object(L.a)({},r,Object(pe.a)({},e.addresses[r],Object(L.a)({},n,Object(ce.a)(l)))))}});case 6:return e.next=8,a.setDefaultIndex();case 8:a.saveStateToLocalStorage();case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.addAddressTransaction=function(e,t){var n=e.type,r=e.index,l=a.props.networkController.networkProps.network,o=Object(ce.a)(a.state.addresses[l][n]),i=o[r];return i.transactions.push(t),o[e.index]=i,a.smartSetState(function(e){return{addresses:Object(pe.a)({},e.addresses,Object(L.a)({},l,Object(pe.a)({},e.addresses[l],Object(L.a)({},n,Object(ce.a)(o)))))}})},a.updateAddress=function(){var e=Object(de.a)(me.a.mark(function e(t,n,r){var l,o,i,s;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=t.type,o=a.props.networkController.networkProps.network,i=Object(ce.a)(a.state.addresses[o][l]),(s=Object(pe.a)({},i[t.index])).nickname=n,s.saveLocally=r,i[t.index]=s,e.next=9,a.smartSetState(function(e){return{addresses:Object(pe.a)({},e.addresses,Object(L.a)({},o,Object(pe.a)({},e.addresses[o],Object(L.a)({},l,Object(ce.a)(i)))))}});case 9:a.saveStateToLocalStorage();case 10:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),a.isWalletEmpty=function(){var e=a.props.networkController.networkProps.network;return Ee()(a.state.addresses[e].fct)&&Ee()(a.state.addresses[e].ec)},a.setDefaultIndex=function(){return Ee()(a.getFactoidAddresses())?Ee()(a.getEntryCreditAddresses())?a.smartSetState({activeAddressIndex_o:null}):a.selectAddress(0,"ec"):a.selectAddress(0,"fct")},a.verifyKey=function(e,t){var a=t.address;try{return Object(ke.getPublicAddress)(e).valueOf()===a.valueOf()}catch(n){return!1}},a.addAddress=function(e,t){a.addAddresses([e],t),a.selectAddress(a.getNextIndex(t),t)},a.addAddresses=function(){var e=Object(de.a)(me.a.mark(function e(t,n){var r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.props.networkController.networkProps.network,e.next=3,a.smartSetState(function(e){return{addresses:Object(pe.a)({},e.addresses,Object(L.a)({},r,Object(pe.a)({},e.addresses[r],Object(L.a)({},n,[].concat(Object(ce.a)(e.addresses[r][n]),Object(ce.a)(t))))))}});case 3:return e.next=5,a.setDefaultIndex();case 5:return e.next=7,a.updateBalances();case 7:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.getNextIndex=function(e){var t=0;return"fct"===e?t=a.getFactoidAddresses().length-1:"ec"===e&&(t=a.getEntryCreditAddresses().length-1),t},a.selectAddress=function(e,t){return a.smartSetState({activeAddressIndex_o:{index:e,type:t}})},a.getActiveAddress=function(){if(null!==a.state.activeAddressIndex_o){var e=a.props.networkController.networkProps.network;return a.state.addresses[e][a.state.activeAddressIndex_o.type][a.state.activeAddressIndex_o.index]}return null},a.getFactoidAddresses=function(){return a.getAddresses("fct")},a.getEntryCreditAddresses=function(){return a.getAddresses("ec")},a.getAddresses=function(e){var t=a.props.networkController.networkProps.network;return a.state.addresses[t][e]},a.updateWalletBalance=function(){var e=Object(de.a)(me.a.mark(function e(t){var n;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.factomCliController.factomCli.getBalance(t.address);case 2:return n=e.sent,e.abrupt("return",Object(pe.a)({},t,{balance:n}));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.updateBalances=Object(de.a)(me.a.mark(function e(){var t,n,r,l,o,i,s,c,u=arguments;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=t.force,r=void 0!==n&&n,!a.state.isStateHydrated&&!r){e.next=10;break}return l=a.props.networkController.networkProps.network,e.next=5,Promise.all([Promise.all(a.state.addresses[l].fct.map(a.updateWalletBalance)),Promise.all(a.state.addresses[l].ec.map(a.updateWalletBalance))]);case 5:return o=e.sent,i=Object(se.a)(o,2),s=i[0],c=i[1],e.abrupt("return",a.smartSetState(function(e){return{addresses:Object(pe.a)({},e.addresses,Object(L.a)({},l,Object(pe.a)({},e.addresses[l],{ec:c,fct:s})))}}));case 10:case"end":return e.stop()}},e)})),a.getEntryCreditRate=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.factomCliController.factomCli.getEntryCreditRate();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),a.getFactoshiFee=Object(de.a)(me.a.mark(function e(){var t,n,r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getEntryCreditRate();case 2:return t=e.sent,n="FA3E6enA33y9f5K9q9nrWfcDNrVR4zAp4xpniizNjQbV4RAmPjat",r=ke.Transaction.builder().input(n,Number.MAX_SAFE_INTEGER).output(n,Number.MAX_SAFE_INTEGER).build().computeRequiredFees(t,{rcdType:1}),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)})),a.getFactoidFee=Object(de.a)(me.a.mark(function e(){var t;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getFactoshiFee();case 2:return t=e.sent,e.abrupt("return",t*Oe);case 4:case"end":return e.stop()}},e)})),a.newStandardAddress=function(e,t){return{importType:"standard",address:e,nickname:t,balance:null,transactions:[],saveLocally:!1}},a.newSeedAddress=function(e,t,a){return{importType:"seed",address:e,nickname:t,balance:null,transactions:[],index:a,saveLocally:!1}},a.newLedgerAddress=function(e,t,a){return{importType:"ledger",address:e,nickname:t,balance:null,transactions:[],index:a,saveLocally:!1}},a.state={addresses:{mainnet:{fct:[],ec:[]},testnet:{fct:[],ec:[]}},activeAddressIndex_o:null,isStateHydrated:!1,readyToManageWallet:!1,setReadyToManageWallet:a.setReadyToManageWallet,isWalletEmpty:a.isWalletEmpty,handleNetworkChange:a.handleNetworkChange,verifyKey:a.verifyKey,updateAddress:a.updateAddress,addAddressTransaction:a.addAddressTransaction,deleteAddress:a.deleteAddress,getAddresses:a.getAddresses,getFactoidAddresses:a.getFactoidAddresses,getEntryCreditAddresses:a.getEntryCreditAddresses,addAddresses:a.addAddresses,addAddress:a.addAddress,selectAddress:a.selectAddress,getActiveAddress:a.getActiveAddress,updateWalletBalance:a.updateWalletBalance,updateBalances:a.updateBalances,getEntryCreditRate:a.getEntryCreditRate,getFactoshiFee:a.getFactoshiFee,getFactoidFee:a.getFactoidFee,newStandardAddress:a.newStandardAddress,newSeedAddress:a.newSeedAddress,newLedgerAddress:a.newLedgerAddress},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.hydrateStateWithLocalStorage();case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isStateHydrated?r.a.createElement(_.a.Provider,{value:this.state},this.props.children):null}}]),t}(r.a.Component),Ae=p()(G.b,Y)(je),Fe=r.a.createContext(),Te=function(e){return function(t){return r.a.createElement(Fe.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{seedController:a}))})}},Ie=a(129),Pe=a.n(Ie),Ve=function(e){return Object(ke.getPublicAddress)(Object(ke.seedToPrivateFctAddress)(e))},Re=function(e){return Object(ke.getPublicAddress)(Object(ke.seedToPrivateEcAddress)(e))},Le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getSeedAddresses=function(){var e=Object(de.a)(me.a.mark(function e(t,n,r,l){var o,i,s,c,u,m,d;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o=[],i=a.props.networkController.networkProps.bip32Account,s=new Pe.a.FactomBIP44(t),c=n;c<n+r;c++)u=null,m=null,"fct"===l?(u=s.generateFactoidPrivateKey(i,0,c),m=Ve(u)):"ec"===l&&(u=s.generateEntryCreditPrivateKey(i,0,c),m=Re(u)),o.push({address:m,index:c});return e.next=6,Promise.all(o.map(a.props.walletController.updateWalletBalance));case 6:return d=e.sent,e.abrupt("return",d);case 8:case"end":return e.stop()}},e)}));return function(t,a,n,r){return e.apply(this,arguments)}}(),a.signWithSeed=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l,o,i,s,c,u,m;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.mnemonic,r=t.index,l=t.toAddr,o=t.amount,i=t.type,s={},c=a.props.networkController.networkProps.bip32Account,u=new Pe.a.FactomBIP44(n),m=Object(ke.seedToPrivateFctAddress)(u.generateFactoidPrivateKey(c,0,r)),"sendFCT"!==i){e.next=11;break}return e.next=8,a.props.factomCliController.factomCli.createFactoidTransaction(m,l,o);case 8:s=e.sent,e.next=15;break;case 11:if("convertFCT"!==i){e.next=15;break}return e.next=14,a.props.factomCliController.factomCli.createEntryCreditPurchaseTransaction(m,l,o);case 14:s=e.sent;case 15:return e.abrupt("return",s);case 16:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.verifySeed=function(e,t){var n=t.address,r=t.index;try{var l=new Pe.a.FactomBIP44(e),o=a.props.networkController.networkProps.bip32Account,i=null;return Object(ke.isValidPublicFctAddress)(n)?i=Ve(l.generateFactoidPrivateKey(o,0,r)):Object(ke.isValidPublicEcAddress)(n)&&(i=Re(l.generateEntryCreditPrivateKey(o,0,r))),i.valueOf()===n.valueOf()}catch(s){return!1}},a.getPrivateKey=function(e,t){var n=t.address,r=t.index,l=a.props.networkController.networkProps.bip32Account,o=new Pe.a.FactomBIP44(e),i=null;if(Object(ke.isValidPublicFctAddress)(n)){var s=o.generateFactoidPrivateKey(l,0,r);i=Object(ke.seedToPrivateFctAddress)(s)}else if(Object(ke.isValidPublicEcAddress)(n)){var c=o.generateEntryCreditPrivateKey(l,0,r);i=Object(ke.seedToPrivateEcAddress)(c)}return i},a.state={getSeedAddresses:a.getSeedAddresses,signWithSeed:a.signWithSeed,verifySeed:a.verifySeed,getRandomMnemonic:a.getRandomMnemonic,getPrivateKey:a.getPrivateKey},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getRandomMnemonic",value:function(){return Pe.a.randomMnemonic()}},{key:"render",value:function(){return r.a.createElement(Fe.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),Be=p()(_.b,G.b,Y)(Le),We=a(387),Me=a.n(We),De=a(128),He=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).defaultConnectionParams={path:"/v2",debugPath:"/debug",protocol:"https",rejectUnauthorized:!0,retry:{retries:4,factor:2,minTimeout:500,maxTimeout:2e3}},a.updateBlockHeight=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:new ke.FactomEventEmitter(a.state.factomCli,{interval:1e4}).on("newDirectoryBlock",function(e){var t=e.height,n=e.timestamp;t!==a.state.blockHeight&&a.setState({blockHeight:t,blockTimestamp:n})});case 2:case"end":return e.stop()}},e)})),a.getEstimatedBlockTimestamp=function(e){var t=10*(e-a.state.blockHeight);return De.unix(a.state.blockTimestamp).utc().clone().add(60*t*1e3,"milliseconds").valueOf()},a.getDefaultConnectionParams=function(){var e={host:a.props.networkController.networkProps.apiHost,port:a.props.networkController.networkProps.apiPort};return Me()(a.defaultConnectionParams,e)},a.newFactomCli=function(e){return new ke.FactomCli(Me()(a.defaultConnectionParams,e))},a.connectToServer=Object(de.a)(me.a.mark(function e(){var t;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={host:a.props.networkController.networkProps.apiHost,port:a.props.networkController.networkProps.apiPort},e.next=3,a.smartSetState({factomCli:a.newFactomCli(t)});case 3:return e.next=5,a.updateBlockHeight();case 5:case"end":return e.stop()}},e)})),a.smartSetState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve.a;return new Promise(function(n){return a.setState(e,fe()([t,n]))})},a.state={connectToServer:a.connectToServer,getDefaultConnectionParams:a.getDefaultConnectionParams,getEstimatedBlockTimestamp:a.getEstimatedBlockTimestamp,blockHeight:null,blockTimestamp:null,isStateHydrated:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connectToServer();case 2:return e.next=4,this.smartSetState({isStateHydrated:!0});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isStateHydrated?r.a.createElement($.Provider,{value:this.state},this.props.children):null}}]),t}(r.a.Component),Ke=p()(G.b)(He),qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).networkProps={mainnet:{network:"mainnet",bip32Account:0,factoidAbbreviation:"FCT",factoidAbbreviationFull:"Factoid",ecAbbreviation:"EC",ecAbbreviationFull:"Entry Credit",apiPort:443,apiHost:"api.factomd.net",explorerURL:"https://explorer.factoid.org",voteRegistrationChainID:"a968e880ee3a7002f25ade15ae36a77c15f4dbc9d8c11fdd5fe86ba6af73a475",voteApiUrl:"https://mainnetvote.factoid.org/graphql"},testnet:{network:"testnet",bip32Account:2147483647,factoidAbbreviation:"TTS",factoidAbbreviationFull:"Testoid",ecAbbreviation:"TC",ecAbbreviationFull:"Test Credit",apiPort:8288,apiHost:"api.myfactomwallet.com",explorerURL:"https://testnet.factoid.org",voteRegistrationChainID:"a968e880ee3a7002f25ade15ae36a77c15f4dbc9d8c11fdd5fe86ba6af73a475",voteApiUrl:"https://testnetvote.factoid.org/graphql"}},a.changeNetwork=function(){var e=Object(de.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.smartSetState({networkProps:a.networkProps[t]});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.smartSetState=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ve.a;return new Promise(function(n){return a.setState(e,fe()([t,n]))})},a.state={networkProps:a.networkProps.mainnet,changeNetwork:a.changeNetwork},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(G.a.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),Je=a(575),ze=a(107),Ue=a(2),_e=a.n(Ue),Ge=r.a.createContext(),$e=function(e){return function(t){return r.a.createElement(Ge.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{voteController:a}))})}},Ye=a(290),Xe=a(598),Qe=a(108),Ze=a(93),et=a.n(Ze),tt={name:"Binary Voting",type:0,numOptions:1},at={name:"Single Option Voting",type:1,numOptions:1},nt={name:"Approval Voting",type:1},rt={name:"Instant-runoff Voting",type:2},lt={binary:tt,singleOption:at,approval:nt,instantRunoff:rt},ot="All Eligible Voters",it="ALL_ELIGIBLE_VOTERS",st="Participants Only",ct="PARTICIPANTS_ONLY",ut=[{value:"sha1",text:"sha1"},{value:"sha256",text:"sha256"},{value:"sha512",text:"sha512"}],mt=/^[a-f0-9]{64}$/,dt={discussion:{value:"discussion",displayValue:"Discussion Phase"},commit:{value:"commit",displayValue:"Commit Phase"},reveal:{value:"reveal",displayValue:"Reveal Phase"},complete:{value:"complete",displayValue:"Complete"}};function pt(){var e=Object(ze.a)(["\n\tquery PubKeyResolver($chain: String!) {\n\t\tidentityKeysAtHeight(chain: $chain)\n\t}\n"]);return pt=function(){return e},e}var ht=et()(pt()),ft=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).client=new Xe.a({uri:a.props.networkController.networkProps.voteApiUrl}),a.publicKeysResolver=function(){var e=Object(de.a)(me.a.mark(function e(t,n){var r,l;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.query({query:ht,variables:{chain:t}});case 2:if(r=e.sent,l=r.data,xe()(_e()(l,"identityKeysAtHeight"))){e.next=8;break}return e.abrupt("return",_e()(l,"identityKeysAtHeight"));case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.newFactomVoteManager=function(){return new Ye.FactomVoteManager(a.props.factomCliController.getDefaultConnectionParams(),{publicKeysResolver:a.publicKeysResolver,privateKeysResolver:null})},a.submitVote=function(){var e=Object(de.a)(me.a.mark(function e(t,n){var r;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return!0,e.next=3,a.state.factomVoteManager.createVote(t,n,!0);case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.commitVote=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l,o,i;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.voteChainId,r=t.vote,l=t.voter,o=t.ecPrivateAddress,!1,e.next=4,a.state.factomVoteManager.commitVote(n,r,l,o,!1);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.revealVote=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l,o,i;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.voteChainId,r=t.vote,l=t.voterId,o=t.ecPrivateAddress,!1,e.next=4,a.state.factomVoteManager.revealVote(n,r,l,o,!1);case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.getPhaseEndBlock=function(e){var t=e.commitStart,n=e.commitEnd,r=e.revealEnd,l=a.props.factomCliController.blockHeight+1;return l<t?t-1:l<=n?n:l<=r?r:null},a.getPollStatus=function(e){var t=e.commitStart,n=e.commitEnd,r=e.revealEnd,l=a.props.factomCliController.blockHeight+1;return l<t?dt.discussion:l<=n?dt.commit:l<=r?dt.reveal:dt.complete},a.getPollType=function(e,t){var a;return 0===e?a=lt.binary:1===e?a=1===t?lt.singleOption:lt.approval:2===e&&(a=lt.instantRunoff),a},a.state={factomVoteManager:a.newFactomVoteManager(),submitVote:a.submitVote,getPollStatus:a.getPollStatus,getPhaseEndBlock:a.getPhaseEndBlock,getPollType:a.getPollType,commitVote:a.commitVote,revealVote:a.revealVote},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Qe.b,{client:this.client},r.a.createElement(Ge.Provider,{value:this.state},this.props.children))}}]),t}(r.a.Component),bt=p()(G.b,Y)(ft),Et=r.a.createContext(),gt=1,vt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).registerIdentity=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l,o,i,s,c,u,m,d,p,h,f,b;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t.idPubKeys,r=t.idNames,l=t.ecPrivateKey,o={"identity-version":gt,keys:n},i=ke.Entry.builder(),s=!0,c=!1,u=void 0,e.prev=6,m=r[Symbol.iterator]();!(s=(d=m.next()).done);s=!0)p=d.value,i.extId(p,"utf8");e.next=14;break;case 10:e.prev=10,e.t0=e.catch(6),c=!0,u=e.t0;case 14:e.prev=14,e.prev=15,s||null==m.return||m.return();case 17:if(e.prev=17,!c){e.next=20;break}throw u;case 20:return e.finish(17);case 21:return e.finish(14);case 22:return h=i.content(JSON.stringify(o),"utf8").build(),f=new ke.Chain(h),e.next=26,a.props.factomCliController.factomCli.add(f,l);case 26:return b=e.sent,e.abrupt("return",b);case 28:case"end":return e.stop()}},e,null,[[6,10,14,22],[15,,17,21]])}));return function(t){return e.apply(this,arguments)}}(),a.state={registerIdentity:a.registerIdentity},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Et.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),yt=p()(Y,G.b)(vt),xt=a(599),Ct=a(281),wt=a.n(Ct),kt=a(282),Ot=a.n(kt),St=a(283),Nt=a.n(St),jt=a(280),At=a.n(jt),Ft=a(152),Tt=a.n(Ft),It=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this))).handleAgree=function(){a.props.onClose(a.state.value)},a.handleChange=function(e,t){a.setState({value:t})},a.state={value:e.value},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value!==this.props.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this.props,t=(e.classes,e.value,Object(xt.a)(e,["classes","value"]));return r.a.createElement(At.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,"aria-labelledby":"confirmation-dialog-title"},t),r.a.createElement(wt.a,{align:"center",style:{backgroundColor:"#f50057"}},r.a.createElement(Tt.a,{fontSize:"large"})),r.a.createElement(Ot.a,null,r.a.createElement("br",null),r.a.createElement(y.a,{variant:"h5",align:"center"},"Important"),r.a.createElement("br",null),r.a.createElement(y.a,null,"MyFactomWallet.com is a client-side interface wallet. We provide the user with access to the Factom blockchain, but we do not store, control or have access to ANY user wallet or blockchain information including keys or transaction data. Therefore,\xa0",r.a.createElement("b",null,"we cannot reverse transactions or recover funds."),"\xa0 MyFactomWallet.com is not a bank or a custodian. Your assets and your security are entirely your own responsibility. By using MyFactomWallet.com and/or by clicking 'accept' at the bottom, you agree to the following notices:"),r.a.createElement(y.a,{variant:"h5",align:"center"},"Notices"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(y.a,null,"This project is under active development; there is always the possibility something unexpected happens that causes your funds to be lost, including but not limited to third party domain attacks. ",r.a.createElement("b",null,"We are not responsible for any loss."))),r.a.createElement("li",null,r.a.createElement(y.a,null,"Never send funds from a mainnet address to a testnet address and vice versa. Sending Factoids to the testnet will likely result in a loss of factoids. You acknowledge that testnet Testoids and Test Credits have no value.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"When you create new Factoid or Entry Credit addresses on MyFactomWallet.com, a random 12-word cryptographic seed phrase is generated in the browser, and is used to generate new addresses and sign transactions.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"The handling of your private keys or seed phrase is solely your responsibility. It happens entirely on your computer, inside your browser.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"We never transmit, receive or store your private keys or seeds.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"We do not charge a transaction fee (blockchain fees still apply).")),r.a.createElement("li",null,r.a.createElement(y.a,null,"We are not a custodian and have no information about or control over your Factoids or Entry Credits.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"You are simply using our interface to interact directly with the blockchain.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"If you provide your public key (address) to someone, they can transfer Factoids to you.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"If you provide your private key or seed phrase to a person or entity, then that person or entity has full control of your account, and may withdraw your funds.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"We are not a custodian. Your funds are stored on the blockchain and protected by your private key and/or seed phrase. As explained above, your private key is solely your responsibility and MyFactomWallet.com does not store or have access to any of your keys.")),r.a.createElement("li",null,r.a.createElement(y.a,null,'Offered under MIT License Copyright \xa9 2015-2018: THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.'))),r.a.createElement(y.a,{variant:"h5",align:"center"},"Important Tips"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(y.a,null,"Never hand-type your public or private address.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Always send a small amount of Factoids first to ensure that the transaction is processed correctly and the Factoids end up in the correct address. After verifying this, you may send the full amount of Factoids.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"If you generated a new Factoid or Entry Credit address in MyFactomWallet.com; save and back up the associated seed BEFORE you send any funds to it.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Do not post your private key or seed on any social media, chat-platforms, email/sms it, or store it in any cloud storage service (Google Drive, Dropbox etc).")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Use a hardware wallet for added protection (Ledger Nano X/S supported at this time).")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Regularly monitor the security of your computer operating system to ensure that it is not compromised by malicious software whereby unauthorized third parties may obtain your private key or seed.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Ensure that you are not on a phishing site, but have landed on the correct page (verify that you are on https://www.myfactomwallet.com in the browser, and also check that the \u201clock\u201d symbol is displayed in the Chrome address bar).")),r.a.createElement("li",null,r.a.createElement(y.a,null,"The user must understand that MyFactomWallet.com CANNOT:"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(y.a,null,"Access your wallet or send your funds for you")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Recover or change your private key or seed")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Reverse, cancel, or refund any transactions")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Freeze FCT or Entry Credit addresses")))))),r.a.createElement(Nt.a,null,r.a.createElement(C.a,{onClick:this.handleAgree,color:"primary"},"Accept")))}}]),t}(r.a.Component),Pt=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!0,value:"Done"},a.handleClose=function(e){a.setState({value:e,open:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(It,{open:this.state.open,onClose:this.handleClose,value:this.state.value}))}}]),t}(r.a.Component),Vt=Object(h.withStyles)(function(e){return{}})(Pt);var Rt=p()(G.b,Object(h.withStyles)(function(e){return{appBar:{top:"auto",bottom:0,minHeight:78,paddingTop:9,backgroundColor:"#ffa000"},toolbar:{marginLeft:"auto",marginRight:"auto"},warningIcon:{fontSize:52},toolbarSpace:{height:85}}}))(function(e){var t=e.classes;return"testnet"===e.networkController.networkProps.network?r.a.createElement(r.a.Fragment,null,r.a.createElement(le.a,null),r.a.createElement("div",{className:t.toolbarSpace}),r.a.createElement(b.a,{position:"fixed",className:t.appBar},r.a.createElement(g.a,{className:t.toolbar},r.a.createElement(Tt.a,{className:t.warningIcon}),r.a.createElement(y.a,{variant:"h3"},"You are connected to the Factom ",r.a.createElement("b",null,"Testnet")),"\xa0",r.a.createElement(Tt.a,{className:t.warningIcon})))):null}),Lt=a(1243),Bt=a(75),Wt=a.n(Bt),Mt=a(62),Dt=a.n(Mt),Ht=a(178),Kt=a.n(Ht),qt=a(179),Jt=a.n(qt),zt=a(180),Ut=a.n(zt),_t=a(81),Gt=a.n(_t),$t=a(92),Yt=a.n($t),Xt=a(47),Qt=a.n(Xt),Zt=a(68),ea=a.n(Zt),ta=a(222),aa=a.n(ta),na=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.importType,l=t.networkController.networkProps;return r.a.createElement(B.f,{initialValues:Object(L.a)({},"importType",n),onSubmit:function(t,a){e.props.handleNext()},validationSchema:W.object().shape(Object(L.a)({},"importType",W.string().required("Required"))),render:function(t){var n=t.values,o=t.handleChange,i=t.isSubmitting,s=t.errors,c=t.touched;return r.a.createElement(B.e,null,r.a.createElement(ea.a,{error:!(!_e()(s,"importType")||!_e()(c,"importType")),component:"fieldset"},r.a.createElement(aa.a,{component:"legend"},"How would you like to add a new address?",r.a.createElement(B.a,{name:"importType",render:function(){return r.a.createElement("span",{className:a.errorText},"\xa0*")}})),r.a.createElement(Yt.a,{"aria-label":"Import Type",name:"importType",value:_e()(n,"importType"),onChange:function(t){o(t),e.props.updateImportType(t.target.value)}},function(e){return[{value:"fct",label:"Import "+e.factoidAbbreviationFull+" Address"},{value:"ec",label:"Import "+e.ecAbbreviationFull+" Address"},{value:"new",label:"Generate new 12-word seed"},{value:"importSeed",label:"Import addresses from mnemonic seed phrase"},{value:"ledger",label:"Import addresses from Ledger Nano X/S"}]}(l).map(function(e,t){return r.a.createElement(Qt.a,{key:t,value:e.value,control:r.a.createElement(Gt.a,null),label:e.label,disabled:e.disabled})}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{disabled:!0},"Back"),r.a.createElement(C.a,{type:"submit",disabled:i,variant:"contained",color:"primary"},"Next")))}})}}]),t}(r.a.Component),ra=p()(G.b,Object(h.withStyles)(function(e){return{errorText:{color:"red"}}}))(na),la=a(186),oa=a.n(la),ia="factoidAddress",sa=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.classes,l=a.walletController,o=l.getFactoidAddresses,i=l.newStandardAddress,s=l.addAddress,c=a.networkController.networkProps,u=o();return r.a.createElement(B.f,{initialValues:{factoidAddress:"",nickname:""},onSubmit:function(e,a){var n=i(_e()(e,ia),_e()(e,"nickname").trim());s(n,"fct"),t.props.handleNext()},validationSchema:W.object().shape((e={},Object(L.a)(e,ia,W.string().required("Required").test(ia,"Invalid Address",ke.isValidPublicFctAddress).test(ia,"Enter unique address",function(e){return-1===oa()(u,["address",e])})),Object(L.a)(e,"nickname",W.string().trim().required("Required").test("nickname","Enter unique nickname",function(e){return-1===oa()(u,["nickname",e])})),e)),render:function(e){var a=e.isSubmitting,l=e.errors,o=e.touched;return r.a.createElement(B.e,null,r.a.createElement(ca,{error:!(!l.factoidAddress||!o.factoidAddress),name:ia,label:"Public "+c.factoidAbbreviationFull+" Address",maxLength:52}),r.a.createElement(B.a,{name:ia,render:function(e){return r.a.createElement("span",{className:n.errorText},e)}}),r.a.createElement(ca,{error:!(!l.nickname||!o.nickname),name:"nickname",label:"Nickname",maxLength:25}),r.a.createElement(B.a,{name:"nickname",render:function(e){return r.a.createElement("span",{className:n.errorText},e)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{onClick:t.props.handleBack},"Back"),r.a.createElement(C.a,{type:"submit",disabled:a,variant:"contained",color:"primary"},"Submit")))}})}}]),t}(r.a.Component),ca=function(e){return r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({spellCheck:!1,maxLength:e.maxLength,autoComplete:"nope"},"autoComplete","off")},a,{label:e.label+" "+(e.error?"*":""),margin:"dense",fullWidth:!0,error:e.error}))})},ua=p()(G.b,_.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"12px"}}}))(sa),ma=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.classes,l=a.walletController,o=l.getEntryCreditAddresses,i=l.newStandardAddress,s=l.addAddress,c=a.networkController.networkProps,u=o();return r.a.createElement(B.f,{initialValues:{entryCreditAddress:"",nickname:""},onSubmit:function(e,a){var n=i(_e()(e,"entryCreditAddress"),_e()(e,"nickname").trim());s(n,"ec"),t.props.handleNext()},validationSchema:W.object().shape((e={},Object(L.a)(e,"entryCreditAddress",W.string().required("Required").test("entryCreditAddress","Invalid Address",ke.isValidPublicEcAddress).test("entryCreditAddress","Enter unique address",function(e){return-1===oa()(u,["address",e])})),Object(L.a)(e,"nickname",W.string().trim().required("Required").test("nickname","Enter unique nickname",function(e){return-1===oa()(u,["nickname",e])})),e)),render:function(e){var a=e.isSubmitting,l=e.errors,o=e.touched;return r.a.createElement(B.e,null,r.a.createElement(da,{error:!(!l.entryCreditAddress||!o.entryCreditAddress),name:"entryCreditAddress",label:"Public "+c.ecAbbreviationFull+" Address",helperText:"test",maxLength:52}),r.a.createElement(B.a,{name:"entryCreditAddress",render:function(e){return r.a.createElement("span",{className:n.errorText},e)}}),r.a.createElement(da,{error:!(!l.nickname||!o.nickname),name:"nickname",label:"Nickname",maxLength:25}),r.a.createElement(B.a,{name:"nickname",render:function(e){return r.a.createElement("span",{className:n.errorText},e)}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{onClick:t.props.handleBack},"Back"),r.a.createElement(C.a,{type:"submit",disabled:a,variant:"contained",color:"primary"},"Submit")))}})}}]),t}(r.a.Component),da=function(e){return r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({spellCheck:!1,maxLength:e.maxLength,autoComplete:"nope"},"autoComplete","off")},a,{label:e.label+" "+(e.error?"*":""),margin:"dense",fullWidth:!0,error:e.error}))})},pa=p()(G.b,_.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"12px"}}}))(ma),ha=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={step:1},a.nextStep=function(){a.setState({step:2})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.setMnemonic(this.props.seedController.getRandomMnemonic())}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(B.f,{initialValues:Object(L.a)({},"mnemonic",""),onSubmit:function(t,a){e.props.handleNext()},validationSchema:W.object().shape(Object(L.a)({},"mnemonic",W.string().trim().required("Required").oneOf([this.props.mnemonic],"Seed does not match"))),render:function(a){var n=a.isSubmitting,l=a.errors,o=a.touched;return r.a.createElement(B.e,Object(L.a)({style:{width:"500px"},autoComplete:"nope"},"autoComplete","off"),1===e.state.step&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{fontWeight:500},className:t.warningText},"Write down your seed carefully on a piece of paper. This seed provides access to all the derived addresses. If you lose this seed, you will lose access to your addresses forever!"),r.a.createElement("br",null),r.a.createElement(y.a,{style:{fontWeight:500}},"Seed Phrase:"),r.a.createElement(y.a,null,e.props.mnemonic)),2===e.state.step&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fa,{error:!(!_e()(l,"mnemonic")||!_e()(o,"mnemonic")),name:"mnemonic",label:"Verify Seed Phrase",autoFocus:!0}),r.a.createElement(B.a,{name:"mnemonic",render:function(e){return r.a.createElement("span",{className:t.errorText},e)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{onClick:function(){e.props.setMnemonic(null),e.props.handleBack()}},"Back"),1===e.state.step&&r.a.createElement(C.a,{onClick:e.nextStep,variant:"contained",color:"primary"},"Verify Seed"),2===e.state.step&&r.a.createElement(C.a,{type:"submit",disabled:n,variant:"contained",color:"primary"},"Next")))}})}}]),t}(r.a.Component),fa=function(e){return r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({autoComplete:"nope"},"autoComplete","off")},a,{label:e.label+" "+(e.error?"*":""),margin:"dense",fullWidth:!0,error:e.error,autoFocus:e.autoFocus}))})},ba=p()(Te,Object(h.withStyles)(function(e){return{warningText:{color:"red",fontSize:"15px"},errorText:{color:"red"}}}))(ha),Ea=a(64),ga=a(122),va=a.n(ga),ya=a(124),xa=a.n(ya),Ca=a(34),wa=a.n(Ca),ka=a(123),Oa=a.n(ka),Sa=a(87),Na=a.n(Sa),ja=a(284),Aa=a.n(ja),Fa=a(79),Ta=a.n(Fa),Ia=function(e){var t=e.balance,a=1e-8*parseInt(t,10);return r.a.createElement("span",null,a.toLocaleString(void 0,{maximumFractionDigits:8}),"\xa0\xa0",e.networkProps.factoidAbbreviation)},Pa=function(e){var t=e.balance;return r.a.createElement("span",null,parseInt(t,10),"\xa0\xa0",e.networkProps.ecAbbreviation)},Va=p()(G.b)(function(e){var t=e.balance,a=e.type,n=e.networkController.networkProps;return"fct"===a?r.a.createElement(Ia,{balance:t,networkProps:n}):"ec"===a?r.a.createElement(Pa,{balance:t,networkProps:n}):void 0}),Ra=a(60),La=a.n(Ra),Ba=a(51),Wa=a.n(Ba),Ma=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!1},a.addGeneratedAddress=function(e,t,n,r){if(e){var l=a.props.newAddress(t.address,e.trim(),n);r.replace(n,l)}else r.replace(n,null)},a.validateNickname=function(e){var t,n=a.props.userAddressList.map(function(e){return e.nickname});return e?-1!==n.indexOf(e.trim())&&(t="Enter unique nickname"):t="Required",t},a.getNext=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.next=3,a.props.getNextFive();case 3:a.setState({loading:!1});case 4:case"end":return e.stop()}},e)})),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.generatedAddressList,l=t.userAddressList,o=t.values,i=t.errors,s=t.touched,c=t.setFieldValue,u=t.handleChange,m=l.map(function(e){return e.address});return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6"},this.props.title),r.a.createElement(B.a,{name:"addresses",render:function(e){return r.a.createElement("span",{className:a.errorText},r.a.createElement("br",null),e)}}),r.a.createElement(Q.a,{className:a.root},r.a.createElement(va.a,null,r.a.createElement(Oa.a,null,r.a.createElement(Na.a,null,r.a.createElement(Da,null),r.a.createElement(Da,null,"Address"),r.a.createElement(Da,null,"Balance"),r.a.createElement(Da,null,"Nickname"))),r.a.createElement(xa.a,null,!Ee()(n)&&n.map(function(t,n){var d="checkbox_"+n,p="nickname_"+n,h=-1!==m.indexOf(t.address);return r.a.createElement(Na.a,{key:n},r.a.createElement(B.d,{name:"addresses",render:function(m){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Da,null,h?r.a.createElement(Ta.a,{title:"Address already added"},r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{checked:!0,disabled:!0,name:d,color:"primary"}),label:n+1,labelPlacement:"start"})):r.a.createElement(B.c,{name:d,render:function(e){e.field,e.form;return r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{name:d,color:"primary",onChange:function(e){m.replace(n,null),c(p,""),u(e)}}),label:n+1,labelPlacement:"start"})}})),r.a.createElement(Da,null,t.address),r.a.createElement(Da,null,r.a.createElement(Va,{balance:t.balance,type:e.props.type})),r.a.createElement(Da,null,h?l.find(function(e){return e.address===t.address}).nickname:r.a.createElement(r.a.Fragment,null,_e()(o,d)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B.c,{name:p,validate:e.validateNickname},function(a){var l=a.field;return r.a.createElement(D.a,Object.assign({},l,{onChange:function(a){u(a),e.addGeneratedAddress(a.target.value,t,n,m)},autoFocus:!0,margin:"dense",fullWidth:!0,error:!(!i[p]||!s[p]),inputProps:{maxLength:25}}))}),r.a.createElement(B.a,{name:p,render:function(e){return r.a.createElement("span",{className:a.errorTextSmall},e)}})))))}}))})),r.a.createElement(Aa.a,null))),r.a.createElement("br",null),r.a.createElement(C.a,{type:"button",onClick:this.getNext,variant:"outlined",color:"primary",disabled:this.state.loading},"Load Five More",(this.state.loading||Ee()(n))&&r.a.createElement(r.a.Fragment,null,"\xa0",r.a.createElement(Wa.a,{thickness:7}))))}}]),t}(r.a.Component),Da=Object(h.withStyles)(function(e){return{head:{color:"black",fontSize:"13px",paddingLeft:5,paddingRight:5},body:{paddingLeft:5,paddingRight:5}}})(wa.a),Ha=Object(h.withStyles)(function(e){return{root:{width:"800px",marginTop:12,overflowX:"auto",maxHeight:405},head:{backgroundColor:e.palette.common.black,color:e.palette.common.white},errorText:{color:"red",fontSize:"20px"},errorTextSmall:{color:"red",fontSize:"12px"}}})(Ma),Ka=function(e){return{fct:"Ledger Nano X/S "+e.factoidAbbreviationFull+" Addresses",ec:"Ledger Nano X/S "+e.ecAbbreviationFull+" Addresses"}},qa=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).retryConnection=function(){a.setState({ledgerStatus:null}),a.getNextFive()},a.getNextFive=Object(de.a)(me.a.mark(function e(){var t,n;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.props.ledgerController.getLedgerAddresses(a.state.generatedAddressList.length,5,a.props.type);case 3:return t=e.sent,e.next=6,Promise.all(t.map(a.props.walletController.updateWalletBalance));case 6:n=e.sent,a.setState(function(e){return{generatedAddressList:[].concat(Object(ce.a)(e.generatedAddressList),Object(ce.a)(n)),ledgerConnected:!0}}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),a.setState({ledgerStatus:"Ledger Nano X/S not found. Troubleshooting tips:",ledgerConnected:!1});case 14:case"end":return e.stop()}},e,null,[[0,10]])})),a.hasAddressSelected=function(e){return Object.keys(e).filter(function(e){return e.startsWith("checkbox")}).some(function(t){return e[t]})},a.state={generatedAddressList:[],ledgerConnected:!1,ledgerStatus:null},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getNextFive()}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.walletController,l=n.getAddresses,o=n.addAddresses,i=n.newLedgerAddress,s=t.networkController.networkProps,c=l(a);return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{addresses:[],ledgerConnected:this.state.ledgerConnected,ledgerStatus:this.state.ledgerStatus},onSubmit:function(){var t=Object(de.a)(me.a.mark(function t(a,n){var r,l,i,s,c,u,m;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],l=!0,i=!1,s=void 0,t.prev=4,c=_e()(a,"addresses")[Symbol.iterator]();!(l=(u=c.next()).done);l=!0)m=u.value,xe()(m)||r.push(m);t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),i=!0,s=t.t0;case 12:t.prev=12,t.prev=13,l||null==c.return||c.return();case 15:if(t.prev=15,!i){t.next=18;break}throw s;case 18:return t.finish(15);case 19:return t.finish(12);case 20:o(r,e.props.type),e.props.handleNext();case 22:case"end":return t.stop()}},t,null,[[4,8,12,20],[13,,15,19]])}));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:W.object().shape({}),render:function(t){var n=t.isSubmitting,l=t.errors,o=t.touched,u=t.values,m=t.setFieldValue,d=t.handleChange;return r.a.createElement(B.e,null,u.ledgerConnected?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ha,{title:Ka(s)[a],type:a,generatedAddressList:e.state.generatedAddressList,userAddressList:c,getNextFive:e.getNextFive,newAddress:i,values:u,errors:l,touched:o,setFieldValue:m,handleChange:d})):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),xe()(u.ledgerStatus)?r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,r.a.createElement("b",null,"Connecting to Ledger Nano X/S")),r.a.createElement(Wa.a,{thickness:7})):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null,u.ledgerStatus),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(y.a,{style:{fontWeight:500}},"Ledger devices are currently not working on Windows 10 due to an issue out of our control.")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Are you using a Ledger Nano X/S device?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Is the Factom app launched on your device?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Is your device running the latest version?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Have you closed the Ledger Live Manager?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Are you using\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.google.com/chrome/"},"Chrome"),"?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Are you running any adblockers?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Have you tried restarting your device?")),r.a.createElement("li",null,r.a.createElement(y.a,null,"Support is available in the #ledger-nano-s channel on our\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://discord.gg/79kH2pp"},"Discord server"),"."))),r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:e.retryConnection},"Retry")),r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,r.a.createElement("b",null,"Note:")),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(y.a,null,"The Ledger Nano X/S hardware wallet can be ordered from\xa0",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://www.ledger.com/?r=1b0be6fa98ba"},"Ledger's website")," ","(affiliate link).")),r.a.createElement("li",null,r.a.createElement(y.a,null,"To function properly, the Factom application needs to be launched on the Ledger Nano X/S. You can install the application from the Ledger Live Manager."))))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{onClick:e.props.handleBack},"Back"),r.a.createElement(C.a,{type:"submit",disabled:n||!e.state.ledgerConnected,variant:"contained",color:"primary"},e.hasAddressSelected(u)?"Add and Continue":"Skip")))}})}}]),t}(r.a.Component),Ja=p()(G.b,Ea.b,_.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"12px"}}}))(qa),za=function(e){return{fct:e.factoidAbbreviationFull+" Addresses",ec:e.ecAbbreviationFull+" Addresses"}},Ua=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getNextFive=Object(de.a)(me.a.mark(function e(){var t;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.seedController.getSeedAddresses(a.props.mnemonic,a.state.generatedAddressList.length,5,a.props.type);case 2:t=e.sent,a.setState(function(e){return{generatedAddressList:[].concat(Object(ce.a)(e.generatedAddressList),Object(ce.a)(t))}});case 4:case"end":return e.stop()}},e)})),a.hasAddressSelected=function(e){return Object.keys(e).filter(function(e){return e.startsWith("checkbox")}).some(function(t){return e[t]})},a.state={generatedAddressList:[]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getNextFive()}},{key:"render",value:function(){var e=this,t=this.props,a=t.type,n=t.walletController,l=n.getAddresses,o=n.addAddresses,i=n.newSeedAddress,s=t.networkController.networkProps,c=l(a);return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:Object(L.a)({},"addresses",[]),onSubmit:function(){var t=Object(de.a)(me.a.mark(function t(a,n){var r,l,i,s,c,u,m;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r=[],l=!0,i=!1,s=void 0,t.prev=4,c=_e()(a,"addresses")[Symbol.iterator]();!(l=(u=c.next()).done);l=!0)m=u.value,xe()(m)||r.push(m);t.next=12;break;case 8:t.prev=8,t.t0=t.catch(4),i=!0,s=t.t0;case 12:t.prev=12,t.prev=13,l||null==c.return||c.return();case 15:if(t.prev=15,!i){t.next=18;break}throw s;case 18:return t.finish(15);case 19:return t.finish(12);case 20:o(r,e.props.type),e.props.handleNext();case 22:case"end":return t.stop()}},t,null,[[4,8,12,20],[13,,15,19]])}));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:W.object().shape({}),render:function(t){var n=t.isSubmitting,l=t.errors,o=t.touched,u=t.values,m=t.setFieldValue,d=t.handleChange;return r.a.createElement(B.e,null,r.a.createElement(Ha,{title:za(s)[a],type:a,generatedAddressList:e.state.generatedAddressList,userAddressList:c,getNextFive:e.getNextFive,newAddress:i,values:u,errors:l,touched:o,setFieldValue:m,handleChange:d}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,e.props.handleBack&&r.a.createElement(C.a,{onClick:e.props.handleBack},"Back"),r.a.createElement(C.a,{type:"submit",disabled:n,variant:"contained",color:"primary"},e.hasAddressSelected(u)?"Add and Continue":"Skip")))}})}}]),t}(r.a.Component),_a=p()(G.b,Te,_.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"12px"}}}))(Ua),Ga=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement(B.f,{initialValues:Object(L.a)({},"mnemonic",""),onSubmit:function(t,a){e.props.setMnemonic(_e()(t,"mnemonic").trim()),e.props.handleNext()},validationSchema:W.object().shape(Object(L.a)({},"mnemonic",W.string().trim().required("Required").test("mnemonic","Invalid Seed Phrase",Pe.a.validMnemonic))),render:function(a){var n=a.isSubmitting,l=a.errors,o=a.touched;return r.a.createElement(B.e,Object(L.a)({style:{width:"500px"},autoComplete:"nope"},"autoComplete","off"),r.a.createElement(r.a.Fragment,null,r.a.createElement($a,{error:!(!_e()(l,"mnemonic")||!_e()(o,"mnemonic")),name:"mnemonic",label:"Seed Phrase",placeholder:"Enter Seed Phrase",autoFocus:!0}),r.a.createElement(B.a,{name:"mnemonic",render:function(e){return r.a.createElement("span",{className:t.errorText},e)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{onClick:function(){e.props.setMnemonic(null),e.props.handleBack()}},"Back"),r.a.createElement(C.a,{type:"submit",disabled:n,variant:"contained",color:"primary"},"Next")))}})}}]),t}(r.a.Component),$a=function(e){return r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({autoComplete:"nope"},"autoComplete","off")},a,{label:e.label+" "+(e.error?"*":""),margin:"dense",fullWidth:!0,error:e.error,autoFocus:e.autoFocus}))})},Ya=p()(_.b,Object(h.withStyles)(function(e){return{warningText:{color:"red",fontSize:"15px"},errorText:{color:"red"}}}))(Ga),Xa=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={mnemonic:null},a.setMnemonic=function(e){a.setState({mnemonic:e})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){switch(this.props.activeStep){case 0:return r.a.createElement(ra,{handleNext:this.props.handleNext,importType:this.props.importType,updateImportType:this.props.updateImportType});case 1:if("fct"===this.props.importType)return r.a.createElement(ua,{handleNext:this.props.handleNext,handleBack:this.props.handleBack});if("ec"===this.props.importType)return r.a.createElement(pa,{handleNext:this.props.handleNext,handleBack:this.props.handleBack});if("new"===this.props.importType)return r.a.createElement(ba,{setMnemonic:this.setMnemonic,mnemonic:this.state.mnemonic,handleNext:this.props.handleNext,handleBack:this.props.handleBack});if("importSeed"===this.props.importType)return r.a.createElement(Ya,{setMnemonic:this.setMnemonic,handleNext:this.props.handleNext,handleBack:this.props.handleBack});if("ledger"===this.props.importType)return r.a.createElement(Ja,{handleNext:this.props.handleNext,handleBack:this.props.handleBack,type:"fct",key:"fctLedgerForm"});break;case 2:if("new"===this.props.importType||"importSeed"===this.props.importType)return r.a.createElement(_a,{mnemonic:this.state.mnemonic,handleNext:this.props.handleNext,type:"fct",key:"fctSeedForm"});break;case 3:if("new"===this.props.importType||"importSeed"===this.props.importType)return r.a.createElement(_a,{mnemonic:this.state.mnemonic,handleNext:this.props.handleNext,handleBack:this.props.handleBack,type:"ec",key:"ecSeedForm"});break;default:return"Unknown step"}}}]),t}(r.a.Component),Qa=a(61),Za=a.n(Qa),en=function(){return["Import Method","Address details"]},tn=function(e){return["Import Method","Seed Value",e.factoidAbbreviationFull,e.ecAbbreviationFull]},an={importSeed:tn,new:tn,ledger:function(e){return["Import Method",e.factoidAbbreviationFull]},fct:en,ec:en},nn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).initialState={activeStep:0,importType:"fct",getSteps:en},a.state=a.initialState,a.updateImportType=function(e){a.setState({importType:e,getSteps:an[e]})},a.handleNext=function(){a.setState(function(e){return{activeStep:e.activeStep+1}})},a.handleBack=function(){a.setState(function(e){return{activeStep:e.activeStep-1}})},a.handleReset=function(){a.setState(a.initialState)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.handleCloseText,n=e.networkController.networkProps,l=e.walletController.isWalletEmpty,o=this.state.activeStep,i=this.state.getSteps(n),s="testnet"===n.network?"Add Testnet Address":"Add Address";return r.a.createElement(Q.a,{className:t.paper},r.a.createElement(H,{text:s,id:"modal-title"}),r.a.createElement(Kt.a,{activeStep:o,className:t.stepper},i.map(function(e,t){return r.a.createElement(Jt.a,Object.assign({key:e},{}),r.a.createElement(Ut.a,{},e))})),r.a.createElement(r.a.Fragment,null,o===i.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"testnet"===n.network?r.a.createElement(ln,{classes:t,isWalletEmpty:l()}):r.a.createElement(rn,{classes:t,isWalletEmpty:l()}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,l()?r.a.createElement(C.a,{variant:"outlined",onClick:this.handleReset},"Reset"):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.a,{onClick:this.handleReset},"Add Another"),r.a.createElement(C.a,{onClick:this.props.handleClose,variant:"contained",color:"primary"},a)))):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(Xa,{activeStep:o,updateImportType:this.updateImportType,handleNext:this.handleNext,handleBack:this.handleBack,importType:this.state.importType}))))}}]),t}(r.a.Component),rn=function(e){e.classes;return e.isWalletEmpty?r.a.createElement(y.a,{variant:"subtitle1",gutterBottom:!0},"No Addresses have been added."):r.a.createElement(y.a,{variant:"subtitle1",gutterBottom:!0},"You have finished adding an address.")},ln=function(e){var t=e.classes;return e.isWalletEmpty?r.a.createElement(y.a,{variant:"subtitle1",gutterBottom:!0},"No Addresses have been added."):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"subtitle1",gutterBottom:!0},"You have finished adding a Testnet address."),r.a.createElement(Q.a,{className:t.testnetWarning},r.a.createElement(y.a,{className:t.warningText},r.a.createElement(Tt.a,{className:t.warningIcon}),"\xa0\xa0Use these addresses for Testnet ONLY. Do not send real Factoids to these addresses, or you run the risk of losing them. Please read all notices.",r.a.createElement("br",null),r.a.createElement("br",null),"You can use the"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://faucet.factoid.org/"},"Factom Testnet Faucet"," ",r.a.createElement(Za.a,{color:"primary",style:{fontSize:15}}))," ","to receive Testoids.")))},on=p()(G.b,_.b,Object(h.withStyles)(function(e){return{stepper:{backgroundColor:"#eeeeee"},paper:{minWidth:565,padding:4*e.spacing.unit,minHeight:300},testnetWarning:{borderColor:"#ffa000",borderStyle:"solid",padding:5,width:415},warningIcon:{color:"#ffa000",display:"inline",position:"relative",top:"6px"},warningText:{display:"inline"}}}))(nn),sn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{className:e.center},r.a.createElement(C.a,{onClick:this.handleOpen,className:e.button,variant:"outlined",color:"primary"},"Add Address"),r.a.createElement(U.a,{"aria-labelledby":"modal-title",open:this.state.open,onClose:this.handleClose},r.a.createElement("div",{className:e.modalContent},r.a.createElement(on,{handleClose:this.handleClose,handleCloseText:"Exit"}))))}}]),t}(r.a.Component),cn=Object(h.withStyles)(function(e){return{modalContent:{position:"absolute",boxShadow:e.shadows[5],top:"50%",left:"50%",transform:"translate(-50%, -50%)",minWidth:"490px"},button:{width:"275px;",height:"50px",marginBottom:"15px"},center:{margin:"0 auto"}}})(sn),un=a(150),mn=a.n(un),dn=a(151),pn=a.n(dn),hn=a(3),fn=a.n(hn),bn=a(127),En=a.n(bn),gn=a(579),vn=a(580),yn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.walletController,n=a.getEntryCreditAddresses,l=a.getFactoidAddresses,o=a.activeAddressIndex_o,i=a.selectAddress,s=a.updateBalances,c=e.networkController.networkProps,u=n(),m=l(),d={paddingRight:"0px"},p=m.map(function(e,a){var n=o.index===a&&"fct"===o.type,l=n?{fontWeight:500}:{};return r.a.createElement(mn.a,{key:a,expanded:n,onClick:Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(a,"fct");case 2:s();case 3:case"end":return e.stop()}},e)})),className:n?t.expanded:""},r.a.createElement(pn.a,{className:t.addressSummary},r.a.createElement(fn.a,{container:!0,justify:"space-between",style:d},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(y.a,{className:t.break,style:l},e.nickname)),!xe()(e.balance)&&r.a.createElement(fn.a,{item:!0,xs:5},r.a.createElement(y.a,{className:t.break},r.a.createElement(Va,{balance:e.balance,type:"fct"}))),r.a.createElement(xn,{importType:e.importType}))))}),h=u.map(function(e,a){var n=o.index===a&&"ec"===o.type,l=n?{fontWeight:500}:{};return r.a.createElement(mn.a,{key:a,expanded:n,onClick:Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(a,"ec");case 2:s();case 3:case"end":return e.stop()}},e)})),className:n?t.expanded:""},r.a.createElement(pn.a,{className:t.addressSummary},r.a.createElement(fn.a,{container:!0,justify:"space-between",style:d},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(y.a,{className:t.break,style:l},e.nickname)),!xe()(e.balance)&&r.a.createElement(fn.a,{item:!0,xs:5},r.a.createElement(y.a,{className:t.break},r.a.createElement(Va,{balance:e.balance,type:"ec"}))),r.a.createElement(xn,{importType:e.importType}))))});return r.a.createElement(r.a.Fragment,null,!Ee()(m)&&r.a.createElement(Q.a,{className:t.noPadding},r.a.createElement(Wt.a,{className:t.addressList},r.a.createElement(Dt.a,{className:t.walletListHeader},r.a.createElement(y.a,{className:t.addressHeading,variant:"subtitle1"},c.factoidAbbreviationFull+" Addresses")),r.a.createElement(Dt.a,{disableGutters:!0,className:t.walletList},r.a.createElement("div",{className:t.listAddrRoot},p)))),!Ee()(u)&&r.a.createElement(r.a.Fragment,null,!Ee()(m)&&r.a.createElement("br",null),r.a.createElement(Q.a,{className:t.noPadding},r.a.createElement(Wt.a,{className:t.addressList},r.a.createElement(Dt.a,{className:t.walletListHeader},r.a.createElement(y.a,{className:t.addressHeading,variant:"subtitle1"},c.ecAbbreviationFull+" Addresses")),r.a.createElement(Dt.a,{disableGutters:!0,className:t.walletList},r.a.createElement("div",{className:t.listAddrRoot},h))))),r.a.createElement("br",null),r.a.createElement("div",{className:t.flex},r.a.createElement("br",null),r.a.createElement(cn,null)))}}]),t}(n.Component),xn=Object(h.withStyles)({ledgerLogo:{height:15},sidebarIcon:{height:16}})(function(e){var t=e.classes,a=e.importType;return r.a.createElement(fn.a,{item:!0,xs:1,className:t.iconContainer},"seed"===a&&r.a.createElement(gn.a,{className:t.sidebarIcon}),"ledger"===a&&r.a.createElement("img",{className:t.ledgerLogo,src:En.a,alt:"ledger icon"}),"standard"===a&&r.a.createElement(vn.a,{className:t.sidebarIcon}))}),Cn=p()(G.b,_.b,Object(h.withStyles)(function(e){return{noPadding:{padding:"0px"},break:{wordWrap:"break-word"},expanded:{backgroundColor:"aliceblue"},iconContainer:{paddingTop:"2px"},listAddrRoot:{width:"100%",position:"relative",overflow:"auto",maxHeight:270},addressSummary:{padding:"0 0 0 24px"},addressHeading:{fontWeight:500},flex:{display:"flex"},walletList:{padding:"6px"},walletListHeader:{paddingTop:"5px",paddingBottom:"5px"},addressList:{paddingBottom:"0px",backgroundColor:"#ddd",borderRadius:"4px"}}}))(yn),wn=a(110),kn=a.n(wn),On=a(70),Sn=a.n(On),Nn=a(183),jn=a.n(Nn),An=a(74),Fn=a.n(An),Tn=a(581),In=function(e){var t=e.alt,a=e.className,n=e.onClick,l=e.src;return r.a.createElement("img",{alt:t,className:a,onClick:n,src:l})},Pn=p()(_.b,Ea.b,Object(h.withStyles)(function(e){return{root:{textAlign:"left"},paper:{backgroundColor:"aliceblue",padding:"16px",marginBottom:"3px"},pointer:{cursor:"pointer"},logo:{height:20}}}))(function(e){var t=e.classes,a=e.walletController,n=a.getActiveAddress,l=a.activeAddressIndex_o,o=e.ledgerController.checkAddress,i=n();return r.a.createElement("div",{className:t.root},r.a.createElement(Q.a,{elevation:2,className:t.paper},r.a.createElement(fn.a,{container:!0,justify:"space-between"},r.a.createElement(fn.a,{item:!0},r.a.createElement(y.a,null,r.a.createElement("i",null,"Nickname:"),"\xa0\xa0\xa0\xa0\xa0\xa0",i.nickname),r.a.createElement(y.a,null,r.a.createElement("i",null,"Address:"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",i.address,"\xa0",r.a.createElement(Tn.CopyToClipboard,{text:i.address},r.a.createElement(Ta.a,{title:"Copy",className:t.pointer},r.a.createElement(Fn.a,{fontSize:"inherit",color:"primary"},r.a.createElement("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}))))),"ledger"===i.importType&&r.a.createElement(y.a,null,r.a.createElement("i",null,"Import Type:"),"\xa0\xa0\xa0Ledger Nano X/S"),"seed"===i.importType&&r.a.createElement(y.a,null,r.a.createElement("i",null,"Import Type:"),"\xa0\xa0\xa0Seed Phrase"),"standard"===i.importType&&r.a.createElement(y.a,null,r.a.createElement("i",null,"Import Type:"),"\xa0\xa0\xa0Public Address"),!xe()(i.balance)&&r.a.createElement(y.a,null,r.a.createElement("i",null,"Balance:"),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement(Va,{balance:i.balance,type:l.type}))),r.a.createElement(fn.a,{item:!0},"ledger"===i.importType&&r.a.createElement(Ta.a,{title:"Verify Ledger Nano X/S Address",className:t.pointer},r.a.createElement(In,{className:t.logo,src:En.a,alt:"Ledger Logo",onClick:Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i,l.type);case 2:case"end":return e.stop()}},e)}))}))))))}),Vn=p()(Object(h.withStyles)({root:{width:"75%",margin:"0 auto",paddingTop:"26px",marginTop:"39px",height:"194px",borderRadius:"10px",backgroundColor:"#eef1f4",textAlign:"center"},transferFactoidAmountText:{fontSize:"50px",color:"#007eff"},transferFactoidUnitText:{width:"55px",height:"24px",fontSize:"20px",color:"#007eff"},factoidAmountSmallText:{color:"#001830",paddingTop:"7px"},detail:{display:"inline-block",paddingLeft:"65px",paddingRight:"65px"},divider:{width:"50%",opacity:.15,border:"solid 1px #103152"}}))(function(e){var t=e.factoidAmount,a=e.classes,n=e.networkProps,l=e.sendFactoidFee,o=t+l,i=t.toLocaleString(void 0,{maximumFractionDigits:8}),s=o.toLocaleString(void 0,{maximumFractionDigits:8})+" "+n.factoidAbbreviation,c=l.toLocaleString(void 0,{maximumFractionDigits:8})+" "+n.factoidAbbreviation;return r.a.createElement(Q.a,{className:a.root,elevation:2},r.a.createElement("div",null,"Transaction Preview"),r.a.createElement("br",null),r.a.createElement("span",{className:a.transferFactoidAmountText},i),r.a.createElement("span",{className:a.transferFactoidUnitText}," "+n.factoidAbbreviation),r.a.createElement("hr",{className:a.divider}),r.a.createElement("div",{className:a.detail},r.a.createElement("div",null,"Total Amount:"),r.a.createElement("div",{className:a.factoidAmountSmallText},s)),r.a.createElement("div",{className:a.detail},r.a.createElement("div",null,"Network Fee:"),r.a.createElement("div",{className:a.factoidAmountSmallText},c)))}),Rn="recipientAddress",Ln="myFctWalletAnchorEl",Bn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sendFactoidFee:null},a.verifyKey=function(e){var t=a.props.walletController.getActiveAddress();return a.props.walletController.verifyKey(e,t)},a.verifySeed=function(e){var t=a.props.walletController.getActiveAddress();return a.props.seedController.verifySeed(e,t)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(de.a)(me.a.mark(function e(){var t;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.walletController.getFactoidFee();case 2:t=e.sent,this.setState({sendFactoidFee:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMaxFCT",value:function(e,t){var a=1e-8*e-t;return a<0?0:a}},{key:"render",value:function(){var e,t,a=this,n=this.props,l=n.classes,o=n.factomCliController.factomCli,i=n.walletController,s=i.getFactoidAddresses,c=i.getActiveAddress,u=i.updateBalances,m=i.activeAddressIndex_o,d=i.addAddressTransaction,p=n.ledgerController.signTransaction,h=n.networkController.networkProps,f=n.seedController.signWithSeed,b=s(),E=c(),g=this.getMaxFCT(E.balance,this.state.sendFactoidFee);return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:(e={sendFactoidAmount:"",recipientAddress:"",myFctWalletAnchorEl:null},Object(L.a)(e,"privateKey",""),Object(L.a)(e,"seed",""),Object(L.a)(e,"walletImportType",E.importType),Object(L.a)(e,"transactionID",null),Object(L.a)(e,"ledgerStatus",null),Object(L.a)(e,"transactionError",null),Object(L.a)(e,"addressToReinitialize",E.address),e),onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(t,n){var r,l,i,s,c,h,b,g,v,y,x,C,w,k,O,S,N;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.sendFactoidAmount,l=t.recipientAddress,i=t.privateKey,s=t.seed,c={},h=_e()(t,"walletImportType"),e.prev=3,"standard"!==h){e.next=10;break}return e.next=7,o.createFactoidTransaction(i,l,Math.round(1e8*r));case 7:c=e.sent,e.next=36;break;case 10:if("seed"!==h){e.next=22;break}return b=s.trim(),g=E.index,v=l,y=Math.round(1e8*r),"sendFCT",x={mnemonic:b,index:g,toAddr:v,amount:y,type:"sendFCT"},e.next=19,f(x);case 19:c=e.sent,e.next=36;break;case 22:if("ledger"!==h){e.next=36;break}return n.setFieldValue("ledgerStatus","Connecting to Ledger Nano S"),e.next=26,a.props.ledgerController.isLedgerConnected();case 26:return e.sent?n.setFieldValue("ledgerStatus","Waiting 30s for Confirmation"):(n.resetForm(),n.setFieldValue("transactionError","Ledger Nano S Not Found. Please connect your Ledger Nano S and try again.")),C=E.address,w=l,k=Math.round(1e8*r),O=E.index,S={fromAddr:C,toAddr:w,amount:k,index:O},e.next=35,p(S);case 35:c=e.sent;case 36:return e.next=38,o.sendTransaction(c);case 38:return N=e.sent,e.next=41,d(m,N);case 41:n.setFieldValue("transactionID",N),u(),e.next=50;break;case 45:e.prev=45,e.t0=e.catch(3),console.log(e.t0),n.resetForm(),n.setFieldValue("transactionError","An error occured. Please try again.");case 50:case"end":return e.stop()}},e,null,[[3,45]])}));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:W.object().shape((t={},Object(L.a)(t,Rn,W.string().required("Required").test(Rn,"Invalid Address",ke.isValidPublicFctAddress)),Object(L.a)(t,"sendFactoidAmount",W.number().required("Required").typeError("Must be a number").positive("Must be greater than 0").max(g,"Insufficient Funds")),Object(L.a)(t,"walletImportType",W.string()),Object(L.a)(t,"privateKey",W.string().when("walletImportType",{is:"standard",then:W.string().required("Required").test("privateKey","Invalid Key",this.verifyKey),otherwise:W.string().notRequired()})),Object(L.a)(t,"seed",W.string().when("walletImportType",{is:"seed",then:W.string().trim().required("Required").test("seed","Invalid Seed Phrase",this.verifySeed),otherwise:W.string().notRequired()})),t)),render:function(e){var t=e.isSubmitting,n=e.errors,o=e.touched,i=e.values,s=e.setFieldValue,c=e.handleReset,u=e.handleChange;return r.a.createElement(B.e,Object(L.a)({autoComplete:"nope"},"autoComplete","off"),r.a.createElement(Pn,null),r.a.createElement(B.c,{name:Rn},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!n[Rn]||!o[Rn])},a,{onChange:function(e){u(e),s("transactionError",null)},label:"Recipient "+h.factoidAbbreviation+" address",fullWidth:!0,type:"text",placeholder:"Enter "+h.factoidAbbreviationFull+" Address",disabled:t,inputProps:Object(L.a)({spellCheck:!1,maxLength:52,autoComplete:"nope"},"autoComplete","off")}))}),r.a.createElement(fn.a,{container:!0,justify:"space-between"},r.a.createElement(fn.a,{item:!0},r.a.createElement(B.a,{name:Rn,render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),r.a.createElement(fn.a,{item:!0},r.a.createElement(Wn,{values:i,setFieldValue:s,factoidAddresses:b}),r.a.createElement(y.a,{variant:"caption","aria-owns":i[Ln]?"simple-menu":null,"aria-haspopup":"true",onClick:function(e){t||(s("transactionError",null),s(Ln,e.currentTarget))},className:l.pointer},"Send to one of my addresses"))),r.a.createElement(B.c,{name:"sendFactoidAmount"},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!n.sendFactoidAmount||!o.sendFactoidAmount)},a,{onChange:function(e){(""===e.target.value||/^[\d.]+$/.test(e.target.value))&&u(e)},placeholder:"Enter Amount ("+h.factoidAbbreviation+")",label:"Amount",fullWidth:!0,disabled:t}))}),r.a.createElement(fn.a,{container:!0,justify:"space-between"},r.a.createElement(fn.a,{item:!0},r.a.createElement(B.a,{name:"sendFactoidAmount",render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),r.a.createElement(fn.a,{item:!0},r.a.createElement(y.a,{variant:"caption",onClick:function(){t||s("sendFactoidAmount",g)},className:l.pointer},"Use Max"))),"standard"===_e()(i,"walletImportType")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B.c,{name:"privateKey"},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!n.privateKey||!o.privateKey)},a,{placeholder:"Enter Private Key for "+E.nickname,label:"Private Key",fullWidth:!0,disabled:t,inputProps:Object(L.a)({spellCheck:!1,maxLength:52,autoComplete:"nope"},"autoComplete","off")}))}),r.a.createElement(B.a,{name:"privateKey",render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),"seed"===_e()(i,"walletImportType")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B.c,{name:"seed"},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({autoComplete:"nope"},"autoComplete","off"),error:!(!_e()(n,"seed")||!_e()(o,"seed"))},a,{placeholder:"Enter Seed Phrase for "+E.nickname,label:"Seed Phrase",fullWidth:!0,disabled:t}))}),r.a.createElement(B.a,{name:"seed",render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),i.sendFactoidAmount?r.a.createElement(Vn,{networkProps:h,factoidAmount:i.sendFactoidAmount,sendFactoidFee:a.state.sendFactoidFee}):"",r.a.createElement("br",null),!xe()(i.transactionError)&&r.a.createElement(y.a,{className:l.transactionErrorText},i.transactionError),r.a.createElement("br",null),t?r.a.createElement(r.a.Fragment,null,null!==i.transactionID?r.a.createElement("div",null,r.a.createElement(Q.a,{className:l.transaction},r.a.createElement(jn.a,{nativeColor:"#6fbf73",className:l.successIcon}),"\xa0",r.a.createElement(y.a,{gutterBottom:!0,style:{display:"inline"}},r.a.createElement("b",null,"Transaction ID:")," ",i.transactionID),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,"This transaction will be visible"," ",r.a.createElement(Ta.a,{title:"Open Factom Explorer"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:h.explorerURL+"/transaction?txid="+i.transactionID},"here"," ",r.a.createElement(Za.a,{color:"primary",style:{fontSize:15}})))," ","in 10-15 minutes, after being included in the next Factom block currently being processed by the blockchain. Funds are available for use immediately.",r.a.createElement("br",null))),r.a.createElement("br",null),r.a.createElement(C.a,{type:"button",className:"outline",color:"primary",variant:"contained",onClick:c},"New Transaction")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Wa.a,{thickness:7}),i.ledgerStatus)):r.a.createElement(C.a,{className:l.sendButton,variant:"contained",color:"primary",type:"submit",disabled:t},"Send "+h.factoidAbbreviationFull+"s"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,"Please verify all details are correct before hitting send.",r.a.createElement("br",null),"Nobody can reverse mistaken transactions."))}})}}]),t}(n.Component);function Wn(e){var t=e.values,a=e.setFieldValue,n=e.factoidAddresses.map(function(e,t){return r.a.createElement(T.a,{key:t,onClick:function(){a(Ln,null),a(Rn,e.address)}},e.nickname)});return r.a.createElement(A.a,{id:"simple-menu",anchorEl:t[Ln],open:Boolean(t[Ln]),onClose:function(){a(Ln,null)}},n)}var Mn=p()(G.b,Ea.b,Te,_.b,Y,Object(h.withStyles)({sendButton:{width:"50%"},errorText:{color:"red",fontSize:"12px",textAlign:"left"},transactionErrorText:{color:"red",fontSize:"16px"},pointer:{cursor:"pointer"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",paddingTop:3,paddingBottom:8},successIcon:{position:"relative",top:"5px"}}))(Bn),Dn=p()(Object(h.withStyles)({root:{width:"75%",margin:"0 auto",paddingTop:"26px",marginTop:"39px",height:"194px",borderRadius:"10px",backgroundColor:"#eef1f4",textAlign:"center"},convertECAmountText:{fontSize:"50px",color:"#007eff"},ecUnitText:{width:"55px",height:"24px",fontSize:"20px",color:"#007eff"},factoidCostSmallText:{color:"#001830",paddingTop:"7px"},detail:{display:"inline-block",paddingLeft:"65px",paddingRight:"65px"},divider:{width:"50%",opacity:.15,border:"solid 1px #103152"}}))(function(e){var t=e.ecAmount,a=e.factoidAmount,n=e.classes,l=e.networkProps,o=e.sendFactoidFee,i=a+o,s=t.toLocaleString(void 0,{maximumFractionDigits:8}),c=i.toLocaleString(void 0,{maximumFractionDigits:8})+" "+l.factoidAbbreviation,u=o.toLocaleString(void 0,{maximumFractionDigits:8})+" "+l.factoidAbbreviation;return r.a.createElement(Q.a,{className:n.root,elevation:2},r.a.createElement("div",null,"Transaction Preview"),r.a.createElement("br",null),r.a.createElement("span",{className:n.convertECAmountText},s),r.a.createElement("span",{className:n.ecUnitText}," "+l.ecAbbreviation),r.a.createElement("hr",{className:n.divider}),r.a.createElement("div",{className:n.detail},r.a.createElement("div",null,"Total Cost:"),r.a.createElement("div",{className:n.factoidCostSmallText},c)),r.a.createElement("div",{className:n.detail},r.a.createElement("div",null,"Network Fee:"),r.a.createElement("div",{className:n.factoidCostSmallText},u)))}),Hn="recipientAddress",Kn="myFctWalletAnchorEl",qn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={sendFactoshiFee:null,ecRate:null},a.verifyKey=function(e){var t=a.props.walletController.getActiveAddress();return a.props.walletController.verifyKey(e,t)},a.verifySeed=function(e){var t=a.props.walletController.getActiveAddress();return a.props.seedController.verifySeed(e,t)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(de.a)(me.a.mark(function e(){var t,a;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.walletController.getFactoshiFee();case 2:return t=e.sent,e.next=5,this.props.walletController.getEntryCreditRate();case 5:a=e.sent,this.setState({sendFactoshiFee:t,ecRate:a});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getMaxEC",value:function(e,t){var a=(e-t)/this.state.ecRate;return a<0?0:a}},{key:"render",value:function(){var e,t,a=this,n=this.props,l=n.classes,o=n.walletController,i=o.updateBalances,s=o.getEntryCreditAddresses,c=o.getActiveAddress,u=o.activeAddressIndex_o,m=o.addAddressTransaction,d=n.ledgerController.signTransaction,p=n.factomCliController.factomCli,h=n.networkController.networkProps,f=n.seedController.signWithSeed,b=c(),E=s(),g=this.getMaxEC(b.balance,this.state.sendFactoshiFee);return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:(e={entryCreditAmount:"",recipientAddress:""},Object(L.a)(e,Kn,null),Object(L.a)(e,"privateKey",""),Object(L.a)(e,"seed",""),Object(L.a)(e,"walletImportType",b.importType),Object(L.a)(e,"transactionID",null),Object(L.a)(e,"ledgerStatus",null),Object(L.a)(e,"transactionError",null),Object(L.a)(e,"addressToReinitialize",b.address),e),onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(t,n){var r,l,o,s,c,h,E,g,v,y,x,C,w,k,O;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.entryCreditAmount,l=t.recipientAddress,o=t.privateKey,s=t.seed,c={},h=_e()(t,"walletImportType"),e.prev=3,"standard"!==h){e.next=10;break}return e.next=7,p.createEntryCreditPurchaseTransaction(o,l,r);case 7:c=e.sent,e.next=36;break;case 10:if("seed"!==h){e.next=22;break}return E=s.trim(),g=b.index,"convertFCT",v={mnemonic:E,index:g,toAddr:l,amount:r,type:"convertFCT"},e.next=19,f(v);case 19:c=e.sent,e.next=36;break;case 22:if("ledger"!==h){e.next=36;break}return n.setFieldValue("ledgerStatus","Connecting to Ledger Nano S"),e.next=26,a.props.ledgerController.isLedgerConnected();case 26:return e.sent?n.setFieldValue("ledgerStatus","Waiting 30s for Confirmation"):(n.resetForm(),n.setFieldValue("transactionError","Ledger Nano S Not Found. Please connect your Ledger Nano S and try again.")),y=b.address,x=l,C=Math.round(a.state.ecRate*r),w=b.index,k={fromAddr:y,toAddr:x,amount:C,index:w},e.next=35,d(k);case 35:c=e.sent;case 36:return e.next=38,p.sendTransaction(c);case 38:return O=e.sent,e.next=41,m(u,O);case 41:n.setFieldValue("transactionID",O),i(),e.next=50;break;case 45:e.prev=45,e.t0=e.catch(3),console.log(e.t0),n.resetForm(),n.setFieldValue("transactionError","An error occured. Please try again.");case 50:case"end":return e.stop()}},e,null,[[3,45]])}));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:W.object().shape((t={},Object(L.a)(t,Hn,W.string().required("Required").test(Hn,"Invalid Address",ke.isValidPublicEcAddress)),Object(L.a)(t,"entryCreditAmount",W.number().required("Required").typeError("Must be a number").positive("Must be greater than 0").max(g,"Insufficient Funds")),Object(L.a)(t,"walletImportType",W.string()),Object(L.a)(t,"privateKey",W.string().when("walletImportType",{is:"standard",then:W.string().required("Required").test("privateKey","Invalid Key",this.verifyKey),otherwise:W.string().notRequired()})),Object(L.a)(t,"seed",W.string().when("walletImportType",{is:"seed",then:W.string().trim().required("Required").test("seed","Invalid Seed Phrase",this.verifySeed),otherwise:W.string().notRequired()})),t)),render:function(e){var t=e.isSubmitting,n=e.errors,o=e.touched,i=e.values,s=e.setFieldValue,c=e.handleReset,u=e.handleChange;return r.a.createElement(B.e,Object(L.a)({autoComplete:"nope"},"autoComplete","off"),r.a.createElement(Pn,null),r.a.createElement(B.c,{name:Hn},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!n[Hn]||!o[Hn])},a,{onChange:function(e){u(e),s("transactionError",null)},label:"Recipient "+h.ecAbbreviation+" address",fullWidth:!0,type:"text",placeholder:"Enter "+h.ecAbbreviationFull+" address",disabled:t,inputProps:Object(L.a)({spellCheck:!1,maxLength:52,autoComplete:"nope"},"autoComplete","off")}))}),r.a.createElement(fn.a,{container:!0,justify:"space-between"},r.a.createElement(fn.a,{item:!0},r.a.createElement(B.a,{name:Hn,render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),!Ee()(E)&&r.a.createElement(fn.a,{item:!0},r.a.createElement(Jn,{values:i,setFieldValue:s,ecAddresses:E}),r.a.createElement(y.a,{variant:"caption","aria-owns":i[Kn]?"simple-menu":null,"aria-haspopup":"true",onClick:function(e){t||(s("transactionError",null),s(Kn,e.currentTarget))},className:l.pointer},"Send to one of my addresses"))),r.a.createElement(B.c,{name:"entryCreditAmount"},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!n.entryCreditAmount||!o.entryCreditAmount)},a,{onChange:function(e){(""===e.target.value||/^[\d.]+$/.test(e.target.value))&&u(e)},placeholder:"Enter Amount ("+h.ecAbbreviation+")",label:"Amount",fullWidth:!0,disabled:t}))}),r.a.createElement(fn.a,{container:!0,justify:"space-between"},r.a.createElement(fn.a,{item:!0},r.a.createElement(B.a,{name:"entryCreditAmount",render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),r.a.createElement(fn.a,{item:!0},r.a.createElement("br",null))),"standard"===_e()(i,"walletImportType")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B.c,{name:"privateKey"},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!n.privateKey||!o.privateKey)},a,{placeholder:"Enter Private Key for "+b.nickname,label:"Private Key",fullWidth:!0,disabled:t,inputProps:Object(L.a)({spellCheck:!1,maxLength:52,autoComplete:"nope"},"autoComplete","off")}))}),r.a.createElement(B.a,{name:"privateKey",render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),"seed"===_e()(i,"walletImportType")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(B.c,{name:"seed"},function(e){var a=e.field;e.form;return r.a.createElement(D.a,Object.assign({error:!(!_e()(n,"seed")||!_e()(o,"seed"))},a,{placeholder:"Enter Seed Phrase for "+b.nickname,label:"Seed Phrase",fullWidth:!0,disabled:t,inputProps:Object(L.a)({autoComplete:"nope"},"autoComplete","off")}))}),r.a.createElement(B.a,{name:"seed",render:function(e){return r.a.createElement("div",{className:l.errorText},e)}})),_e()(i,"entryCreditAmount")?r.a.createElement(Dn,{networkProps:h,ecAmount:_e()(i,"entryCreditAmount"),factoidAmount:a.state.ecRate*_e()(i,"entryCreditAmount")*1e-8,sendFactoidFee:1e-8*a.state.sendFactoshiFee}):"",r.a.createElement("br",null),!xe()(i.transactionError)&&r.a.createElement(y.a,{className:l.transactionErrorText},i.transactionError),r.a.createElement("br",null),t?r.a.createElement(r.a.Fragment,null,null!==i.transactionID?r.a.createElement("div",null,r.a.createElement(Q.a,{className:l.transaction},r.a.createElement(jn.a,{nativeColor:"#6fbf73",className:l.successIcon}),"\xa0",r.a.createElement(y.a,{style:{display:"inline"}},r.a.createElement("b",null,"Transaction ID:")," ",i.transactionID),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,"This transaction will be visible"," ",r.a.createElement(Ta.a,{title:"Open Factom Explorer"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:h.explorerURL+"/transaction?txid="+i.transactionID},"here"," ",r.a.createElement(Za.a,{color:"primary",style:{fontSize:15}})))," ","in 10-15 minutes, after being included in the next Factom block currently being processed by the blockchain. Funds are available for use immediately.",r.a.createElement("br",null))),r.a.createElement("br",null),r.a.createElement(C.a,{type:"button",className:"outline",color:"primary",variant:"contained",onClick:c},"New Transaction")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Wa.a,{thickness:7}),i.ledgerStatus)):r.a.createElement(C.a,{className:l.sendButton,variant:"contained",color:"primary",type:"submit",disabled:t},"Convert "+h.factoidAbbreviation+" to "+h.ecAbbreviation),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(y.a,null,"Please verify all details are correct before hitting send.",r.a.createElement("br",null),"Nobody can reverse mistaken transactions."))}})}}]),t}(n.Component);function Jn(e){var t=e.values,a=e.setFieldValue,n=e.ecAddresses.map(function(e,t){return r.a.createElement(T.a,{key:t,onClick:function(){a(Kn,null),a(Hn,e.address)}},e.nickname)});return r.a.createElement(A.a,{id:"simple-menu",anchorEl:t[Kn],open:Boolean(t[Kn]),onClose:function(){a(Kn,null)}},n)}var zn=p()(G.b,Ea.b,Te,_.b,Y,Object(h.withStyles)({sendButton:{width:"50%"},errorText:{color:"red",fontSize:"12px",textAlign:"left"},pointer:{cursor:"pointer"},transactionErrorText:{color:"red",fontSize:"16px"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",paddingTop:3,paddingBottom:8},successIcon:{position:"relative",top:"5px"}}))(qn),Un=a(582),_n=a.n(Un),Gn=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).verifySeed=function(e){var t=a.props.walletController.getActiveAddress();return a.props.seedController.verifySeed(e,t)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.walletController.getActiveAddress,l=t.seedController.getPrivateKey,o=n();return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:(e={},Object(L.a)(e,"privateKey",""),Object(L.a)(e,"seed",""),Object(L.a)(e,"showPassword;",!1),Object(L.a)(e,"addressToReinitialize",o.address),e),onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(t,a){var n,r,i;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.seed;try{r=n.trim(),i=l(r,o),a.setFieldValue("privateKey",i)}catch(s){console.log(s)}case 2:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:W.object().shape(Object(L.a)({},"seed",W.string().trim().required("Required").test("seed","Invalid Seed Phrase",this.verifySeed))),render:function(e){var t=e.isSubmitting,n=e.errors,l=e.touched,i=e.values,s=e.setFieldValue;return r.a.createElement(B.e,Object(L.a)({autoComplete:"nope"},"autoComplete","off"),r.a.createElement(Pn,null),Ee()(_e()(i,"privateKey"))&&r.a.createElement($n,{name:"seed",fullWidth:!0,label:"Seed Phrase",type:"text",placeholder:"Enter Seed Phrase for "+o.nickname,error:_e()(n,"seed")&&_e()(l,"seed"),errorClass:a.errorText,disabled:t}),r.a.createElement("br",null),!Ee()(_e()(i,"privateKey"))&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(y.a,{variant:"subtitle2",style:{fontSize:15}},"Private Key:\xa0",_e()(i,"privateKey")&&r.a.createElement(r.a.Fragment,null,_e()(i,"showPassword;")?_e()(i,"privateKey"):r.a.createElement(r.a.Fragment,null,"...",r.a.createElement(Ta.a,{title:"Display Private Key"},r.a.createElement(k.a,{onClick:function(){s("showPassword;",!0)}},r.a.createElement(_n.a,{color:"secondary",style:{fontSize:35}}))))))),r.a.createElement("br",null),t?r.a.createElement(r.a.Fragment,null):r.a.createElement(C.a,{className:a.sendButton,variant:"contained",color:"primary",type:"submit",disabled:t},"Submit"))}})}}]),t}(n.Component),$n=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({style:{width:e.width},required:e.required,disabled:e.disabled,placeholder:e.placeholder},a,{type:e.type,inputProps:Object(L.a)({spellCheck:e.enableSpellCheck,maxLength:e.maxLength,autoComplete:"nope"},"autoComplete","off"),error:e.error,label:e.label,fullWidth:e.fullWidth,multiline:e.multiline}))}),r.a.createElement(B.a,{name:e.name,render:function(t){return r.a.createElement("div",{className:e.errorClass},t)}}))},Yn=p()(Te,_.b,Object(h.withStyles)({sendButton:{width:"50%"},errorText:{color:"red",fontSize:"12px",textAlign:"left"}}))(Gn),Xn=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this.props,a=t.classes,n=t.walletController,l=n.getActiveAddress,o=n.getFactoidAddresses,i=n.getEntryCreditAddresses,s=n.activeAddressIndex_o,c=n.updateAddress,u=n.deleteAddress,m=l(),d=[];"fct"===s.type?d=o():"ec"===s.type&&(d=i());var p=d.filter(function(e){return e.address!==m.address}).map(function(e){return e.nickname});return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:(e={},Object(L.a)(e,"saveLocally",m.saveLocally),Object(L.a)(e,"nickname",m.nickname),Object(L.a)(e,"deleteAnchorEl",null),e),onSubmit:function(e,t){window.setTimeout(function(){c(s,_e()(e,"nickname").trim(),_e()(e,"saveLocally")),t.resetForm()},500)},validationSchema:W.object().shape(Object(L.a)({},"nickname",W.string().trim().required("Required").test("nickname","Enter unique nickname",function(e){return-1===p.indexOf(e)}))),render:function(e){var t=e.isSubmitting,n=e.errors,l=e.touched,o=e.values,i=e.setFieldValue,c=e.handleChange;return r.a.createElement(B.e,null,r.a.createElement(y.a,{variant:"h6"},"Edit Address"),r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Qn,{error:!(!n.nickname||!l.nickname),name:"nickname",label:"Nickname",maxLength:25}),r.a.createElement("br",null),r.a.createElement(B.a,{name:"nickname",render:function(e){return r.a.createElement("span",{className:a.errorText},e)}})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(B.c,{name:"saveLocally",render:function(e){var t=e.field;e.form;return r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{onChange:c,name:"saveLocally",checked:t.value,color:"default"}),label:"Save to local browser storage"})}})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(C.a,{type:"submit",disabled:t,variant:"contained",color:"primary"},"Submit"," ",t&&r.a.createElement(r.a.Fragment,null,"\xa0",r.a.createElement(Wa.a,{size:20}))),r.a.createElement(C.a,{"aria-owns":o.deleteAnchorEl?"simple-menu":null,"aria-haspopup":"true",className:a.deleteButton,variant:"outlined",color:"secondary",onClick:function(e){i("deleteAnchorEl",e.currentTarget)}},"Delete"),r.a.createElement(A.a,{id:"simple-menu",anchorEl:o.deleteAnchorEl,open:Boolean(o.deleteAnchorEl),onClose:function(){i("deleteAnchorEl",null)}},r.a.createElement(T.a,{onClick:function(){u(s),i("deleteAnchorEl",null)},className:a.deleteConfirmationText},"Confirm Delete")))))}})}}]),t}(r.a.Component),Qn=function(e){return r.a.createElement(B.c,{name:e.name},function(t){var a=t.field;return r.a.createElement(D.a,Object.assign({inputProps:Object(L.a)({spellCheck:!1,maxLength:e.maxLength,autoComplete:"nope"},"autoComplete","off")},a,{label:e.label+" "+(e.error?"*":""),margin:"dense",fullWidth:!0,error:e.error}))})},Zn=p()(_.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"12px"},deleteButton:{marginLeft:15},deleteConfirmationText:{color:"red"}}}))(Xn),er=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.walletController.getActiveAddress,n=e.networkController.networkProps,l=a();return r.a.createElement(r.a.Fragment,null,!Ee()(l.transactions)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6"},"Recent Transactions"),l.transactions.map(function(e,a){return r.a.createElement(y.a,{key:a,gutterBottom:!0,className:t.transaction},r.a.createElement("b",null,"Tx ID:")," ",e," ",r.a.createElement(Ta.a,{title:"Open Factom Explorer"},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:n.explorerURL+"/transaction?txid="+e},r.a.createElement(Za.a,{color:"primary",style:{fontSize:15}}))))})))}}]),t}(r.a.Component),tr=p()(G.b,_.b,Object(h.withStyles)(function(e){return{transaction:{overflowWrap:"break-word"}}}))(er),ar=Object(h.withStyles)(function(e){return{root:{textAlign:"left"}}})(function(e){return r.a.createElement("div",{className:e.classes.root},r.a.createElement(Pn,null),r.a.createElement("br",null),r.a.createElement(fn.a,{container:!0,spacing:8},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Zn,null)),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(tr,null))))}),nr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tabValue:0},a.handleChange=function(e,t){a.setState({tabValue:t})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.type,n=e.activeAddress,l=e.networkController.networkProps,o=this.state.tabValue;return"fct"===a&&o>=3&&"seed"!==n.importType&&(o=0),"ec"===a&&(o>1||1===o&&"seed"!==n.importType)&&(o=0),r.a.createElement("div",{className:t.root},"fct"===a&&r.a.createElement("div",null,r.a.createElement(kn.a,{value:o,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Sn.a,{label:"Address Info"}),r.a.createElement(Sn.a,{label:"Send "+l.factoidAbbreviationFull}),r.a.createElement(Sn.a,{label:"Convert "+l.factoidAbbreviation+" to "+l.ecAbbreviation}),"seed"===n.importType&&r.a.createElement(Sn.a,{label:"View Private Key"})),0===o&&r.a.createElement(rr,{classes:t},r.a.createElement(ar,null)),1===o&&r.a.createElement(rr,{classes:t},r.a.createElement(Mn,null)),2===o&&r.a.createElement(rr,{classes:t},r.a.createElement(zn,null)),3===o&&r.a.createElement(rr,{classes:t},r.a.createElement(Yn,null))),"ec"===a&&r.a.createElement("div",null,r.a.createElement(kn.a,{value:o,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Sn.a,{label:"Address Info"}),"seed"===n.importType&&r.a.createElement(Sn.a,{label:"View Private Key"})),0===o&&r.a.createElement(rr,{classes:t},r.a.createElement(ar,null)),1===o&&r.a.createElement(rr,{classes:t},r.a.createElement(Yn,null))))}}]),t}(r.a.Component);function rr(e){return r.a.createElement(y.a,{component:"div",className:e.classes.tabContainer},e.children)}var lr=p()(G.b,Object(h.withStyles)({root:{textAlign:"center"},tabContainer:{paddingLeft:55,paddingRight:55,paddingTop:18,paddingBottom:10}}))(nr),or=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.walletController.updateBalances()}},{key:"render",value:function(){var e=this.props.walletController,t=e.getActiveAddress,a=e.activeAddressIndex_o,n=t();return r.a.createElement(r.a.Fragment,null,!xe()(n)&&r.a.createElement(fn.a,{container:!0,spacing:24,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(Cn,null)),r.a.createElement(fn.a,{item:!0,xs:8},r.a.createElement(Q.a,null,r.a.createElement(lr,{type:a.type,activeAddress:n})))))}}]),t}(n.Component),ir=p()(_.b,Object(h.withStyles)(function(e){return{}}))(or),sr=a(1245),cr=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.setReadyToManageWallet(!1)}},{key:"render",value:function(){var e=this,t="testnet"===this.props.networkController.networkProps.network?"Manage Testnet Wallet":"Manage Wallet";return r.a.createElement(fn.a,{container:!0,item:!0,xs:12,justify:"center"},r.a.createElement(on,{handleClose:function(){return e.props.setReadyToManageWallet(!0)},handleCloseText:t}))}}]),t}(n.Component),ur=p()(sr.a,G.b,_.b,Object(h.withStyles)(function(e){return{}}))(cr),mr=a(153),dr=a(285),pr=a.n(dr),hr=a(294),fr=a.n(hr),br=[5,10,25,50],Er=0,gr=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.data,l=t.title,o=t.status,i=t.initiatorId,s=t.pollChainId,c=t.handleFilterChange,u=t.filterTable,m=t.voteController.getPollStatus,d=t.networkController.networkProps,p=this.props.expanded,h=[];return n.voteList.forEach(function(e){var t,a,n,l,o,i,s=(t=e.voteChainId,a=e.admin.voteInitiator,n=e.proposal.title,l=m(e.vote.phasesBlockHeights).displayValue,o=r.a.createElement("span",null,e.vote.phasesBlockHeights.commitStart+" - "+e.vote.phasesBlockHeights.commitEnd),i=r.a.createElement("span",null,e.vote.phasesBlockHeights.commitEnd+1+" - "+e.vote.phasesBlockHeights.revealEnd),{id:Er+=1,voteID:t,adminID:a,title:n,status:l,commitPhase:o,revealPhase:i});h.push(s)}),r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12,className:a.tableWrapper},r.a.createElement(va.a,null,r.a.createElement(Oa.a,null,r.a.createElement(Na.a,null,r.a.createElement("th",{className:a.expandColumn},p?r.a.createElement(fr.a,{style:{cursor:"pointer"},titleAccess:"Collapse Table",onClick:this.props.toggleExpand,title:"Collapse Table",className:a.expandIcon}):r.a.createElement(P.a,{style:{cursor:"pointer"},titleAccess:"Expand Table",onClick:this.props.toggleExpand,title:"Expand Table",className:a.expandIcon})),r.a.createElement(wa.a,{className:"".concat(a.titleColumn," ").concat(a.columnHeader)},"Title",p&&r.a.createElement("span",null,r.a.createElement("br",null),r.a.createElement("input",{name:"title",type:"text",value:l,onChange:c}))),r.a.createElement(wa.a,{className:"".concat(a.statusColumn," ").concat(a.columnHeader)},"Status",p&&r.a.createElement("span",null,r.a.createElement("br",null),r.a.createElement("select",{name:"status",value:o,onChange:function(){var e=Object(de.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(t);case 2:u();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},r.a.createElement("option",{defaultValue:!0,value:""}),Object.values(dt).map(function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.displayValue)})))),r.a.createElement(wa.a,{className:"".concat(a.dateColumn," ").concat(a.columnHeader)},"Commit Phase"),r.a.createElement(wa.a,{className:"".concat(a.dateColumn," ").concat(a.columnHeader)},"Reveal Phase"),p?r.a.createElement(wa.a,{className:"".concat(a.pollChainIDColumn," ").concat(a.columnHeader)},"Poll Chain ID",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"pollChainId",value:s,onChange:c})):r.a.createElement(wa.a,{className:"".concat(a.shortPollChainIDColumn," ").concat(a.columnHeader)},"Poll Chain ID"),p?r.a.createElement(wa.a,{className:"".concat(a.adminIDColumn," ").concat(a.columnHeader)},"Poll Initiator ID",r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"initiatorId",value:i,onChange:c})):r.a.createElement(wa.a,{className:"".concat(a.shortAdminIDColumn," ").concat(a.columnHeader)},"Poll Initiator ID"))),r.a.createElement(xa.a,null,Ee()(h)&&r.a.createElement(Na.a,null,r.a.createElement("td",{className:a.expandColumn}),r.a.createElement(wa.a,null,r.a.createElement(mr.a,null,"No Matching Results")),r.a.createElement(wa.a,null),r.a.createElement(wa.a,null),r.a.createElement(wa.a,null),r.a.createElement(wa.a,null),r.a.createElement(wa.a,null)),h.map(function(e){return r.a.createElement(Na.a,{key:e.id,hover:!0},r.a.createElement("td",{className:a.expandColumn}),r.a.createElement(wa.a,{className:a.titleColumn},r.a.createElement(N.a,{to:"/viewVote?network="+d.network+"&id="+e.voteID},e.title)),r.a.createElement(wa.a,{className:a.statusColumn},e.status),r.a.createElement(wa.a,{className:a.dateColumn},r.a.createElement("div",{style:{width:"104px"}},e.commitPhase)),r.a.createElement(wa.a,{className:a.dateColumn},r.a.createElement("div",{style:{width:"104px"}},e.revealPhase)),p?r.a.createElement(wa.a,{className:a.pollChainIDColumn},e.voteID):r.a.createElement(wa.a,{className:a.shortPollChainIDColumn},e.voteID),p?r.a.createElement(wa.a,{className:a.adminIDColumn},e.adminID):r.a.createElement(wa.a,{className:a.shortAdminIDColumn},e.adminID))})))),r.a.createElement(fn.a,{item:!0,xs:2},r.a.createElement(pr.a,{component:fn.a,onChangePage:function(t,a){e.props.handlePageChange(a)},onChangeRowsPerPage:function(t){e.props.handleRowsPerPageChange(t.target.value)},count:this.props.count,rowsPerPage:this.props.rowsPerPage,rowsPerPageOptions:br,page:this.props.page})))}}]),t}(r.a.Component),vr=p()(G.b,$e,Object(h.withStyles)(function(e){return{tableWrapper:{overflowX:"auto"},titleColumn:{minWidth:"252",paddingRight:"1px"},adminIDColumn:{paddingRight:"0px"},shortAdminIDColumn:{maxWidth:"207px",overflow:"hidden",textOverflow:"ellipsis",paddingRight:"0px"},shortPollChainIDColumn:{maxWidth:"207px",overflow:"hidden",textOverflow:"ellipsis",paddingRight:"0px"},pollChainIDColumn:{paddingRight:"0px"},statusColumn:{maxWidth:"165px",overflow:"hidden",textOverflow:"ellipsis"},dateColumn:{maxWidth:"129px",paddingRight:"1px"},expandIcon:{margin:"-5px"},expandColumn:{maxWidth:"3px"},footerPagination:{maxWidth:"345px"},columnHeader:{fontSize:"13px"}}}))(gr),yr=a(585),xr=a.n(yr);function Cr(){var e=Object(ze.a)(['\n\tquery Listing(\n\t\t$limit: Int\n\t\t$offset: Int\n\t\t$title: String\n\t\t$status: String\n\t\t$voteInitiator: String\n\t\t$voteChain: String\n\t\t$voter: String\n\t) {\n\t\tallProposals(\n\t\t\tsort: "blockHeight"\n\t\t\tsortOrder: "DESC"\n\t\t\tregistered: true\n\t\t\tlimit: $limit\n\t\t\toffset: $offset\n\t\t\ttitle: $title\n\t\t\tstatus: $status\n\t\t\tvoteInitiator: $voteInitiator\n\t\t\tvoteChain: $voteChain\n\t\t\tvoter: $voter\n\t\t) {\n\t\t\tlistInfo\n\t\t\tvoteList {\n\t\t\t\tadmin {\n\t\t\t\t\tvoteInitiator\n\t\t\t\t}\n\t\t\t\tproposal {\n\t\t\t\t\ttitle\n\t\t\t\t}\n\t\t\t\tvote {\n\t\t\t\t\tphasesBlockHeights {\n\t\t\t\t\t\tcommitStart\n\t\t\t\t\t\tcommitEnd\n\t\t\t\t\t\trevealEnd\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvoteChainId\n\t\t\t}\n\t\t}\n\t}\n']);return Cr=function(){return e},e}var wr=et()(Cr()),kr=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expanded:!1,rowsPerPage:5,page:0,activeFilters:{title:"",status:"",initiatorId:"",pollChainId:"",voterId:""},title:"",status:"",initiatorId:"",pollChainId:"",voterId:""},a.handleFilterChange=function(e){var t=e.target,n=t.name,r="title"===n?t.value:t.value.trim();a.setState(Object(L.a)({},n,r))},a.filterTable=function(){a.handleExpand(),a.setState({activeFilters:{title:a.state.title,status:a.state.status,initiatorId:a.state.initiatorId,pollChainId:a.state.pollChainId,voterId:a.state.voterId},page:0})},a.resetFilters=function(){a.setState({activeFilters:{title:"",status:"",initiatorId:"",pollChainId:"",voterId:""}})},a.toggleExpand=function(){a.setState(function(e){return{expanded:!e.expanded}})},a.handleKeyPress=function(e){13===e.which&&a.filterTable()},a.handleExpand=function(){a.setState({expanded:!0})},a.handlePageChange=function(e){a.setState({page:e})},a.handleRowsPerPageChange=function(e){a.setState({rowsPerPage:e,page:0})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("form",{onKeyPress:this.handleKeyPress,className:t.body},r.a.createElement(Q.a,{className:t.paper},r.a.createElement(Qe.c,{query:wr,variables:{limit:this.state.rowsPerPage,offset:this.state.rowsPerPage*this.state.page,title:this.state.activeFilters.title,status:this.state.activeFilters.status,voteInitiator:this.state.activeFilters.initiatorId,voteChain:this.state.activeFilters.pollChainId,voter:this.state.activeFilters.voterId}},function(a){var n=a.loading,l=a.error,o=a.data;if(n)return r.a.createElement(Or,{message:"Loading..."});if(l)return r.a.createElement(Or,{className:t.errorText,message:"Error: "+l.message});var i=_e()(o,"allProposals.listInfo.totalCount");return r.a.createElement(r.a.Fragment,null,r.a.createElement(fn.a,{container:!0,direction:"row"},r.a.createElement(fn.a,{container:!0,item:!0,xs:3,className:t.topFilters},r.a.createElement(C.a,{onClick:e.filterTable,variant:"outlined",color:"primary",size:"small"},r.a.createElement(xr.a,null)," Advanced Search"),e.state.expanded&&r.a.createElement(r.a.Fragment,null,r.a.createElement(mr.a,{style:{paddingTop:"10px"}},"Voter ID:\xa0",r.a.createElement("input",{type:"text",name:"voterId",value:e.state.voterId,onChange:e.handleFilterChange})))),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(mr.a,{variant:"h5",gutterBottom:!0},"Welcome to Factom On-Chain Voting")),r.a.createElement(fn.a,{item:!0,xs:3})),r.a.createElement(vr,{data:o.allProposals,expanded:e.state.expanded,toggleExpand:e.toggleExpand,rowsPerPage:e.state.rowsPerPage,handleRowsPerPageChange:e.handleRowsPerPageChange,count:i,page:e.state.page,handlePageChange:e.handlePageChange,handleFilterChange:e.handleFilterChange,filterTable:e.filterTable,title:e.state.title,status:e.state.status,initiatorId:e.state.initiatorId,pollChainId:e.state.pollChainId}))})),r.a.createElement("br",null))}}]),t}(n.Component),Or=function(e){return r.a.createElement(fn.a,{container:!0,direction:"row"},r.a.createElement(fn.a,{item:!0,xs:3}),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(mr.a,{variant:"h5",gutterBottom:!0},"Welcome to Factom On-Chain Voting")),r.a.createElement(fn.a,{item:!0,xs:3}),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(mr.a,{className:e.className},e.message)))},Sr=Object(h.withStyles)(function(e){return{body:{textAlign:"center",margin:"0 auto",marginTop:"20px"},form:{textAlign:"left"},paper:{padding:"15px"},topFilters:{},errorText:{color:"red"}}})(kr),Nr=a(586),jr=a.n(Nr),Ar=a(287),Fr=a(587),Tr=a.n(Fr),Ir=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).handleHover=function(){e.setState(function(e){return{isHovered:!e.isHovered}})},e.state={isHovered:!1},e.handleHover=e.handleHover.bind(Object(Ar.a)(e)),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.label,n=e.value,l=e.href,o=e.extend,i=void 0!==o&&o,s=this.state.isHovered||i?t.value:t.value+" "+t.short;return r.a.createElement(fn.a,{container:!0,alignItems:"center",className:t.root},r.a.createElement(fn.a,{item:!0},r.a.createElement(In,{className:t.logo,src:Tr.a,alt:"Factom Protocol Logo"})),r.a.createElement(fn.a,{item:!0},r.a.createElement(y.a,{className:t.label},"\xa0",a,":\xa0")),r.a.createElement(fn.a,{item:!0},r.a.createElement(y.a,{onMouseEnter:this.handleHover,onMouseLeave:this.handleHover,className:s},n)),r.a.createElement(fn.a,{item:!0},r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:l},r.a.createElement(Za.a,{color:"primary",className:t.openInNew}))))}}]),t}(r.a.Component),Pr=Object(h.withStyles)(function(e){return{openInNew:{fontSize:15},root:{color:"black"},value:{overflow:"hidden",textOverflow:"ellipsis"},short:{maxWidth:"200px"},label:{fontWeight:500},logo:{height:20},tooltip:{maxWidth:"none",fontSize:12}}})(Ir),Vr=a(295),Rr=Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"13px"}}})(function(e){var t=e.accept,a=e.autoComplete,n=void 0!==a&&a,l=e.classes,o=e.disabled,i=void 0!==o&&o,s=e.displayError,c=void 0===s||s,u=e.error,m=void 0!==u&&u,d=e.fullWidth,p=void 0!==d&&d,h=e.isNotFast,f=e.label,b=e.maxLength,E=e.multiline,g=e.name,v=e.onChange,y=e.onKeyPress,x=e.shrink,C=void 0!==x&&x,w=e.spellCheck,k=void 0!==w&&w,O=e.step,S=void 0!==O&&O,N=e.type,j=void 0===N?"text":N,A=e.validate,F=e.width,T=h?B.c:B.b;return r.a.createElement(r.a.Fragment,null,r.a.createElement(T,Object.assign({name:g},A?{validate:A}:{}),function(e){var a=e.field;return r.a.createElement(D.a,Object.assign({},a,v?{onChange:v}:{},{error:m,disabled:i,fullWidth:p,label:f,type:j,multiline:E,onKeyPress:y},{inputProps:Object(pe.a)({autoComplete:n?"on":"off",maxLength:b,spellCheck:k},t?{accept:t}:{},S?{step:S}:{}),style:{width:F},InputLabelProps:Object(pe.a)({},C?{shrink:C}:{})}))}),c&&r.a.createElement(B.a,{name:g,render:function(e){return r.a.createElement("div",{className:l.errorText},e)}}))}),Lr=a(594),Br=a.n(Lr),Wr=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.poll,a=e.parentIsSubmitting,n=e.parentArrayHelpers,l=e.parentReset,o=_e()(t,"pollJSON.vote.config.options");return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{selectedOption:"",reinitialize:l},render:function(e){var t=e.values,l=e.handleChange;return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,"Type: ",tt.name)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(ea.a,{component:"fieldset"},r.a.createElement(Yt.a,{"aria-label":"Option",name:"selectedOption",value:_e()(t,"selectedOption"),onChange:function(e){l(e),n.replace(0,e.target.value)}},o.map(function(e,t){return r.a.createElement(Qt.a,{key:t,value:e,control:r.a.createElement(Gt.a,{disabled:a}),label:e})})))))}})}}]),t}(r.a.Component),Mr=p()(Object(h.withStyles)(function(e){return{}}))(Wr),Dr=a(385),Hr=a(588),Kr=a.n(Hr),qr=a(223),Jr=a.n(qr),zr=a(125),Ur=a.n(zr),_r=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.poll,a=e.parentIsSubmitting,n=e.parentArrayHelpers,l=e.parentReset,o=e.parentSetFieldValue,i=e.parentVoteArray,s=_e()(t,"pollJSON.vote.config.options"),c=_e()(t,"pollJSON.vote.config.allowAbstention"),u=_e()(t,"pollJSON.vote.config.minOptions"),m=_e()(t,"pollJSON.vote.config.maxOptions");return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{reinitialize:l,abstainCheckbox:!1},render:function(e){var t=e.values,l=e.handleChange,d=e.setFieldValue;return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,"Type: ",nt.name),r.a.createElement(y.a,null,"Minimum Options Allowed: ",u),r.a.createElement(y.a,null,"Maximum Options Allowed: ",m)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(ea.a,{component:"fieldset"},r.a.createElement(Jr.a,null,s.map(function(e,s){return r.a.createElement(Qt.a,{key:s,control:r.a.createElement(La.a,{name:e+"_checkbox",value:e,checked:!0===_e()(t,e+"_checkbox"),disabled:a||_e()(t,"abstainCheckbox"),onChange:function(e){if(l(e),e.target.checked)n.push(e.target.value);else{var t=Kr()(i,function(t){return t!==e.target.value});o("vote",t)}}}),label:e})})))),c&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ur.a,null),r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{name:"abstainCheckbox",checked:_e()(t,"abstainCheckbox"),disabled:a,onChange:function(e){l(e),e.target.checked&&(s.forEach(function(e){d(e+"_checkbox",!1)}),o("vote",[])),o("abstainCheckbox",e.target.checked)}}),label:"Abstain"})))}})}}]),t}(r.a.Component),Gr=p()(Object(h.withStyles)(function(e){return{}}))(_r),$r=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.poll,a=e.parentIsSubmitting,n=e.parentArrayHelpers,l=e.parentReset,o=e.parentSetFieldValue,i=_e()(t,"pollJSON.vote.config.options"),s=_e()(t,"pollJSON.vote.config.allowAbstention");return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{selectedOption:"",reinitialize:l,abstainCheckbox:!1},render:function(e){var t=e.values,l=e.handleChange,c=e.setFieldValue;return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,"Type: ",at.name)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(ea.a,{component:"fieldset"},r.a.createElement(Yt.a,{"aria-label":"Option",name:"selectedOption",value:_e()(t,"selectedOption"),onChange:function(e){l(e),n.replace(0,e.target.value)}},i.map(function(e,n){return r.a.createElement(Qt.a,{key:n,value:e,control:r.a.createElement(Gt.a,{disabled:a||_e()(t,"abstainCheckbox")}),label:e})})))),s&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ur.a,null),r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{name:"abstainCheckbox",checked:_e()(t,"abstainCheckbox"),disabled:a,onChange:function(e){l(e),c("selectedOption",""),n.remove(0),o("abstainCheckbox",e.target.checked)}}),label:"Abstain"})))}})}}]),t}(r.a.Component),Yr=p()(Object(h.withStyles)(function(e){return{}}))($r),Xr=a(188),Qr="items",Zr="selected",el="vote",tl=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.poll,a=e.parentIsSubmitting,n=e.parentReset,l=e.parentSetFieldValue,o=_e()(t,"pollJSON.vote.config.options"),i=_e()(t,"pollJSON.vote.config.allowAbstention"),s=_e()(t,"pollJSON.vote.config.minOptions"),c=_e()(t,"pollJSON.vote.config.maxOptions"),u=o.map(function(e){return{id:e,content:e}});return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{reinitialize:n,abstainCheckbox:!1,items:u,selected:[]},render:function(e){var t=e.values,n=e.handleChange,o=e.setFieldValue;return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,"Type: ",rt.name),r.a.createElement(y.a,null,"Minimum Options Allowed: ",s),r.a.createElement(y.a,null,"Maximum Options Allowed: ",c)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(ll,{formValues:t,disabled:_e()(t,"abstainCheckbox")||a,irvSetFieldValue:o,parentSetFieldValue:l})),i&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ur.a,null),r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{name:"abstainCheckbox",checked:_e()(t,"abstainCheckbox"),disabled:a,onChange:function(e){n(e),l("abstainCheckbox",e.target.checked),e.target.checked&&(o(Qr,u),o(Zr,[]),l(el,[]))}}),label:"Abstain"})))}})}}]),t}(r.a.Component),al=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),l=Object(se.a)(r,1)[0];return n.splice(a,0,l),n},nl=function(e,t,a,n){var r=Array.from(e),l=Array.from(t),o=r.splice(a.index,1),i=Object(se.a)(o,1)[0];l.splice(n.index,0,i);var s={};return s[a.droppableId]=r,s[n.droppableId]=l,s},rl=function(e,t){return Object(pe.a)({userSelect:"none",padding:16,margin:"0 0 8px 0",overflowWrap:"break-word",background:e?"mediumpurple":"lightgrey"},t)},ll=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).id2List={droppable:"items",droppable2:"selected"},a.getList=function(e){return _e()(a.props.formValues,a.id2List[e])},a.onDragEnd=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l,o;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.source,r=t.destination){e.next=3;break}return e.abrupt("return");case 3:if(n.droppableId!==r.droppableId){e.next=9;break}return l=al(a.getList(n.droppableId),n.index,r.index),e.next=7,a.props.irvSetFieldValue(a.id2List[n.droppableId],l);case 7:e.next=13;break;case 9:return o=nl(a.getList(n.droppableId),a.getList(r.droppableId),n,r),a.props.irvSetFieldValue(Qr,o.droppable),e.next=13,a.props.irvSetFieldValue(Zr,o.droppable2);case 13:a.props.parentSetFieldValue(el,_e()(a.props.formValues,Zr).map(function(e){return e.content}));case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.formValues,a=e.disabled,n=_e()(t,Qr),l=_e()(t,Zr),o=a?{color:"grey"}:{fontWeight:500};return r.a.createElement(Xr.a,{onDragEnd:this.onDragEnd},r.a.createElement(fn.a,{container:!0,spacing:24},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Q.a,{style:{padding:10}},r.a.createElement(y.a,{gutterBottom:!0,style:o},"Available Options"),r.a.createElement(Xr.c,{droppableId:"droppable"},function(e,t){return r.a.createElement("div",{ref:e.innerRef,style:(t.isDraggingOver,{width:250,minHeight:50,paddingBottom:10})},n.map(function(e,t){return r.a.createElement(Xr.b,{key:e.id,draggableId:e.id,index:t,isDragDisabled:a},function(t,a){return r.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps,{style:rl(a.isDragging,t.draggableProps.style)}),e.content)})}),e.placeholder)}))),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Q.a,{style:{padding:10}},r.a.createElement(y.a,{gutterBottom:!0,style:o},"Selected Options"),r.a.createElement(Xr.c,{droppableId:"droppable2"},function(e,t){return r.a.createElement("div",{ref:e.innerRef,style:(t.isDraggingOver,{width:250,minHeight:50,paddingBottom:10})},l.map(function(e,t){return r.a.createElement(Xr.b,{key:e.id,draggableId:e.id,index:t,isDragDisabled:a},function(a,n){return r.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:rl(n.isDragging,a.draggableProps.style)}),t+1+": "+e.content)})}),e.placeholder)})))),r.a.createElement("br",null))}}]),t}(r.a.Component),ol=p()(Object(h.withStyles)(function(e){return{}}))(tl),il=a(592),sl=a.n(il),cl=a(593),ul=a.n(cl),ml=a(297),dl=a.n(ml),pl="pollJSON.proposal.externalRef.href",hl=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleKeyPress",value:function(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}},{key:"render",value:function(){var e,t,a=this,n=this.props,l=n.classes,o=n.poll,i=n.proposalEntries,s=n.voteController,c=s.commitVote,u=s.getPollType,m=n.networkController.networkProps,d=n.ledgerController.signMessageRaw,p=n.factomCliController.blockHeight,h=i.map(function(e){return e.voterId}),f=m.explorerURL+"/entry?hash=",b=ul()("Reveal_"+_e()(o,"pollJSON.proposal.title")+".txt"),E=u(_e()(o,"pollJSON.vote.type"),_e()(o,"pollJSON.vote.config.maxOptions"));return t=E.name===tt.name?Mr:E.name===at.name?Yr:E.name===nt.name?Gr:E.name===rt.name?ol:fl,r.a.createElement(B.f,{initialValues:{vote:[],secret:Object(Dr.randomBytes)(16).toString("hex"),identityChainID:"",identityKey:"",ecPrivateKey:"",processing:!1,transactionError:null,result:null,resetAnswerForm:!1,abstainCheckbox:!1,revealData:"",signatureType:null,ledgerStatus:null},onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(t,n){var r,l,i,s,u,m;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setFieldValue("transactionError",null),n.setFieldValue("processing",!0),r=_e()(t,"signatureType"),i={voteChainId:_e()(o,"pollJSON.voteChainId"),vote:{vote:_e()(t,"vote"),secret:_e()(t,"secret"),hmacAlgo:"sha512"},ecPrivateAddress:_e()(t,"ecPrivateKey")},e.prev=4,"manual"!==r){e.next=10;break}l=_e()(t,"identityChainID"),i.voter={chainId:l,key:_e()(t,"identityKey")},e.next=25;break;case 10:if("ledger"!==r){e.next=25;break}return n.setFieldValue("ledgerStatus","Connecting to Ledger Nano S"),e.next=14,a.props.ledgerController.isLedgerConnected();case 14:if(!e.sent){e.next=19;break}n.setFieldValue("ledgerStatus","Waiting for user to confirm signature on Ledger Nano S device."),e.next=20;break;case 19:throw new Error("Ledger Nano S Not Found. Please connect your Ledger Nano S and try again.");case 20:return e.next=22,a.props.ledgerController.getLedgerIdentityAddress(0);case 22:s=e.sent,l=s.chainid,i.voter={chainId:s.chainid,key:s.address,sign:d};case 25:return e.next=27,c(i);case 27:u=e.sent,n.setFieldValue("result",u),n.setFieldValue("processing",!1),n.setFieldValue("ledgerStatus",""),m={voteChainId:_e()(o,"pollJSON.voteChainId"),vote:{vote:_e()(t,"vote"),secret:_e()(t,"secret"),hmacAlgo:"sha512"},voterId:l},n.setFieldValue("revealData",JSON.stringify(m)),e.next=43;break;case 35:return e.prev=35,e.t0=e.catch(4),console.log(e.t0),e.next=40,n.setFieldValue("resetAnswerForm",!0);case 40:return e.next=42,n.resetForm();case 42:n.setFieldValue("transactionError","Error: "+e.t0.message);case 43:case"end":return e.stop()}},e,null,[[4,35]])}));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:W.object().shape((e={},Object(L.a)(e,"abstainCheckbox",W.boolean()),Object(L.a)(e,"vote",W.array().when("abstainCheckbox",{is:!1,then:W.array().required("Required"),otherwise:W.array().notRequired()})),Object(L.a)(e,"signatureType",W.string()),Object(L.a)(e,"identityChainID",W.string().when("signatureType",{is:"manual",then:W.string().required("Required").matches(mt,{message:"Invalid Chain ID",excludeEmptyString:!0}).test("identityChainID","Not an eligible voter",function(e){return jr()(h,e)}),otherwise:W.string().notRequired()})),Object(L.a)(e,"identityKey",W.string().when("signatureType",{is:"manual",then:W.string().required("Required").test("identityKey","Invalid Identity Key",Vr.app.isValidSecretIdentityKey),otherwise:W.string().notRequired()})),Object(L.a)(e,"ecPrivateKey",W.string().required("Required").test("ecPrivateKey","Invalid Key",ke.isValidPrivateEcAddress)),e)),render:function(e){var n=e.values,i=e.setFieldValue,s=e.isSubmitting,c=e.errors,u=e.submitCount,m=e.touched,d=e.resetForm,h="Sign Transaction";return"ledger"===_e()(n,"signatureType")&&(h+=" with Ledger Nano S"),r.a.createElement(B.e,{onKeyPress:a.handleKeyPress},r.a.createElement(fn.a,{container:!0,className:l.pad},r.a.createElement(fn.a,{item:!0,container:!0,xs:12},r.a.createElement(H,{text:"Question"})),r.a.createElement(fn.a,{item:!0,container:!0,xs:12},_e()(o,"pollJSON.proposal.text")&&r.a.createElement(y.a,null,_e()(o,"pollJSON.proposal.text")),_e()(o,pl)&&r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:2,className:l.smallGridColumn},r.a.createElement(y.a,{gutterBottom:!0},"URL Link:")),r.a.createElement(fn.a,{item:!0,xs:10},r.a.createElement("a",{href:_e()(o,pl),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(y.a,null,_e()(o,pl),"\xa0",r.a.createElement(Za.a,{color:"primary",style:{fontSize:15,position:"relative",top:"1px"}})))),r.a.createElement(fn.a,{item:!0,xs:2,className:l.smallGridColumn},r.a.createElement(y.a,{gutterBottom:!0},"Hash Algorithm:\xa0")),r.a.createElement(fn.a,{item:!0,xs:10},r.a.createElement(y.a,null,_e()(o,"pollJSON.proposal.externalRef.hash.algo"))),r.a.createElement(fn.a,{item:!0,xs:2,className:l.smallGridColumn},r.a.createElement(y.a,{gutterBottom:!0},"Hash Value:\xa0")),r.a.createElement(fn.a,{item:!0,xs:10},r.a.createElement(y.a,null,_e()(o,"pollJSON.proposal.externalRef.hash.value"))))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),_e()(c,"vote")&&u>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{disableGutterBottom:!0,text:"Answer *",color:"red"}),r.a.createElement(y.a,{className:l.errorText},"Required")):r.a.createElement(H,{text:"Answer"})),r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(B.d,{name:"vote",render:function(e){return r.a.createElement(t,{poll:o,parentArrayHelpers:e,parentIsSubmitting:s,parentReset:_e()(n,"resetAnswerForm"),parentSetFieldValue:i,parentVoteArray:_e()(n,"vote")})}}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(fn.a,{item:!0,xs:12},_e()(c,"signatureType")&&u>0?r.a.createElement(H,{disableGutterBottom:!0,text:h+" *",color:"red"}):r.a.createElement(H,{disableGutterBottom:!0,text:h})),xe()(_e()(n,"signatureType"))&&r.a.createElement(fn.a,{xs:12,item:!0},r.a.createElement(C.a,{onClick:function(){i("transactionError",null),i("signatureType","manual")},variant:"outlined",size:"small",disabled:s},r.a.createElement(dl.a,{style:{height:17},titleAccess:"Manual Entry"}),"\xa0Manual Entry"),"\xa0",r.a.createElement(C.a,{onClick:function(){i("transactionError",null),i("signatureType","ledger")},variant:"outlined",size:"small",disabled:s},"\xa0",r.a.createElement(In,{className:l.ledgerLogo,src:En.a,alt:"Ledger Logo"}),"\xa0\xa0\xa0Ledger Nano S")),"manual"===_e()(n,"signatureType")&&r.a.createElement(fn.a,{xs:12,item:!0,container:!0},r.a.createElement(fn.a,{xs:9,item:!0},r.a.createElement(Rr,{name:"identityChainID",label:"Voter Identity Chain ID *",error:_e()(c,"identityChainID")&&_e()(m,"identityChainID"),disabled:s,fullWidth:!0})),r.a.createElement(fn.a,{xs:3,item:!0}),r.a.createElement(fn.a,{xs:9,item:!0},r.a.createElement(Rr,{name:"identityKey",label:"Voter Identity Private Key *",error:_e()(c,"identityKey")&&_e()(m,"identityKey"),disabled:s,fullWidth:!0})),r.a.createElement(fn.a,{xs:3,item:!0})),_e()(n,"signatureType")&&r.a.createElement(fn.a,{item:!0,xs:12,container:!0},r.a.createElement(fn.a,{xs:9,item:!0},r.a.createElement(Rr,{name:"ecPrivateKey",label:"EC Private Key *",error:_e()(c,"ecPrivateKey")&&_e()(m,"ecPrivateKey"),disabled:s,fullWidth:!0})),r.a.createElement(fn.a,{xs:3,item:!0})),!xe()(_e()(n,"transactionError"))&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:l.transactionErrorText},_e()(n,"transactionError"))),_e()(n,"result")&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(Q.a,{className:l.transaction},r.a.createElement(H,{text:"Success!",color:"green"}),r.a.createElement(y.a,{gutterBottom:!0},"Your vote is pending confirmation. The entry will be visible in 10-15 minutes, after being included in block"," "+(p+1),", currently being processed by the Factom blockchain."),r.a.createElement("br",null),r.a.createElement(Pr,{label:"Vote Commit",value:_e()(n,"result").entryHash,href:f+_e()(n,"result").entryHash}),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement(C.a,{variant:"contained",color:"secondary",onClick:function(){sl()(_e()(n,"revealData"),b)}},r.a.createElement(Br.a,null),"\xa0 Download Reveal File")))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(C.a,{type:"submit",variant:"contained",color:"primary",disabled:s},"ledger"===_e()(n,"signatureType")?"Sign and Submit":"Submit",_e()(n,"processing")&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0",r.a.createElement(Wa.a,{thickness:5,size:20}))),s&&_e()(n,"ledgerStatus")&&r.a.createElement(y.a,{className:l.ledgerStatus},_e()(n,"ledgerStatus")),s&&_e()(n,"result")&&r.a.createElement(C.a,{variant:"outlined",className:l.resetButton,onClick:Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i("resetAnswerForm",!0);case 2:return e.next=4,d();case 4:case"end":return e.stop()}},e)}))},"Reset"))))}})}}]),t}(r.a.Component),fl=function(e){return r.a.createElement("div",null,r.a.createElement(y.a,{style:{color:"red"}},"Invalid Vote Configuration"))},bl=p()(G.b,Y,$e,Ea.b,Object(h.withStyles)(function(e){return{pad:{padding:"15px"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",padding:10},transactionErrorText:{color:"red",fontSize:"16px"},errorText:{color:"red",fontSize:"13px"},ledgerStatus:{display:"inline-block",paddingLeft:"10px"},resetButton:{marginLeft:2},ledgerLogo:{height:16}}}))(hl),El="revealJSON",gl="fileUploadError",vl="voteChainId",yl=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleFile=function(){var e=Object(de.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.reader.readAsText(t);case 2:a.reader.onloadend=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l,o;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.reader.result,r=JSON.parse(n),l=_e()(r,vl),o=_e()(a.props.poll,vl),l!==o){e.next=9;break}a.setFieldValue(El,r),a.setFieldValue(gl,null),e.next=12;break;case 9:return e.next=11,a.resetForm();case 11:a.setFieldValue(gl,"Invalid Poll Chain ID");case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.reader=new FileReader,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleKeyPress",value:function(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.networkController.networkProps,l=t.factomCliController.blockHeight,o=n.explorerURL+"/entry?hash=";return r.a.createElement(B.f,{initialValues:{ecPrivateKey:"",workingFile:"",workingFileName:"",processing:!1,transactionError:null,revealJSON:null,result:null},onSubmit:function(){var t=Object(de.a)(me.a.mark(function t(a,n){var r,l;return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n.setFieldValue("transactionError",null),n.setFieldValue("processing",!0),t.prev=2,(r=_e()(a,El)).ecPrivateAddress=_e()(a,"ecPrivateKey"),t.next=7,e.props.voteController.revealVote(r);case 7:l=t.sent,console.log(l),n.setFieldValue("result",l),n.setFieldValue("processing",!1),t.next=19;break;case 13:return t.prev=13,t.t0=t.catch(2),console.log(t.t0),t.next=18,n.resetForm();case 18:n.setFieldValue("transactionError","Error: "+t.t0.message);case 19:case"end":return t.stop()}},t,null,[[2,13]])}));return function(e,a){return t.apply(this,arguments)}}(),validationSchema:W.object().shape(Object(L.a)({},"ecPrivateKey",W.string().required("Required").test("ecPrivateKey","Invalid Key",ke.isValidPrivateEcAddress))),render:function(t){var n=t.values,i=t.isSubmitting,s=t.handleChange,c=t.setFieldValue,u=t.errors,m=t.touched,d=t.resetForm;return e.setFieldValue=c,e.resetForm=d,r.a.createElement(B.e,{onKeyPress:e.handleKeyPress},r.a.createElement(fn.a,{container:!0,className:a.pad},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{text:"Reveal Vote"})),r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement(Rr,{name:"workingFileName",isNotFast:!0,type:"file",accept:".txt",onChange:function(){var t=Object(de.a)(me.a.mark(function t(a){return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:s(a),c("workingFile",a.target.files[0]),e.handleFile(a.target.files[0]);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}),!xe()(_e()(n,gl))&&r.a.createElement(y.a,{className:a.transactionErrorText},_e()(n,gl))),r.a.createElement(fn.a,{item:!0,xs:3}),r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement(Rr,{name:"ecPrivateKey",label:"EC Private Key *",error:_e()(u,"ecPrivateKey")&&_e()(m,"ecPrivateKey"),disabled:i,fullWidth:!0})),r.a.createElement(fn.a,{item:!0,xs:3}),!xe()(_e()(n,"transactionError"))&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:a.transactionErrorText},_e()(n,"transactionError"))),_e()(n,"result")&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(Q.a,{className:a.transaction},r.a.createElement(H,{text:"Success!",color:"green"}),r.a.createElement(y.a,{gutterBottom:!0},"Your vote is pending confirmation. The entry will be visible in 10-15 minutes, after being included in block"," "+(l+1),", currently being processed by the Factom blockchain."),r.a.createElement("br",null),r.a.createElement(Pr,{label:"Vote Reveal",value:_e()(n,"result").entryHash,href:o+_e()(n,"result").entryHash}))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(C.a,{type:"submit",variant:"contained",color:"primary",disabled:i||!_e()(n,"workingFileName")},"Reveal Vote",_e()(n,"processing")&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0",r.a.createElement(Wa.a,{thickness:5,size:20}))),i&&_e()(n,"result")&&r.a.createElement(C.a,{variant:"outlined",className:a.resetButton,onClick:function(){d()}},"Reset"))))}})}}]),t}(r.a.Component),xl=p()(G.b,Y,$e,Object(h.withStyles)(function(e){return{pad:{padding:"15px"},transactionErrorText:{color:"red",fontSize:"16px"},resetButton:{marginLeft:2},transaction:{borderColor:"#6fbf73",borderStyle:"solid",padding:10}}}))(yl),Cl=a(595),wl=a.n(Cl),kl=a(101),Ol=a.n(kl),Sl=a(185),Nl=a.n(Sl),jl=a(184),Al=a.n(jl),Fl=a(596),Tl=a.n(Fl),Il=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.eligibleVoters,n=e.arrayHelpers,l=e.errorMessage;return r.a.createElement(Q.a,{elevation:2,className:t.listContainer},r.a.createElement(y.a,{variant:"subtitle1"},"Eligible Voter List"),l,r.a.createElement(Wt.a,{className:t.list,dense:!0},a.length>0?a.map(function(e,t){return r.a.createElement(Dt.a,{key:t,disableGutters:!0,divider:!0},r.a.createElement(Tl.a,null),r.a.createElement(Ol.a,{primary:"Voter ID: "+e.voterId,secondary:e.weight&&"Weight: "+e.weight}),n&&r.a.createElement(k.a,{onClick:function(){n.remove(t)},"aria-label":"Clear"},r.a.createElement(Al.a,null)))}):r.a.createElement(Dt.a,{disableGutters:!0,divider:!0},r.a.createElement(Ol.a,{primary:"No Voters have been added"}))))}}]),t}(r.a.Component),Pl=Object(h.withStyles)(function(e){return{list:{overflow:"auto",maxHeight:350},listContainer:{marginTop:"10px",padding:"15px"}}})(Il),Vl="pollJSON.vote.phasesBlockHeights.commitEnd",Rl="pollJSON.vote.phasesBlockHeights.revealEnd",Ll="pollJSON.vote.config.winnerCriteria.minSupport",Bl="pollJSON.vote.config.acceptanceCriteria.minTurnout.weighted",Wl="pollJSON.vote.config.acceptanceCriteria.minTurnout.unweighted",Ml=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).calculateWriteTimeDisplay=function(e){var t=a.props.factomCliController.getEstimatedBlockTimestamp(e);return De(t).utc().format("MMM DD YYYY, h:mm A")},a.supportsMinSupportCriteria=function(e){var t=!0;return e===rt.type&&(t=!1),t},a.supportsWeightedMinTurnoutCriteria=function(e){var t=!0;return e===rt.type&&(t=!1),t},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,a,n=this.props,l=n.classes,o=n.eligibleVoters,i=n.poll,s=n.factomCliController.blockHeight,c=n.networkController.networkProps,u=(0,n.voteController.getPollType)(_e()(i,"pollJSON.vote.type"),_e()(i,"pollJSON.vote.config.maxOptions")),m=u.name,d=this.supportsMinSupportCriteria(u.type);d&&(e=Object.keys(_e()(i,Ll))[0],t=Ll+"."+e+".weighted",a=Ll+"."+e+".unweighted");var p=!xe()(_e()(i,"pollJSON.vote.config.acceptanceCriteria.minTurnout")),h=this.supportsWeightedMinTurnoutCriteria(u.type),f=null,b=null,E=null,g=null;return s&&(f=this.calculateWriteTimeDisplay(_e()(i,"pollJSON.vote.phasesBlockHeights.commitStart")),b=this.calculateWriteTimeDisplay(_e()(i,Vl)),E=this.calculateWriteTimeDisplay(_e()(i,Vl)+1),g=this.calculateWriteTimeDisplay(_e()(i,Rl))),r.a.createElement(fn.a,{item:!0,xs:12,container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{text:"Poll Configuration"})),_e()(i,"pollJSON.voteChainId")&&r.a.createElement(fn.a,{item:!0,xs:12,container:!0},r.a.createElement(Pr,{label:"Poll Chain ID",value:_e()(i,"pollJSON.voteChainId"),href:c.explorerURL+"/data?type=chain&key="+_e()(i,"pollJSON.voteChainId")})),_e()(i,"pollJSON.admin.voteInitiator")&&r.a.createElement(fn.a,{item:!0,xs:12,container:!0},r.a.createElement(Pr,{label:"Poll Initiator",value:_e()(i,"pollJSON.admin.voteInitiator"),href:c.explorerURL+"/data?type=chain&key="+_e()(i,"pollJSON.admin.voteInitiator")}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(fn.a,{item:!0,container:!0,xs:5},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Title: ",_e()(i,"pollJSON.proposal.title"))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Type: ",m)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Allow Abstain:\xa0",_e()(i,"pollJSON.vote.config.allowAbstention")?"True":"False")),r.a.createElement(fn.a,{item:!0,xs:12},d&&r.a.createElement(y.a,{gutterBottom:!0},"Compute Results Against:\xa0",_e()(i,"pollJSON.vote.config.computeResultsAgainst")===it?ot:st))),r.a.createElement(fn.a,{item:!0,container:!0,xs:3},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Commit Start:\xa0",_e()(i,"pollJSON.vote.phasesBlockHeights.commitStart"))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Commit End:\xa0\xa0\xa0",_e()(i,Vl))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Reveal Start:\xa0\xa0\xa0\xa0",_e()(i,Vl)+1)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Reveal End:\xa0\xa0\xa0\xa0\xa0\xa0",_e()(i,Rl)))),r.a.createElement(fn.a,{item:!0,container:!0,xs:4},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,f," UTC")),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,b," UTC")),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,E," UTC")),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,null,g," UTC"))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(H,{text:"Question"})),_e()(i,"pollJSON.proposal.externalRef.href")&&r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:3,className:l.smallGridColumn},r.a.createElement(y.a,{gutterBottom:!0},"URL Link:")),r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement("a",{href:_e()(i,"pollJSON.proposal.externalRef.href"),target:"_blank",rel:"noopener noreferrer"},r.a.createElement(y.a,null,_e()(i,"pollJSON.proposal.externalRef.href"),"\xa0",r.a.createElement(Za.a,{color:"primary",style:{fontSize:15,position:"relative",top:"1px"}})))),r.a.createElement(fn.a,{item:!0,xs:3,className:l.smallGridColumn},r.a.createElement(y.a,{gutterBottom:!0},"Hash Algorithm:\xa0")),r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement(y.a,null,_e()(i,"pollJSON.proposal.externalRef.hash.algo"))),r.a.createElement(fn.a,{item:!0,xs:3,className:l.smallGridColumn},r.a.createElement(y.a,{gutterBottom:!0},"Hash Value:\xa0")),r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement(y.a,null,_e()(i,"pollJSON.proposal.externalRef.hash.value")))),_e()(i,"pollJSON.proposal.text")&&r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Question: ",_e()(i,"pollJSON.proposal.text"))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(H,{text:"Answers"})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Q.a,{elevation:1,className:l.pad},r.a.createElement(y.a,{variant:"subtitle1"},"Options"),r.a.createElement(fn.a,{container:!0,spacing:24},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Wt.a,{dense:!0},_e()(i,"pollJSON.vote.config.options")&&_e()(i,"pollJSON.vote.config.options").map(function(e,t){return r.a.createElement(Dt.a,{key:t,divider:t<_e()(i,"pollJSON.vote.config.options").length-1},r.a.createElement(Nl.a,{style:{fontSize:15}}),r.a.createElement(Ol.a,{primary:e,className:l.option}))}))),r.a.createElement(fn.a,{item:!0,xs:6},(u.name===nt.name||u.name===rt.name)&&r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Minimum Options Allowed:\xa0\xa0",_e()(i,"pollJSON.vote.config.minOptions"))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{gutterBottom:!0},"Maximum Options Allowed:\xa0",_e()(i,"pollJSON.vote.config.maxOptions")))))))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(H,{text:"Winner Criteria"}),d?r.a.createElement(Wt.a,{dense:!0},r.a.createElement(Dt.a,null,r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(Qt.a,{className:l.defaultCursor,control:r.a.createElement(La.a,{disableRipple:!0,color:"default",checked:!0,className:l.defaultCursor}),label:"Minimum Support"})),r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(fn.a,{container:!0},!xe()(_e()(i,t))&&r.a.createElement(fn.a,{item:!0,xs:12},!_e()(i,a)&&r.a.createElement("br",null),r.a.createElement(y.a,{style:{display:"inline"}},"Weighted Ratio:\xa0",_e()(i,t))),!xe()(_e()(i,a))&&r.a.createElement(fn.a,{item:!0,xs:12},!_e()(i,t)&&r.a.createElement("br",null),r.a.createElement(y.a,{style:{display:"inline"}},"Unweighted Ratio:\xa0",_e()(i,a))))),r.a.createElement(fn.a,{item:!0,xs:4},u.name===tt.name?r.a.createElement(y.a,null,"Applies to option: ",e):r.a.createElement(y.a,null,"Applies to all options"))))):r.a.createElement("div",null,r.a.createElement(y.a,null,"Not Applicable"),r.a.createElement("br",null))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(H,{text:"Acceptance Criteria"}),p?r.a.createElement(Wt.a,{dense:!0},r.a.createElement(Dt.a,null,r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(Qt.a,{className:l.defaultCursor,control:r.a.createElement(La.a,{disableRipple:!0,color:"default",checked:p,className:l.defaultCursor}),label:"Minimum Turnout"})),r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(fn.a,{container:!0},h&&!xe()(_e()(i,Bl))&&r.a.createElement(fn.a,{item:!0,xs:12},!_e()(i,Wl)&&r.a.createElement("br",null),r.a.createElement(y.a,{style:{display:"inline"}},"Weighted Ratio:\xa0",_e()(i,Bl))),!xe()(_e()(i,Wl))&&r.a.createElement(fn.a,{item:!0,xs:12},!_e()(i,Bl)&&r.a.createElement("br",null),r.a.createElement(y.a,{style:{display:"inline"}},"Unweighted Ratio:\xa0",_e()(i,Wl))))),r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(y.a,null,"Applies to all options"))))):r.a.createElement("div",null,r.a.createElement(y.a,null,"None"),r.a.createElement("br",null))),o&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Pl,{eligibleVoters:o})))}}]),t}(r.a.Component),Dl=p()(G.b,Y,$e,Object(h.withStyles)(function(e){return{pad:{padding:15},smallGridColumn:{flexBasis:"19%"},option:{overflowWrap:"break-word"},defaultCursor:{cursor:"default"}}}))(Ml),Hl=a(389),Kl=a.n(Hl),ql=a(390),Jl=a.n(ql),zl=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={expand:!1},a.toggleExpand=function(){a.setState(function(e){return{expand:!e.expand}})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.eligibleVotersChainId,l=t.proposalEntries,o=t.status_o,i=t.networkController.networkProps,s=i.explorerURL+"/entry?hash=",c=[];return l.forEach(function(e){var t,a,n,r,l=(t=e.voterId,a=e.commit,n=e.reveal,r=e.weight,{voterID:t,commit:a,reveal:n,weight:r});c.push(l)}),r.a.createElement("div",{className:a.tableWrapper},r.a.createElement(fn.a,{item:!0,xs:12,container:!0,className:a.voterChain},r.a.createElement(Pr,{label:"Eligible Voters Chain",value:n,href:i.explorerURL+"/data?type=chain&key="+n})),r.a.createElement(va.a,null,r.a.createElement(Oa.a,null,r.a.createElement(Na.a,null,r.a.createElement("th",{className:a.expandColumn},this.state.expand?r.a.createElement(fr.a,{style:{cursor:"pointer"},onClick:this.toggleExpand,titleAccess:"Collapse Table"}):r.a.createElement(P.a,{style:{cursor:"pointer"},onClick:this.toggleExpand,titleAccess:"Expand Table"})),this.state.expand?r.a.createElement(wa.a,null,"Voter ID"):r.a.createElement(wa.a,{className:a.chainIDColumn},"Voter ID"),r.a.createElement(wa.a,null,"Commit"),r.a.createElement(wa.a,null,"Reveal"),r.a.createElement(wa.a,null,"Weight"))),r.a.createElement(xa.a,null,Ee()(c)&&r.a.createElement(Na.a,null,r.a.createElement("td",{className:a.expandColumn}),r.a.createElement(wa.a,null,r.a.createElement(y.a,null,"No Eligible Voters")),r.a.createElement(wa.a,null),r.a.createElement(wa.a,null),r.a.createElement(wa.a,null)),c.map(function(t){return r.a.createElement(Na.a,{key:t.voterID},r.a.createElement("td",{className:a.expandColumn}),e.state.expand?r.a.createElement(wa.a,null,t.voterID):r.a.createElement(wa.a,{className:a.chainIDColumn},t.voterID),r.a.createElement(wa.a,{style:{minWidth:131}},!xe()(t.commit)&&r.a.createElement(fn.a,{container:!0,alignItems:"flex-end"},r.a.createElement(Kl.a,{style:{color:"green",display:"inline-block"},fontSize:"large"}),r.a.createElement("a",{style:{display:"inline-block"},target:"_blank",rel:"noopener noreferrer",href:s+t.commit},r.a.createElement(Za.a,{color:"primary",className:a.openInNew}))),xe()(t.commit)&&(o.value===dt.reveal.value||o.value===dt.complete.value)&&r.a.createElement(Jl.a,{color:"secondary"})),r.a.createElement(wa.a,{style:{minWidth:131}},!xe()(t.reveal)&&r.a.createElement(fn.a,{container:!0,alignItems:"flex-end"},r.a.createElement(Kl.a,{style:{color:"green",display:"inline-block"},fontSize:"large"}),r.a.createElement("a",{style:{display:"inline-block"},target:"_blank",rel:"noopener noreferrer",href:s+t.reveal},r.a.createElement(Za.a,{color:"primary",className:a.openInNew}))),xe()(t.reveal)&&o.value===dt.complete.value&&r.a.createElement(Jl.a,{color:"secondary"})),r.a.createElement(wa.a,null,t.weight))}))))}}]),t}(r.a.Component),Ul=p()(G.b,Object(h.withStyles)(function(e){return{tableWrapper:{overflowX:"auto"},expandColumn:{maxWidth:"3px"},chainIDColumn:{maxWidth:"265px",overflow:"hidden",textOverflow:"ellipsis"},errorText:{color:"red"},voterChain:{paddingTop:"20px",paddingLeft:"5px"},openInNew:{fontSize:15}}}))(zl),_l=a(286),Gl=a.n(_l),$l=Object(h.withStyles)(function(e){return{}})(function(e){var t=e.result;return r.a.createElement(mn.a,null,r.a.createElement(pn.a,{expandIcon:r.a.createElement(P.a,null)},r.a.createElement(y.a,{style:{fontWeight:500}},"Result")),r.a.createElement(Gl.a,null,r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12}),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("pre",null,JSON.stringify(t,null,2))))))}),Yl=a(597);function Xl(){var e=Object(ze.a)(["\n\tquery Voters($chain: String!) {\n\t\tproposalEntries(chain: $chain) {\n\t\t\tvoterId\n\t\t\tcommit\n\t\t\treveal\n\t\t\tweight\n\t\t\t# entryHash\n\t\t}\n\t}\n"]);return Xl=function(){return e},e}function Ql(){var e=Object(ze.a)(["\n\tquery Result($voteChain: String!) {\n\t\tresult(voteChain: $voteChain) {\n\t\t\tabstain\n\t\t\tchainId\n\t\t\tinvalidReason\n\t\t\toptions\n\t\t\tsupport\n\t\t\ttotal\n\t\t\tturnout\n\t\t\tvalid\n\t\t\tvoted\n\t\t\tweightedWinners\n\t\t}\n\t}\n"]);return Ql=function(){return e},e}function Zl(){var e=Object(ze.a)(["\n\tquery Vote($chain: String!) {\n\t\tproposal(chain: $chain) {\n\t\t\tvoteChainId\n\n\t\t\tadmin {\n\t\t\t\tvoteInitiator\n\t\t\t\tprotocolVersion\n\t\t\t}\n\n\t\t\tproposal {\n\t\t\t\ttitle\n\t\t\t\ttext\n\t\t\t\texternalRef\n\t\t\t}\n\n\t\t\tvote {\n\t\t\t\tphasesBlockHeights {\n\t\t\t\t\tcommitStart\n\t\t\t\t\tcommitEnd\n\t\t\t\t\trevealEnd\n\t\t\t\t}\n\t\t\t\teligibleVotersChainId\n\t\t\t\ttype\n\t\t\t\tconfig {\n\t\t\t\t\toptions\n\t\t\t\t\tallowAbstention\n\t\t\t\t\tcomputeResultsAgainst\n\t\t\t\t\tminOptions\n\t\t\t\t\tmaxOptions\n\t\t\t\t\twinnerCriteria\n\t\t\t\t\tacceptanceCriteria\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n"]);return Zl=function(){return e},e}var eo=et()(Zl()),to=et()(Ql()),ao=et()(Xl()),no=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tabValue:0,pollChainId:null},a.handleTabChange=function(e,t){a.setState({tabValue:t})},a.componentDidMount=function(){var e=wl.a.parse(a.props.location.search,{ignoreQueryPrefix:!0});a.setState({pollChainId:e.id});var t=e.network;t!==a.props.networkController.networkProps.network&&a.props.walletController.handleNetworkChange(t)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.voteController,l=n.getPollStatus,o=n.getPhaseEndBlock,i=t.factomCliController.getEstimatedBlockTimestamp,s=this.state.pollChainId;return r.a.createElement(fn.a,{container:!0,spacing:24},r.a.createElement(fn.a,{item:!0,xs:2}),r.a.createElement(fn.a,{item:!0,xs:8},r.a.createElement(Q.a,{className:a.pad},s&&r.a.createElement(Qe.c,{query:eo,variables:{chain:s}},function(t){var n=t.loading,s=t.error,c=t.data;if(n)return r.a.createElement(ro,{message:"Loading..."});if(s)return r.a.createElement(ro,{className:a.errorText,message:"Error: "+s.message});var u=c.proposal,m=u.vote.phasesBlockHeights,d=l(m),p=o(m),h=i(p+1);return r.a.createElement(Qe.c,{query:ao,variables:{chain:u.voteChainId}},function(t){var n=t.loading,l=t.error,o=t.data;if(n)return r.a.createElement(ro,{message:"Loading..."});if(l)return r.a.createElement(ro,{className:a.errorText,message:"Error: "+l.message});var i=o.proposalEntries;return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{align:"center",gutterBottom:!0,variant:"h6"},u.proposal.title)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Q.a,{className:a.pad},"complete"===d.value?r.a.createElement(H,{text:"Poll Complete",color:"green",disableGutterBottom:!0}):r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{style:{display:"inline",fontWeight:500},gutterBottom:!0},"Status:\xa0"),r.a.createElement(y.a,{style:{display:"inline"}},d.displayValue),r.a.createElement(Yl.a,{date:h,renderer:lo})),"complete"===d.value&&r.a.createElement(Qe.c,{query:to,variables:{voteChain:u.voteChainId}},function(e){var t=e.loading,n=e.error,l=e.data;return t?r.a.createElement(y.a,null,"Loading result..."):n?r.a.createElement(y.a,{className:a.errorText},"Error loading result:"," ",n.message):r.a.createElement($l,{result:l.result})})),r.a.createElement("br",null)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Q.a,{className:a.pad},r.a.createElement(kn.a,{value:e.state.tabValue,onChange:e.handleTabChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Sn.a,{label:"Poll Configuration"}),r.a.createElement(Sn.a,{label:"View Voters"}),"commit"===d.value&&r.a.createElement(Sn.a,{label:"Commit Vote"}),"reveal"===d.value&&r.a.createElement(Sn.a,{label:"Reveal Vote"})),0===e.state.tabValue&&r.a.createElement(fn.a,{container:!0,className:a.pad},r.a.createElement(Dl,{poll:{pollJSON:u}})),1===e.state.tabValue&&r.a.createElement(Ul,{eligibleVotersChainId:u.vote.eligibleVotersChainId,proposalEntries:i,status_o:d}),2===e.state.tabValue&&"commit"===d.value&&r.a.createElement(bl,{poll:{pollJSON:u},proposalEntries:i}),2===e.state.tabValue&&"reveal"===d.value&&r.a.createElement(xl,{poll:u}))))})}))),r.a.createElement(fn.a,{item:!0,xs:2}))}}]),t}(r.a.Component),ro=function(e){return r.a.createElement(fn.a,{container:!0,justify:"center"},r.a.createElement(y.a,{className:e.className},e.message))},lo=function(e){var t=e.days,a=e.hours,n=e.minutes,l=e.seconds,o=e.completed;return r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(y.a,{style:{display:"inline",fontWeight:500},gutterBottom:!0},"Remaining Time:"," "),r.a.createElement(y.a,{style:{display:"inline"}},o?"The final block in this phase is almost complete.":r.a.createElement("span",null,t," days, ",a," hours, ",n," minutes, ",l," seconds")))},oo=p()(G.b,Y,_.b,$e,Object(h.withStyles)(function(e){return{pad:{padding:15},smallGridColumn:{flexBasis:"19%"},errorText:{color:"red"}}}))(no),io=a(103),so=a.n(io);function co(){var e=Object(ze.a)(["\n\tquery Voters($chain: String!) {\n\t\teligibleVoters(chain: $chain) {\n\t\t\tvoters {\n\t\t\t\tvoterId\n\t\t\t\tweight\n\t\t\t}\n\t\t}\n\t}\n"]);return co=function(){return e},e}var uo=et()(co()),mo="formFields.selectedList",po="formFields.workingIdentityChainId",ho="formFields.workingWeight",fo="formFields.workingEligibleChainId",bo="formFields.loadErrorMessage",Eo="formFields.loadSuccessMessage",go="formFields.workingFileName",vo="formFields.workingFile";function yo(e,t){return{voterId:e,weight:t}}var xo=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).isValidVoter=function(e){var t=_e()(e,"weight");if(!so()(t)||!(t>0))return!1;var a=_e()(e,"voterId");return!!mt.test(a)},a.handleFile=function(e){a.reader.readAsText(e),a.reader.onloadend=function(e){for(var t=a.reader.result.trim().split("\n"),n=[],r=!1,l=1;l<t.length;l++){var o=t[l].trim().split(","),i=yo(o[0],parseInt(o[1]));a.isValidVoter(i)?n.push(i):r=!0}r||Ee()(n)?a.setFieldValue(bo,"* Invalid CSV data"):(n.forEach(function(e){a.handleVoter(e)}),a.setFieldValue(Eo,n.length+" voters loaded"),a.setFieldValue(vo,""),a.setFieldValue(go,""))}},a.handleVoterChainId=function(){var e=Object(de.a)(me.a.mark(function e(t){var n,r,l;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.apolloClient.query({query:uo,variables:{chain:t}});case 3:n=e.sent,r=n.data.eligibleVoters,l=_e()(r,"voters"),Ee()(l)?a.setFieldValue(bo,"* No voters found"):(l.forEach(function(e){var t=e.voterId,n=e.weight;a.handleVoter(yo(t,n))}),a.setFieldValue(Eo,l.length+" voters loaded"),a.setFieldValue(fo,"")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a.setFieldValue(bo,"* An Error has occured");case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),a.handleVoter=function(e){if(a.isValidVoter(e)){var t=a.findVoter(e.voterId);-1!==t?a.arrayHelpers.replace(t,e):a.arrayHelpers.push(e)}},a.findVoter=function(e){return a.currentEligibleVoters.findIndex(function(t){return t.voterId===e})},a.resetAddVoterFields=function(){a.setFieldValue(po,""),a.setFieldValue(ho,"")},a.reader=new FileReader,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"handleKeyPress",value:function(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,a=t.eligibleVotersForm,n=t.classes,l=t.updateParticipants;return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:a,onSubmit:function(t,a){l(t),e.props.handleNext()},validationSchema:W.object().shape({eligibleVoters:W.array().required("* Add at least one voter"),formFields:W.object().shape({workingWeight:W.number().transform(function(e,t){return""===t?void 0:e}).moreThan(0,"Must be a positive number"),workingIdentityChainId:W.string().matches(mt,{message:"Invalid Chain ID",excludeEmptyString:!0}),workingEligibleChainId:W.string().matches(mt,{message:"Invalid Chain ID",excludeEmptyString:!0})})}),render:function(t){var a=t.values,l=t.handleChange,o=t.setFieldValue,i=t.isSubmitting,s=t.errors,c=t.submitCount,u=t.touched;return e.setFieldValue=o,e.currentEligibleVoters=_e()(a,"eligibleVoters"),e.workingAddVoter_o=yo(_e()(a,po),_e()(a,ho)),r.a.createElement(B.e,{onKeyPress:e.handleKeyPress},r.a.createElement(Qe.a,null,function(t){return e.apolloClient=t,r.a.createElement(B.d,{name:"eligibleVoters",render:function(t){return e.arrayHelpers=t,r.a.createElement(fn.a,{container:!0,className:n.pad},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{text:"Select Voters"})),r.a.createElement(fn.a,{item:!0,container:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12,container:!0},r.a.createElement(fn.a,{item:!0,xs:3},r.a.createElement(ea.a,{component:"fieldset"},r.a.createElement(Yt.a,{name:mo,value:_e()(a,mo),onChange:l},r.a.createElement(Qt.a,{value:"custom",control:r.a.createElement(Gt.a,null),label:"Custom List"}),r.a.createElement(Qt.a,{value:"standing",control:r.a.createElement(Gt.a,null),label:"Standing Parties",disabled:!0})))),"custom"===_e()(a,mo)?r.a.createElement(fn.a,{item:!0,xs:4,className:n.borders},r.a.createElement(y.a,{style:{fontWeight:500},gutterBottom:!0},"Add Voter"),r.a.createElement(Rr,{label:"Identity Chain ID",name:po,error:_e()(s,po)&&_e()(u,po),type:"text",isNotFast:!0,onKeyPress:function(t){13===t.which&&e.isValidVoter(e.workingAddVoter_o)&&(e.handleVoter(e.workingAddVoter_o),e.resetAddVoterFields())}}),r.a.createElement(Rr,{label:"Weight",name:ho,type:"number",error:_e()(s,ho)&&_e()(u,ho),isNotFast:!0,onKeyPress:function(t){13===t.which&&e.isValidVoter(e.workingAddVoter_o)&&(e.handleVoter(e.workingAddVoter_o),e.resetAddVoterFields())}}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,{variant:"contained",component:"span",onClick:function(){e.handleVoter(e.workingAddVoter_o),e.resetAddVoterFields()},disabled:!e.isValidVoter(e.workingAddVoter_o)},_e()(a,po)&&-1!==e.findVoter(e.workingAddVoter_o.voterId)?"Replace":"Add")):r.a.createElement(fn.a,{item:!0,xs:4}),"custom"===_e()(a,mo)?r.a.createElement(fn.a,{item:!0,xs:5,container:!0,className:n.padLoadVoters},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(y.a,{style:{fontWeight:500},gutterBottom:!0},"Load Voters")),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Rr,{name:go,isNotFast:!0,type:"file",accept:".csv",onChange:function(e){l(e),o(fo,""),o(vo,e.target.files[0])}}),r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/spreadsheets/d/1vK0277pI7BlGKGRFf93C5wwBb1O0K1KuFH8XkeB9IFI/edit?usp=sharing"},r.a.createElement(y.a,{style:{fontSize:12}},"Template",r.a.createElement(Za.a,{color:"primary",style:{fontSize:13,verticalAlign:"text-top"}})))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Rr,{label:"Eligible Voters Chain ID",name:fo,type:"text",fullWidth:!0,onChange:function(e){l(e),o(vo,""),o(go,"")},error:_e()(s,fo)&&_e()(u,fo)}),r.a.createElement("br",null),r.a.createElement("br",null)),r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(C.a,{variant:"contained",component:"span",onClick:Object(de.a)(me.a.mark(function t(){return me.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o("formFields.loadingVoters",!0),o(bo,""),o(Eo,""),_e()(a,fo)?e.handleVoterChainId(_e()(a,fo)):_e()(a,go)&&e.handleFile(_e()(a,vo)),window.setTimeout(function(){o("formFields.loadingVoters",!1)},500);case 5:case"end":return t.stop()}},t)})),disabled:(!_e()(a,fo)||!mt.test(_e()(a,fo)))&&!_e()(a,go)},"Load",_e()(a,"formFields.loadingVoters")&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0",r.a.createElement(Wa.a,{thickness:5,size:20})))),r.a.createElement(fn.a,{item:!0,xs:8},_e()(a,bo)&&r.a.createElement(y.a,{className:n.errorText},_e()(a,bo)),_e()(a,Eo)&&r.a.createElement(y.a,{className:n.successText},_e()(a,Eo)))):r.a.createElement(fn.a,{item:!0,xs:5})),"custom"===_e()(a,mo)&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Pl,{eligibleVoters:_e()(a,"eligibleVoters"),arrayHelpers:t,errorMessage:c>0&&"string"===typeof _e()(s,"eligibleVoters")?r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:n.errorText},_e()(s,"eligibleVoters"))):null})),r.a.createElement(fn.a,{item:!0,xs:12,className:n.stepperButtons},r.a.createElement("br",null),r.a.createElement(C.a,{disabled:!0,onClick:e.props.handleBack},"Back"),r.a.createElement(C.a,{variant:"contained",color:"primary",type:"submit",disabled:i},"Next"))))}})}))}})}}]),t}(r.a.Component),Co=Object(h.withStyles)(function(e){return{pad:{padding:"15px"},borders:{borderRightStyle:"solid",borderRightColor:"lightgray",borderRightWidth:"1px",borderLeftStyle:"solid",borderLeftColor:"lightgray",borderLeftWidth:"1px",padding:"10px"},padLoadVoters:{padding:"10px"},stepperButtons:{marginLeft:"-15px"},errorText:{color:"red",fontSize:"14px",borderColor:"red",borderStyle:"solid",padding:8,width:168},successText:{color:"green",fontSize:"14px",borderColor:"green",borderStyle:"solid",padding:8,width:168}}})(xo),wo={chainId:"039b14a782008c1b1543b1542941756e6f01a0d68372ff61163642382af70fc9",key:"idsec2wH72BNR9QZhTMGDbxwLWGrghZQexZvLTros2wCekkc62N9h7s"},ko=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={voteCreationCost:null},a.componentDidMount=Object(de.a)(me.a.mark(function e(){var t,n;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={definition:a.props.poll.pollJSON,registrationChainId:a.props.networkController.networkProps.voteRegistrationChainID,eligibleVoters:a.props.eligibleVoters,identity:wo},e.next=3,Object(Ye.computeVoteCreationCost)(t);case 3:n=e.sent,a.setState({voteCreationCost:n});case 5:case"end":return e.stop()}},e)})),a.validateEcPrivateKey=function(){var e=Object(de.a)(me.a.mark(function e(t){var n;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(ke.isValidPrivateEcAddress)(t)){e.next=2;break}return e.abrupt("return","Invalid Key");case 2:return e.next=4,a.props.factomCliController.factomCli.getBalance(t);case 4:if(n=e.sent,!(a.state.voteCreationCost>n)){e.next=7;break}return e.abrupt("return","Insufficient balance of "+n+" Entry Credits.");case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t=this,a=this.props,n=a.classes,l=a.poll,o=a.eligibleVoters,i=a.updateCreatePollResult,s=a.handleBack,c=a.handleNext,u=a.networkController.networkProps,m=a.voteController.submitVote,d=a.ledgerController.signMessageRaw,p=_e()(l,"pollJSON.vote.phasesBlockHeights.commitStart"),h=this.props.factomCliController.blockHeight;return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{identityChainID:"",identityKey:"",ecPrivateKey:"",commitStartBlock:p,transactionError:null,signatureType:null,ledgerStatus:null},onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(a,n){var r,s,p,h;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setFieldValue("transactionError",null),r=_e()(a,"signatureType"),s={definition:l.pollJSON,registrationChainId:u.voteRegistrationChainID,eligibleVoters:o},e.prev=3,"manual"!==r){e.next=8;break}s.identity={chainId:_e()(a,"identityChainID"),key:_e()(a,"identityKey")},e.next=22;break;case 8:if("ledger"!==r){e.next=22;break}return n.setFieldValue("ledgerStatus","Connecting to Ledger Nano S"),e.next=12,t.props.ledgerController.isLedgerConnected();case 12:if(!e.sent){e.next=17;break}n.setFieldValue("ledgerStatus","Waiting for user to confirm signature two times on Ledger Nano S device."),e.next=18;break;case 17:throw new Error("Ledger Nano S Not Found. Please connect your Ledger Nano S and try again.");case 18:return e.next=20,t.props.ledgerController.getLedgerIdentityAddress(0);case 20:p=e.sent,s.identity={chainId:p.chainid,key:p.address,sign:d};case 22:return e.next=24,m(s,_e()(a,"ecPrivateKey"));case 24:h=e.sent,console.log(h),i(h),c(),e.next=35;break;case 30:e.prev=30,e.t0=e.catch(3),console.log(e.t0),n.resetForm(),n.setFieldValue("transactionError","Error: "+e.t0.message);case 35:case"end":return e.stop()}},e,null,[[3,30]])}));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:W.object().shape((e={},Object(L.a)(e,"signatureType",W.string()),Object(L.a)(e,"identityChainID",W.string().when("signatureType",{is:"manual",then:W.string().required("Required").matches(mt,{message:"Invalid Chain ID",excludeEmptyString:!0}),otherwise:W.string().notRequired()})),Object(L.a)(e,"identityKey",W.string().when("signatureType",{is:"manual",then:W.string().required("Required").test("identityKey","Invalid Identity Key",Vr.app.isValidSecretIdentityKey),otherwise:W.string().notRequired()})),Object(L.a)(e,"commitStartBlock",W.number().moreThan(h+2,"Commit Start Block must be at least 3 blocks greater than the Current Height. Please go back and update the Commit Start Block to continue.")),e)),render:function(e){var a=e.isSubmitting,l=e.errors,o=e.touched,i=e.values,c=e.setFieldValue,u=e.submitCount,m="Sign Transaction";return"ledger"===_e()(i,"signatureType")&&(m+=" with Ledger Nano S"),r.a.createElement(B.e,null,r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},_e()(l,"signatureType")&&u>0?r.a.createElement(H,{disableGutterBottom:!0,text:m+" *",color:"red"}):r.a.createElement(H,{disableGutterBottom:!0,text:m})),xe()(_e()(i,"signatureType"))&&r.a.createElement(fn.a,{xs:12,item:!0},r.a.createElement(C.a,{onClick:function(){c("transactionError",null),c("signatureType","manual")},variant:"outlined",size:"small",disabled:a},r.a.createElement(dl.a,{style:{height:17},titleAccess:"Manual Entry"}),"\xa0Manual Entry"),"\xa0",r.a.createElement(C.a,{onClick:function(){c("transactionError",null),c("signatureType","ledger")},variant:"outlined",size:"small",disabled:a},"\xa0",r.a.createElement(In,{className:n.ledgerLogo,src:En.a,alt:"Ledger Logo"}),"\xa0\xa0\xa0Ledger Nano S")),"manual"===_e()(i,"signatureType")&&r.a.createElement(fn.a,{xs:12,item:!0,container:!0},r.a.createElement(fn.a,{xs:9,item:!0},r.a.createElement(Rr,{name:"identityChainID",label:"Initiator Identity Chain ID *",error:_e()(l,"identityChainID")&&_e()(o,"identityChainID"),fullWidth:!0})),r.a.createElement(fn.a,{xs:3,item:!0}),r.a.createElement(fn.a,{xs:9,item:!0},r.a.createElement(Rr,{name:"identityKey",label:"Initiator Identity Private Key *",error:_e()(l,"identityKey")&&_e()(o,"identityKey"),fullWidth:!0})),r.a.createElement(fn.a,{xs:3,item:!0})),_e()(i,"signatureType")&&r.a.createElement(fn.a,{item:!0,xs:12,container:!0},r.a.createElement(fn.a,{xs:9,item:!0},r.a.createElement(Rr,{name:"ecPrivateKey",label:"EC Private Key *",error:_e()(l,"ecPrivateKey")&&_e()(o,"ecPrivateKey"),fullWidth:!0,validate:t.validateEcPrivateKey})),r.a.createElement(fn.a,{xs:3,item:!0},t.state.voteCreationCost&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(y.a,null,"Cost: "+t.state.voteCreationCost+" Entry Credits")))),r.a.createElement(B.a,{name:"commitStartBlock",render:function(e){return r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:n.errorText},e))}}),!xe()(_e()(i,"transactionError"))&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:n.errorText},_e()(i,"transactionError"))),r.a.createElement(fn.a,{item:!0,xs:12,className:n.stepperButtons},r.a.createElement("br",null),r.a.createElement(C.a,{onClick:s},"Back"),r.a.createElement(C.a,{type:"submit",variant:"contained",color:"primary",disabled:a},"ledger"===_e()(i,"signatureType")?"Sign and Submit":"Submit",a&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0",r.a.createElement(Wa.a,{thickness:5,size:20}))),a&&_e()(i,"ledgerStatus")&&r.a.createElement(y.a,{className:n.ledgerStatus},_e()(i,"ledgerStatus")))))}})}}]),t}(r.a.Component),Oo=p()(G.b,Y,$e,Ea.b,Object(h.withStyles)(function(e){return{stepperButtons:{marginLeft:"-15px"},errorText:{color:"red",fontSize:"16px"},ledgerStatus:{display:"inline-block",paddingLeft:"10px"},ledgerLogo:{height:16}}}))(ko);var So=Object(h.withStyles)(function(e){return{pad:{padding:15},submitVoteForm:{marginTop:"25px"}}})(function(e){var t=e.classes;return r.a.createElement(fn.a,{container:!0,className:t.pad},r.a.createElement(Dl,{poll:e.poll,eligibleVoters:e.eligibleVoters}),r.a.createElement(fn.a,{item:!0,xs:12,className:t.submitVoteForm},r.a.createElement(Oo,{poll:e.poll,eligibleVoters:e.eligibleVoters,updateCreatePollResult:e.updateCreatePollResult,handleNext:e.handleNext,handleBack:e.handleBack})))});for(var No=p()(G.b,Object(h.withStyles)(function(e){return{pad:{padding:"15px"}}}))(function(e){var t=e.classes,a=e.createPollResult,n=e.networkController.networkProps.explorerURL+"/entry?hash=";return r.a.createElement(fn.a,{className:t.pad,container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{text:"Setup Complete!",color:"green"}),r.a.createElement(y.a,{gutterBottom:!0},"Your poll is pending confirmation. The entries will be visible in 10-15 minutes, after being included in the next block currently being processed by the Factom blockchain."),r.a.createElement("br",null)),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Pr,{label:"Eligible Voters",value:a.eligibleVoters.entryHash,href:n+a.eligibleVoters.entryHash})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Pr,{label:"Vote Configuration",value:a.vote.entryHash,href:n+a.vote.entryHash})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Pr,{label:"Vote Registration",value:a.registration.entryHash,href:n+a.registration.entryHash})))}),jo=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={pollForm:{pollJSON:{proposal:{title:"",text:"",externalRef:{href:"",hash:{value:"",algo:""}}},vote:{phasesBlockHeights:{commitStart:"",commitEnd:"",revealEnd:""},eligibleVotersChainId:null,type:"",config:{options:[],allowAbstention:"",computeResultsAgainst:"",minOptions:"",maxOptions:"",winnerCriteria:{},acceptanceCriteria:{}}}},formFields:{commitStartDate:"",commitEndDate:"",revealEndDate:"",voteTypeText:"",questionSource:"text",workingText:"",workingHref:"",workingHashValue:"",workingHashAlgo:"",workingOption:"",checkedTurnout:!1,enableMinSupportConfig:!0,workingWeightMinTurnout:"",workingUnweightMinTurnout:"",workingWeightMinSupport:"",workingUnweightMinSupport:"",workingMinSupportOption:""}},eligibleVotersForm:{eligibleVoters:[],formFields:{selectedList:"custom",workingIdentityChainId:"",workingWeight:"",workingEligibleChainId:"",loadingVoters:!1,loadErrorMessage:"",loadSuccessMessage:"",workingFileName:"",workingFile:""}},createPollResult:{}},a.updatePoll=function(e){a.setState({pollForm:e})},a.updateParticipants=function(e){a.setState({eligibleVotersForm:e})},a.updateCreatePollResult=function(e){a.setState({createPollResult:e})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.props.children(Object(pe.a)({},this.state,{updatePoll:this.updatePoll,updateParticipants:this.updateParticipants,updateCreatePollResult:this.updateCreatePollResult}))}}]),t}(r.a.Component),Ao=a(187),Fo=a.n(Ao),To=a(175),Io=a.n(To),Po=a(221),Vo=a.n(Po),Ro=Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"13px"}}})(function(e){var t=e.classes,a=e.disabled,n=void 0!==a&&a,l=e.error,o=void 0!==l&&l,i=e.isNotFast,s=e.label,c=e.name,u=e.onChange,m=e.options,d=e.minWidth,p=e.validate,h=i?B.c:B.b;return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,Object.assign({name:c},p?{validate:p}:{}),function(e){var t=e.field;return r.a.createElement(ea.a,{disabled:n,error:o},r.a.createElement(Vo.a,{htmlFor:c},s),r.a.createElement(Io.a,Object.assign({},t,u?{onChange:u}:{},{style:{minWidth:d},inputProps:{id:c}}),m.map(function(e,t){return r.a.createElement(T.a,{key:t,value:e.value},e.text)})))}),r.a.createElement(B.a,{name:c,render:function(e){return r.a.createElement("div",{className:t.errorText},e)}}))}),Lo=[{value:tt.name,text:tt.name},{value:at.name,text:at.name},{value:nt.name,text:nt.name},{value:rt.name,text:rt.name}],Bo=[{value:it,text:ot},{value:ct,text:st}],Wo=[{value:!0,text:"True"},{value:!1,text:"False"}],Mo="pollJSON.vote.phasesBlockHeights.commitStart",Do="pollJSON.vote.phasesBlockHeights.commitEnd",Ho="pollJSON.vote.phasesBlockHeights.revealEnd",Ko="pollJSON.vote.config.minOptions",qo="pollJSON.vote.config.maxOptions",Jo="pollJSON.vote.config.options",zo="formFields.voteTypeText",Uo="formFields.workingOption",_o="formFields.workingHref",Go="formFields.workingText",$o="formFields.checkedTurnout",Yo="formFields.workingWeightMinTurnout",Xo="formFields.workingMinSupportOption",Qo=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).validateWriteHeight=function(e,t){var a=!0;return isNaN(t)&&(a=!1),t<e&&(a=!1),a},a.validateWorkingOption=function(e,t){if(a.hasOption(e,t))return"Duplicate"},a.validateComputeResultsAgainst=function(e){if(a.enableMinSupportConfig&&!e)return"Required"},a.hasOption=function(e,t){return-1!==t.findIndex(function(t){return t===e})},a.handleTime=function(e,t){a.setFieldValue(t,a.calculateWriteHeight(e))},a.handleBlock=function(e,t){a.validateWriteHeight(a.props.factomCliController.blockHeight,e)?a.setFieldValue(t,a.calculateWriteTimeValue(e)):a.setFieldValue(t,"")},a.removeOption=function(e,t,n,r,l,o,i,s){r.remove(t),n===e&&a.setFieldValue(Xo,""),s!==tt.name&&s!==at.name&&(o>l&&a.setFieldValue(Ko,""),i>l&&a.setFieldValue(qo,""))},a.getMinimumOptions=function(e){for(var t=[],a=1;a<=e.length;a++)t.push({value:a,text:a});return t},a.getMaximumOptions=function(e){for(var t=[],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a<=e.length;a++)t.push({value:a,text:a});return t},a.calculateWriteTimeValue=function(e){var t="";try{var n=a.props.factomCliController.getEstimatedBlockTimestamp(e);t=De(n).utc().toISOString().replace("Z","")}catch(r){console.log(r)}return t},a.calculateWriteHeight=function(e){var t=a.props.factomCliController.blockHeight,n=De.unix(a.props.factomCliController.blockTimestamp).utc(),r=De(e.concat("Z")).utc().diff(n,"minutes");return t+Math.floor(r/10)},a.supportsMinSupportCriteria=function(e){var t=!0;return e===rt.type&&(t=!1),t},a.supportsWeightedMinTurnoutCriteria=function(e){var t=!0;return e===rt.type&&(t=!1),t},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(de.a)(me.a.mark(function e(){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.scrollTo(0,0);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"handleKeyPress",value:function(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,a=t.pollForm,n=t.updatePoll,l=t.classes,o=t.factomCliController.blockHeight;return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:a,validateOnChange:!1,validationSchema:W.object().shape({pollJSON:W.object().shape({proposal:W.object().shape({title:W.string().required("Required")}),vote:W.object().shape({phasesBlockHeights:W.object().shape({commitStart:W.number().transform(function(e){return isNaN(e)?void 0:e}).required("Required").moreThan(o+2,"Must be at least 3 blocks greater than Current Height"),commitEnd:W.number().transform(function(e){return isNaN(e)?void 0:e}).required("Required").moreThan(W.ref("commitStart"),"Must be greater than Commit Start Block"),revealEnd:W.number().transform(function(e){return isNaN(e)?void 0:e}).required("Required").moreThan(W.ref("commitEnd"),"Must be greater than Commit End Block")}),config:W.object().shape({options:W.array().required("Required").min(2,"* Select at least two options"),minOptions:W.number().transform(function(e){return isNaN(e)?void 0:e}).required("Required"),maxOptions:W.number().transform(function(e){return isNaN(e)?void 0:e}).required("Required"),allowAbstention:W.string().required("Required")})})}),formFields:W.object().shape({enableMinSupportConfig:W.boolean(),workingWeightMinSupport:W.number().transform(function(e){return isNaN(e)?void 0:e}).max(1,"Too high").min(0,"Too low"),workingUnweightMinSupport:W.number().transform(function(e){return isNaN(e)?void 0:e}).max(1,"Too high").min(0,"Too low"),requiredSupport:W.mixed().test("support-test","* Select weighted and/or unweighted ratio",function(e){var t=this.parent,a=t.workingWeightMinSupport,n=t.workingUnweightMinSupport;return!(t.enableMinSupportConfig&&!so()(a)&&!so()(n))}),voteTypeText:W.string().required("Required"),questionSource:W.string(),workingText:W.string().when("questionSource",{is:"text",then:W.string().required("Required"),otherwise:W.string().notRequired()}),workingHref:W.string().when("questionSource",{is:"href",then:W.string().required("Required").url("Must be a valid URL"),otherwise:W.string().notRequired()}),workingHashValue:W.string().when("questionSource",{is:"href",then:W.string().required("Required"),otherwise:W.string().notRequired()}),workingHashAlgo:W.string().when("questionSource",{is:"href",then:W.string().required("Required"),otherwise:W.string().notRequired()}),workingMinSupportOption:W.string().when("voteTypeText",{is:tt.name,then:W.string().required("Required"),otherwise:W.string().notRequired()}),workingWeightMinTurnout:W.number().transform(function(e){return isNaN(e)?void 0:e}).max(1,"Too high").min(0,"Too low"),workingUnweightMinTurnout:W.number().transform(function(e){return isNaN(e)?void 0:e}).max(1,"Too high").min(0,"Too low"),checkedTurnout:W.boolean().test("turnout-test","* Select a Minimum Turnout ratio",function(e){var t=this.parent,a=t.workingWeightMinTurnout,n=t.workingUnweightMinTurnout;return!(e&&!so()(a)&&!so()(n))})})}),onSubmit:function(t,a){var r;("text"===_e()(t,"formFields.questionSource")?(t=Fo()(t,"pollJSON.proposal.externalRef"),_e()(t,"pollJSON.proposal").text=_e()(t,Go)):(t=Fo()(t,"pollJSON.proposal.text"),_e()(t,"pollJSON.proposal").externalRef={href:_e()(t,_o),hash:{value:_e()(t,"formFields.workingHashValue"),algo:_e()(t,"formFields.workingHashAlgo")}}),_e()(t,$o)?(_e()(t,"pollJSON.vote.config").acceptanceCriteria={minTurnout:{}},so()(_e()(t,Yo))&&(_e()(t,"pollJSON.vote.config.acceptanceCriteria").minTurnout.weighted=_e()(t,Yo)),so()(_e()(t,"formFields.workingUnweightMinTurnout"))&&(_e()(t,"pollJSON.vote.config.acceptanceCriteria").minTurnout.unweighted=_e()(t,"formFields.workingUnweightMinTurnout"))):t=Fo()(t,"pollJSON.vote.config.acceptanceCriteria"),_e()(t,"formFields.enableMinSupportConfig"))?(_e()(t,"pollJSON.vote.config").winnerCriteria={minSupport:{}},r=_e()(t,zo)===tt.name?_e()(t,Xo):"*",_e()(t,"pollJSON.vote.config.winnerCriteria.minSupport")[r]={},so()(_e()(t,"formFields.workingWeightMinSupport"))&&(_e()(t,"pollJSON.vote.config.winnerCriteria").minSupport[r].weighted=_e()(t,"formFields.workingWeightMinSupport")),so()(_e()(t,"formFields.workingUnweightMinSupport"))&&(_e()(t,"pollJSON.vote.config.winnerCriteria").minSupport[r].unweighted=_e()(t,"formFields.workingUnweightMinSupport"))):(t=Fo()(t,"pollJSON.vote.config.winnerCriteria"),t=Fo()(t,"pollJSON.vote.config.computeResultsAgainst"));n(t),e.props.handleNext()},render:function(t){var a=t.errors,n=t.touched,o=t.isSubmitting,i=t.values,s=t.setFieldValue,c=t.handleChange,u=t.submitCount,m=t.setFieldTouched,d=t.setFieldError;return e.setFieldValue=s,e.enableMinSupportConfig=_e()(i,"formFields.enableMinSupportConfig"),r.a.createElement(B.e,{onKeyPress:e.handleKeyPress},r.a.createElement(fn.a,{container:!0,className:l.pad},r.a.createElement(fn.a,{container:!0,item:!0,spacing:16,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{disableGutterBottom:!0,text:"Configure Poll"})),r.a.createElement(fn.a,{container:!0,item:!0,xs:5},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Rr,{name:"pollJSON.proposal.title",label:"Title *",error:_e()(a,"pollJSON.proposal.title")&&_e()(n,"pollJSON.proposal.title"),fullWidth:!0,spellCheck:!0,maxLength:32})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ro,{name:zo,label:"Vote Type *",options:Lo,error:_e()(a,zo)&&_e()(n,zo),minWidth:215,onChange:function(t){c(t);var a,n=t.target.value;s(Xo,""),n===tt.name?(a=tt.type,s("pollJSON.vote.type",a),s(Ko,tt.numOptions),s(qo,tt.numOptions),s("pollJSON.vote.config.allowAbstention",!1),_e()(i,Jo).length>2&&s(Jo,[])):n===at.name?(a=at.type,s("pollJSON.vote.type",a),s(Ko,at.numOptions),s(qo,at.numOptions)):n===nt.name?(s("pollJSON.vote.type",a=nt.type),s(Ko,""),s(qo,"")):n===rt.name&&(a=rt.type,s("pollJSON.vote.type",a),s(Ko,""),s(qo,""),s(Yo,"")),e.supportsMinSupportCriteria(a)?s("formFields.enableMinSupportConfig",!0):(s("formFields.enableMinSupportConfig",!1),s("pollJSON.vote.config.computeResultsAgainst",""),s("formFields.workingWeightMinSupport",""),s("formFields.workingUnweightMinSupport",""),s(Xo,""))}})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ro,{name:"pollJSON.vote.config.allowAbstention",label:"Allow Abstention *",isNotFast:!0,options:Wo,error:_e()(a,"pollJSON.vote.config.allowAbstention")&&_e()(n,"pollJSON.vote.config.allowAbstention"),disabled:_e()(i,"pollJSON.vote.type")===tt.type,minWidth:215})),r.a.createElement(fn.a,{item:!0,xs:12},_e()(i,"formFields.enableMinSupportConfig")&&r.a.createElement(Ro,{name:"pollJSON.vote.config.computeResultsAgainst",validate:e.validateComputeResultsAgainst,label:"Compute Results Against *",options:Bo,error:_e()(a,"pollJSON.vote.config.computeResultsAgainst")&&_e()(n,"pollJSON.vote.config.computeResultsAgainst"),minWidth:215}))),r.a.createElement(fn.a,{container:!0,item:!0,xs:7},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement("div",{className:l.blockFields},r.a.createElement(Rr,{name:Mo,label:"Commit Start Block *",type:"number",error:_e()(a,Mo)&&_e()(n,Mo),onChange:function(t){c(t),e.handleBlock(t.target.value,"formFields.commitStartDate")}}))),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Rr,{name:"formFields.commitStartDate",label:"Estimated Date (UTC)",type:"datetime-local",shrink:!0,isNotFast:!0,width:220,onChange:function(t){c(t),e.handleTime(t.target.value,Mo),m(Mo,!0)}})),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement("div",{className:l.blockFields},r.a.createElement(Rr,{name:Do,label:"Commit End Block *",type:"number",error:_e()(a,Do)&&_e()(n,Do),onChange:function(t){c(t),e.handleBlock(t.target.value,"formFields.commitEndDate")}}))),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Rr,{name:"formFields.commitEndDate",label:"Estimated Date (UTC)",type:"datetime-local",shrink:!0,isNotFast:!0,width:220,onChange:function(t){c(t),e.handleTime(t.target.value,Do),m(Do,!0)}})),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement("div",{className:l.blockFields},r.a.createElement(Rr,{name:Ho,label:"Reveal End Block *",type:"number",error:_e()(a,Ho)&&_e()(n,Ho),onChange:function(t){c(t),e.handleBlock(t.target.value,"formFields.revealEndDate")}}))),r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Rr,{name:"formFields.revealEndDate",label:"Estimated Date (UTC)",type:"datetime-local",shrink:!0,isNotFast:!0,width:220,onChange:function(t){c(t),e.handleTime(t.target.value,Ho),m(Ho,!0)}})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("div",{style:{height:"48px"}})))),r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(H,{disableGutterBottom:!0,text:"Question"})),r.a.createElement(fn.a,{item:!0,xs:3},r.a.createElement(ea.a,{component:"fieldset"},r.a.createElement(Yt.a,{name:"formFields.questionSource",value:_e()(i,"formFields.questionSource"),onChange:function(e){c(e),"text"===e.target.value?(s(_o,""),s("formFields.workingHashValue",""),s("formFields.workingHashAlgo","")):s(Go,"")}},r.a.createElement(Qt.a,{value:"text",control:r.a.createElement(Gt.a,null),label:"Plain Text"}),r.a.createElement(Qt.a,{className:l.raiseRadio,value:"href",control:r.a.createElement(Gt.a,null),label:"External Proposal"})))),"text"===_e()(i,"formFields.questionSource")&&r.a.createElement(fn.a,{item:!0,container:!0,xs:9},r.a.createElement(Rr,{name:Go,label:"Question *",error:_e()(a,Go)&&_e()(n,Go),fullWidth:!0,multiline:!0,spellCheck:!0,maxLength:250})),"href"===_e()(i,"formFields.questionSource")&&r.a.createElement(fn.a,{item:!0,xs:9,container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Rr,{name:_o,label:"URL Link *",error:_e()(a,_o)&&_e()(n,_o),fullWidth:!0})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ro,{name:"formFields.workingHashAlgo",label:"Hash Algorithm *",options:ut,error:_e()(a,"formFields.workingHashAlgo")&&_e()(n,"formFields.workingHashAlgo"),minWidth:182})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Rr,{name:"formFields.workingHashValue",label:"Hash Value *",error:_e()(a,"formFields.workingHashValue")&&_e()(n,"formFields.workingHashValue")})))),r.a.createElement(fn.a,{container:!0,spacing:8,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{disableGutterBottom:!0,text:"Answers"})),r.a.createElement(fn.a,{item:!0,xs:12},u>0&&r.a.createElement(B.c,{name:Jo,render:function(e){var t=e.form,a=_e()(t.errors,Jo);return a?r.a.createElement("div",{className:l.errorText},a):null}})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Q.a,{elevation:2,className:l.pad},r.a.createElement(fn.a,{container:!0,spacing:24},r.a.createElement(fn.a,{item:!0,xs:6},r.a.createElement(Wt.a,{className:l.optionList,dense:!0},r.a.createElement(B.d,{name:Jo,render:function(t){return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement(Rr,{name:Uo,validate:function(t){return e.validateWorkingOption(t,_e()(i,Jo))},width:"250px",isNotFast:!0,label:"Option *",disabled:2===_e()(i,Jo).length&&_e()(i,"pollJSON.vote.type")===tt.type,error:_e()(a,Uo)&&_e()(n,Uo),onKeyPress:function(a){13===a.which&&a.target.value.trim()&&xe()(e.validateWorkingOption(a.target.value,_e()(i,Jo)))&&(t.push(_e()(i,Uo)),s(Uo,""))}})),r.a.createElement(fn.a,{item:!0,xs:3},r.a.createElement(C.a,{variant:"contained",component:"span",onClick:function(){xe()(e.validateWorkingOption(_e()(i,Uo),_e()(i,Jo)))&&(t.push(_e()(i,Uo)),s(Uo,""))},disabled:!_e()(i,Uo)},"Add")),r.a.createElement(fn.a,{item:!0,xs:12},_e()(i,Jo).length>0?_e()(i,Jo).map(function(a,n){return r.a.createElement(Dt.a,{key:n,disableGutters:!0,divider:!0,className:l.optionListItem},r.a.createElement(Nl.a,{style:{fontSize:15}}),r.a.createElement(Ol.a,{primary:a}),r.a.createElement(k.a,{onClick:function(){return e.removeOption(a,n,_e()(i,Xo),t,_e()(i,Jo).length-1,_e()(i,Ko),_e()(i,qo),_e()(i,zo))},"aria-label":"Clear"},r.a.createElement(Al.a,null)))}):""))}}))),r.a.createElement(fn.a,{item:!0,xs:6},(_e()(i,zo)===nt.name||_e()(i,zo)===rt.name)&&r.a.createElement(fn.a,{container:!0,spacing:8,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ro,{name:Ko,label:"Minimum Options Allowed *",type:"number",isNotFast:!0,error:_e()(a,Ko)&&_e()(n,Ko),width:215,options:e.getMinimumOptions(_e()(i,Jo)),minWidth:"240px"})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ro,{name:qo,label:"Maximum Options Allowed *",type:"number",isNotFast:!0,error:_e()(a,qo)&&_e()(n,qo),width:215,options:e.getMaximumOptions(_e()(i,Jo),_e()(i,Ko)),minWidth:"240px"})))))))),r.a.createElement(fn.a,{item:!0,container:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(H,{text:"Winner Criteria"})),r.a.createElement(fn.a,{item:!0,xs:12},_e()(i,"formFields.enableMinSupportConfig")?r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement("br",null),r.a.createElement(y.a,null,"Minimum Support *"),u>0&&_e()(a,"formFields.requiredSupport")&&r.a.createElement("div",{className:l.errorText},_e()(a,"formFields.requiredSupport"))),r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement(Rr,{name:"formFields.workingWeightMinSupport",label:"Weighted Ratio",type:"number",step:"any",error:_e()(a,"formFields.workingWeightMinSupport")&&_e()(n,"formFields.workingWeightMinSupport"),width:138}),r.a.createElement("br",null),r.a.createElement(Rr,{name:"formFields.workingUnweightMinSupport",label:"Unweighted Ratio",type:"number",step:"any",error:_e()(a,"formFields.workingUnweightMinSupport")&&_e()(n,"formFields.workingUnweightMinSupport"),width:138})),r.a.createElement(fn.a,{item:!0,xs:4},""!==_e()(i,"pollJSON.vote.type")?_e()(i,zo)===tt.name?Ee()(_e()(i,Jo))?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"No Options Found"):r.a.createElement(Ro,{name:Xo,label:"Applies to option *",options:_e()(i,Jo).map(function(e){return{value:e,text:e}}),error:_e()(a,Xo)&&_e()(n,Xo),minWidth:215,isNotFast:!0}):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"Applies to all options"):r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"Select a Vote Type"))):r.a.createElement(fn.a,{item:!0},r.a.createElement(y.a,null,"Not Applicable")))),r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(H,{disableGutterBottom:!0,text:"Acceptance Criteria"})),r.a.createElement(fn.a,{container:!0,item:!0,xs:12},r.a.createElement(fn.a,{item:!0,xs:4},r.a.createElement("br",null),r.a.createElement(B.c,{name:$o,render:function(e){var t=e.field;return r.a.createElement(Qt.a,{control:r.a.createElement(La.a,{name:$o,checked:t.value,onChange:function(e){var t=!_e()(i,$o);s($o,t),t||(s(Yo,""),s("formFields.workingUnweightMinTurnout",""),d($o,null),d(Yo,null),d("formFields.workingUnweightMinTurnout",null))},color:"default"}),label:"Minimum Turnout"+(_e()(i,$o)?" *":"")})}}),u>0&&_e()(a,$o)&&r.a.createElement("div",{className:l.errorText},_e()(a,$o))),r.a.createElement(fn.a,{item:!0,xs:4},e.supportsWeightedMinTurnoutCriteria(_e()(i,"pollJSON.vote.type"))&&r.a.createElement(Rr,{name:Yo,label:"Weighted Ratio",disabled:!_e()(i,$o),type:"number",step:"any",error:_e()(a,Yo)&&_e()(n,Yo),isNotFast:!0,width:138}),r.a.createElement("br",null),r.a.createElement(Rr,{name:"formFields.workingUnweightMinTurnout",label:"Unweighted Ratio",disabled:!_e()(i,$o),type:"number",step:"any",error:_e()(a,"formFields.workingUnweightMinTurnout")&&_e()(n,"formFields.workingUnweightMinTurnout"),isNotFast:!0,width:138})),r.a.createElement(fn.a,{style:{color:_e()(i,$o)?"":"gray"},item:!0,xs:4},r.a.createElement("br",null),"Applies to all eligible voters."))),r.a.createElement(fn.a,{item:!0,xs:12,className:l.stepperButtons},r.a.createElement("br",null),r.a.createElement(C.a,{onClick:e.props.handleBack},"Back"),r.a.createElement(C.a,{variant:"contained",color:"primary",type:"submit",disabled:o},"Next"),o&&a&&window.scrollTo(0,0))))}})}}]),t}(r.a.Component),Zo=p()(G.b,Y,Object(h.withStyles)(function(e){return{pad:{padding:15},raiseRadio:{position:"relative",top:"-16px"},optionList:{overflow:"auto"},optionListItem:{padding:"0px",wordWrap:"break-word"},stepperButtons:{marginLeft:"-15px"},errorText:{color:"red",fontSize:"16px",borderColor:"red",borderStyle:"solid",padding:8,width:200},blockFields:{marginLeft:"22px"}}}))(Qo),ei=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeStep:0},a.handleNext=function(){var e=a.state.activeStep;a.setState({activeStep:e+1})},a.handleBack=function(){var e=a.state.activeStep;a.setState({activeStep:e-1})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getStepContent",value:function(e,t){switch(e){case 0:return r.a.createElement(Co,{handleNext:this.handleNext,handleBack:this.handleBack,eligibleVotersForm:t.eligibleVotersForm,updateParticipants:t.updateParticipants});case 1:return r.a.createElement(Zo,{handleNext:this.handleNext,handleBack:this.handleBack,updatePoll:t.updatePoll,pollForm:t.pollForm});case 2:return r.a.createElement(So,{handleNext:this.handleNext,handleBack:this.handleBack,poll:t.pollForm,eligibleVoters:t.eligibleVotersForm.eligibleVoters,updateCreatePollResult:t.updateCreatePollResult});default:return"Content D"}}},{key:"getSteps",value:function(){return["Select Voters","Configure Poll","Preview & Sign"]}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.getSteps(),n=this.state.activeStep;return r.a.createElement(jo,null,function(l){return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:2}),r.a.createElement(fn.a,{item:!0,xs:8},r.a.createElement(Q.a,{className:t.pad},r.a.createElement(y.a,{variant:"h4",style:{opacity:".6"},align:"center"},"Create Poll"),r.a.createElement(Kt.a,{activeStep:n},a.map(function(e){return r.a.createElement(Jt.a,{key:e},r.a.createElement(Ut.a,null,e))})),e.state.activeStep===a.length?r.a.createElement(No,{createPollResult:l.createPollResult}):r.a.createElement("div",null,r.a.createElement("div",null,e.getStepContent(n,l))))),r.a.createElement(fn.a,{item:!0,xs:2}))})}}]),t}(r.a.Component),ti=Object(h.withStyles)(function(e){return{pad:{padding:"15px"}}})(ei),ai=new Array(10),ni=0;ni<10;ni++)ai[ni]={value:ni+1,text:ni+1+""};var ri=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).validateIdentityName=function(e){var t;return a.hasItem(e,a.identityNames)&&(t="Duplicate"),t},a.validateEcPrivateKey=function(){var e=Object(de.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(ke.isValidPrivateEcAddress)(t)){e.next=2;break}return e.abrupt("return","Invalid Key");case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.hasItem=function(e,t){return-1!==t.findIndex(function(t){return t===e})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleKeyPress",value:function(e){"textarea"!==e.target.type&&13===e.which&&e.preventDefault()}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.ledgerController.getLedgerAddresses,l=t.identityController.registerIdentity,o=t.networkController.networkProps.explorerURL+"/entry?hash=";return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{workingName:"",identityNames:[],number:"",ecPrivateKey:"",transactionError:null,status:null,identityChainId:null,entryHash:null},validationSchema:W.object().shape({number:W.string().required("Required"),identityNames:W.array().required("Required *")}),onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(t,a){var r,o,i,s,c;return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setFieldValue("transactionError",null),a.setFieldValue("status","Connecting to Ledger Nano S"),e.prev=2,e.next=5,n(0,_e()(t,"number"),"identity");case 5:return r=(r=e.sent).map(function(e){return e.address}),o={idPubKeys:r,idNames:_e()(t,"identityNames"),ecPrivateKey:_e()(t,"ecPrivateKey")},a.setFieldValue("status","Registering new identity to Factom blockchain"),e.next=11,l(o);case 11:i=e.sent,s=i.chainId,c=i.entryHash,a.setFieldValue("identityChainId",s),a.setFieldValue("entryHash",c),e.next=30;break;case 18:return e.prev=18,e.t0=e.catch(2),console.log(e.t0),e.next=23,a.resetForm();case 23:return e.next=25,a.setFieldValue("identityNames",_e()(t,"identityNames"));case 25:return e.next=27,a.setFieldValue("number",_e()(t,"number"));case 27:return e.next=29,a.setFieldValue("ecPrivateKey",_e()(t,"ecPrivateKey"));case 29:a.setFieldValue("transactionError","Error: "+e.t0.message);case 30:case"end":return e.stop()}},e,null,[[2,18]])}));return function(t,a){return e.apply(this,arguments)}}(),render:function(t){var n=t.isSubmitting,l=t.errors,i=t.touched,s=t.values,c=t.setFieldValue,u=t.submitCount,m=t.handleReset;return e.identityNames=_e()(s,"identityNames"),r.a.createElement(B.e,{onKeyPress:e.handleKeyPress},r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{text:"1. Select Identity Names"})),r.a.createElement(fn.a,{item:!0,xs:12},u>0&&r.a.createElement(B.c,{name:"identityNames",render:function(e){var t=e.form,n=_e()(t.errors,"identityNames");return n?r.a.createElement("div",{className:a.errorText},n):null},disabled:n})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Q.a,{elevation:2,className:a.paper},r.a.createElement(Wt.a,{className:a.identityNameList,dense:!0},r.a.createElement(B.d,{name:"identityNames",render:function(t){return r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:9},r.a.createElement(Rr,{name:"workingName",validate:e.validateIdentityName,isNotFast:!0,label:"Identity Name *",error:_e()(l,"workingName")&&_e()(i,"workingName"),onKeyPress:function(a){13===a.which&&a.target.value.trim()&&xe()(e.validateIdentityName(a.target.value))&&(t.push(_e()(s,"workingName")),c("workingName",""))},disabled:n})),r.a.createElement(fn.a,{item:!0,xs:3},r.a.createElement(C.a,{variant:"contained",component:"span",onClick:function(){xe()(e.validateIdentityName(_e()(s,"workingName")))&&(t.push(_e()(s,"workingName")),c("workingName",""))},disabled:!_e()(s,"workingName")},"Add")),r.a.createElement(fn.a,{item:!0,xs:12},_e()(s,"identityNames").length>0?_e()(s,"identityNames").map(function(e,l){return r.a.createElement(Dt.a,{key:l,disableGutters:!0,divider:!0,className:a.identityNameListItem},r.a.createElement(Nl.a,{style:{fontSize:15}}),r.a.createElement(Ol.a,{primary:e}),r.a.createElement(k.a,{onClick:function(){t.remove(l)},"aria-label":"Clear",disabled:n},r.a.createElement(Al.a,null)))}):""))}})))),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(H,{text:"2. Select number of Ledger keys to activate"})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Ro,{name:"number",label:"Number of keys *",type:"number",isNotFast:!0,disabled:n,error:_e()(l,"number")&&_e()(i,"number"),width:215,options:ai,minWidth:"200px"})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(H,{text:"3. Enter payment information"})),r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(Rr,{name:"ecPrivateKey",label:"EC Private Key *",disabled:n,error:_e()(l,"ecPrivateKey")&&_e()(i,"ecPrivateKey"),fullWidth:!0,validate:e.validateEcPrivateKey})),!xe()(_e()(s,"transactionError"))&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:a.errorText},_e()(s,"transactionError"))),xe()(_e()(s,"identityChainId"))?r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(C.a,{type:"submit",variant:"contained",color:"primary",disabled:n},"Create Identity",n&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0",r.a.createElement(Wa.a,{thickness:5,size:20}))),n&&_e()(s,"status")&&r.a.createElement(y.a,{className:a.status},_e()(s,"status"))):r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(Q.a,{className:a.transaction},r.a.createElement(H,{text:"Success!",color:"green"}),r.a.createElement(y.a,{gutterBottom:!0},"Your new Factom identity is pending confirmation. The entry will be visible in 10-15 minutes, after being included in the next block currently being processed by the Factom blockchain."),r.a.createElement("br",null),r.a.createElement(y.a,{variant:"subtitle2"},"Remember to copy down your Identity Chain ID."),r.a.createElement("br",null),r.a.createElement(Pr,{label:"Identity Chain ID",value:_e()(s,"identityChainId"),href:o+_e()(s,"entryHash"),extend:!0})),r.a.createElement("br",null),r.a.createElement(C.a,{type:"button",color:"primary",variant:"contained",onClick:m},"Reset"))))}})}}]),t}(r.a.Component),li=p()(G.b,$e,function(e){return function(t){return r.a.createElement(Et.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{identityController:a}))})}},Ea.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"16px"},status:{display:"inline-block",paddingLeft:"10px"},identityNameList:{overflow:"auto"},identityNameListItem:{padding:"0px",wordWrap:"break-word"},paper:{padding:15,width:"50%"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",padding:"10px"},successIcon:{position:"relative",top:"5px"}}}))(ri),oi=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.ledgerController.storeChainId;return r.a.createElement(B.f,{enableReinitialize:!0,initialValues:{transactionError:null,ledgerStatus:null,chainId:"",result:null},onSubmit:function(){var e=Object(de.a)(me.a.mark(function e(t,n){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setFieldValue("transactionError",null),n.setFieldValue("ledgerStatus","Attempting to store identity... check Ledger Nano S display"),e.prev=2,e.next=5,a(_e()(t,"chainId"));case 5:n.setFieldValue("ledgerStatus",null),n.setFieldValue("result","The Identity Chain ID has been successfully saved to the Ledger device."),e.next=17;break;case 9:return e.prev=9,e.t0=e.catch(2),console.log(e.t0),e.next=14,n.resetForm();case 14:return e.next=16,n.setFieldValue("chainId",_e()(t,"chainId"));case 16:n.setFieldValue("transactionError","Error: "+e.t0.message);case 17:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t,a){return e.apply(this,arguments)}}(),validationSchema:W.object().shape(Object(L.a)({},"chainId",W.string().required("Required").matches(mt,{message:"Invalid Chain ID",excludeEmptyString:!0}))),render:function(e){var a=e.isSubmitting,n=e.errors,l=e.touched,o=e.values,i=e.handleReset;return r.a.createElement(B.e,null,r.a.createElement(fn.a,{container:!0},r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement(H,{text:"Set Factom Identity Chain on Ledger Nano S",disableGutterBottom:!0}),r.a.createElement(Rr,{fullWidth:!0,label:"Identity Chain ID",name:"chainId",error:_e()(n,"chainId")&&_e()(l,"chainId"),type:"text",disabled:a})),!xe()(_e()(o,"transactionError"))&&r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(y.a,{className:t.errorText},_e()(o,"transactionError"))),xe()(_e()(o,"result"))?r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(C.a,{type:"submit",variant:"contained",color:"primary",disabled:a},"Set Identity",a&&r.a.createElement(r.a.Fragment,null,"\xa0\xa0",r.a.createElement(Wa.a,{thickness:5,size:20}))),a&&_e()(o,"ledgerStatus")&&r.a.createElement(y.a,{className:t.ledgerStatus},_e()(o,"ledgerStatus"))):r.a.createElement(fn.a,{item:!0,xs:12},r.a.createElement("br",null),r.a.createElement(Q.a,{className:t.transaction},r.a.createElement(jn.a,{nativeColor:"#6fbf73",className:t.successIcon}),"\xa0",r.a.createElement(y.a,{style:{display:"inline"}},_e()(o,"result"))),r.a.createElement("br",null),r.a.createElement(C.a,{type:"button",color:"primary",variant:"contained",onClick:i},"Reset"))))}})}}]),t}(r.a.Component),ii=p()($e,Ea.b,Object(h.withStyles)(function(e){return{errorText:{color:"red",fontSize:"16px"},ledgerStatus:{display:"inline-block",paddingLeft:"10px"},transaction:{borderColor:"#6fbf73",borderStyle:"solid",paddingTop:3,paddingBottom:8},successIcon:{position:"relative",top:"5px"}}}))(oi),si=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tabValue:0},a.handleChange=function(e,t){a.setState({tabValue:t})},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(fn.a,{container:!0,justify:"center"},r.a.createElement(fn.a,{item:!0,xs:8},r.a.createElement(Q.a,{elevation:3,className:e.paper},r.a.createElement(fn.a,{item:!0,container:!0,xs:12,justify:"center"},r.a.createElement(y.a,{variant:"h5",gutterBottom:!0},"Ledger Identity Manager")),r.a.createElement(Q.a,{elevation:3,className:e.paper},r.a.createElement(kn.a,{value:this.state.tabValue,onChange:this.handleChange,indicatorColor:"primary",textColor:"primary",centered:!0},r.a.createElement(Sn.a,{label:"Create Identity"}),r.a.createElement(Sn.a,{label:"Set Identity"})),r.a.createElement("br",null),0===this.state.tabValue&&r.a.createElement(li,null),1===this.state.tabValue&&r.a.createElement(ii,null)))))}}]),t}(r.a.Component),ci=Object(h.withStyles)(function(e){return{paper:{minWidth:565,padding:16}}})(si),ui=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.walletController,t=e.readyToManageWallet,a=e.isWalletEmpty,n=e.setReadyToManageWallet;return r.a.createElement(ne.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Lt.a,{exact:!0,path:"/",render:function(){return t&&!a()?r.a.createElement(ir,null):r.a.createElement(ur,{setReadyToManageWallet:n})}}),r.a.createElement(Lt.a,{exact:!0,path:"/vote",component:Sr}),r.a.createElement(Lt.a,{exact:!0,path:"/viewVote",component:oo}),r.a.createElement(Lt.a,{exact:!0,path:"/createVote",component:ti}),r.a.createElement(Lt.a,{exact:!0,path:"/ledgerId",component:ci})))}}]),t}(n.Component),mi=p()(_.b)(ui),di=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(ne.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(qe,null,r.a.createElement(Ke,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,null),r.a.createElement(Ae,null,r.a.createElement(bt,null,r.a.createElement(ae,null),r.a.createElement(Be,null,r.a.createElement(yt,null,r.a.createElement(Je.a,null,r.a.createElement("div",{className:e.body},r.a.createElement(mi,null),r.a.createElement(Rt,null))))))))))))}}]),t}(n.Component),pi=p()(ie,Object(h.withStyles)(function(e){return{body:{width:"1200px",margin:"0 auto"}}}))(di);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(pi,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},127:function(e,t,a){e.exports=a.p+"static/media/ledgerLogo.e1222cef.svg"},26:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return o});var n=a(1),r=a.n(n),l=r.a.createContext(),o=function(e){return function(t){return r.a.createElement(l.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{networkController:a}))})}}},35:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return o});var n=a(1),r=a.n(n),l=r.a.createContext(),o=function(e){return function(t){return r.a.createElement(l.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{walletController:a}))})}}},569:function(e,t,a){e.exports=a.p+"static/media/headerLogo.e79a5c9c.png"},575:function(e,t,a){"use strict";(function(e){var n=a(7),r=a.n(n),l=a(22),o=a(13),i=a(14),s=a(16),c=a(15),u=a(17),m=a(1),d=a.n(m),p=a(20),h=a.n(p),f=a(64),b=a(130),E=a.n(b),g=a(131),v=a.n(g),y=a(26),x=a(35),C=a(37),w={fct:131,ec:132,identity:281},k=function(t){function a(t){var n;return Object(o.a)(this,a),(n=Object(s.a)(this,Object(c.a)(a).call(this,t))).getLedgerAddresses=function(){var e=Object(l.a)(r.a.mark(function e(t,a,l){var o,i,s,c,u,m,d,p;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=[],i=n.props.networkController.networkProps.bip32Account,s=w[l],e.next=5,E.a.create();case 5:c=e.sent,u=new v.a(c),m=t;case 8:if(!(m<t+a)){e.next=17;break}return d="44'/"+s+"'/"+i+"'/0/"+m,e.next=12,u.getAddress(d);case 12:p=e.sent,o.push({address:p.address});case 14:m++,e.next=8;break;case 17:return c.close(),e.abrupt("return",o);case 19:case"end":return e.stop()}},e)}));return function(t,a,n){return e.apply(this,arguments)}}(),n.getLedgerIdentityAddress=function(){var e=Object(l.a)(r.a.mark(function e(t){var a,l,o,i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.networkController.networkProps.bip32Account,l=w.identity,e.next=4,E.a.create();case 4:return o=e.sent,i=new v.a(o),s="44'/"+l+"'/"+a+"'/0/"+t,e.next=9,i.getAddress(s);case 9:return c=e.sent,o.close(),e.abrupt("return",c);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n.signTransaction=function(){var t=Object(l.a)(r.a.mark(function t(a){var l,o,i,s,c,u,m,d,p,h,f;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return l=a.fromAddr,o=a.toAddr,i=a.amount,s=a.index,c={},t.next=4,E.a.create();case 4:return u=t.sent,m=n.props.networkController.networkProps.bip32Account,d="44'/131'/"+m+"'/0/"+s,p=new v.a(u),t.t0=C.Transaction.builder(),t.t1=l,t.t2=i,t.next=13,n.props.walletController.getFactoshiFee();case 13:return t.t3=t.sent,t.t4=t.t2+t.t3,t.t5=o,t.t6=i,h=t.t0.input.call(t.t0,t.t1,t.t4).output(t.t5,t.t6).build(),t.next=20,p.signTransaction(d,h.marshalBinarySig.toString("hex"));case 20:return(f=t.sent)&&(c=C.Transaction.builder(h).rcdSignature(e.from(f.r,"hex"),e.from(f.s,"hex")).build()),u.close(),t.abrupt("return",c);case 24:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),n.signMessageRaw=function(){var e=Object(l.a)(r.a.mark(function e(t){var a,l,o,i,s;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.networkController.networkProps.bip32Account,0,l="44'/"+w.identity+"'/"+a+"'/0/0",e.next=5,E.a.create();case 5:return o=e.sent,e.prev=6,i=new v.a(o),e.next=10,i.signMessageRaw(l,t);case 10:return s=e.sent,e.abrupt("return",s.s);case 14:throw e.prev=14,e.t0=e.catch(6),console.error("Failed to sign raw transaction from Ledger :",e.t0),e.t0;case 18:return e.prev=18,o.close(),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[6,14,18,21]])}));return function(t){return e.apply(this,arguments)}}(),n.checkAddress=function(){var e=Object(l.a)(r.a.mark(function e(t,a){var l,o,i,s,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=n.props.networkController.networkProps.bip32Account,o=w[a],i="44'/"+o+"'/"+l+"'/0/"+t.index,e.prev=3,e.next=6,E.a.create();case 6:return s=e.sent,c=new v.a(s),e.next=10,c.getAddress(i,!0);case 10:s.close(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Failed getFctAddr from Ledger Nano X/S :",e.t0);case 16:case"end":return e.stop()}},e,null,[[3,13]])}));return function(t,a){return e.apply(this,arguments)}}(),n.isLedgerConnected=Object(l.a)(r.a.mark(function e(){var t,a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,e.next=4,E.a.create();case 4:return a=e.sent,n=new v.a(a),e.next=8,n.getAppConfiguration();case 8:t=!0,a.close(),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log("Transport Err:"+e.t0);case 15:return e.abrupt("return",t);case 16:case"end":return e.stop()}},e,null,[[1,12]])})),n.storeChainId=function(){var e=Object(l.a)(r.a.mark(function e(t){var a,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.create();case 2:return a=e.sent,e.prev=3,n=new v.a(a),e.next=7,n.storeChainId(t);case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(3),console.error("Failed to store chain ID to Ledger:",e.t0),e.t0;case 13:return e.prev=13,a.close(),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[3,9,13,16]])}));return function(t){return e.apply(this,arguments)}}(),n.state={isLedgerConnected:n.isLedgerConnected,getLedgerAddresses:n.getLedgerAddresses,getLedgerIdentityAddress:n.getLedgerIdentityAddress,signTransaction:n.signTransaction,signMessageRaw:n.signMessageRaw,checkAddress:n.checkAddress,storeChainId:n.storeChainId},n}return Object(u.a)(a,t),Object(i.a)(a,[{key:"render",value:function(){return d.a.createElement(f.a.Provider,{value:this.state},this.props.children)}}]),a}(d.a.Component),O=h()(x.b,y.b);t.a=O(k)}).call(this,a(30).Buffer)},587:function(e,t,a){e.exports=a.p+"static/media/factomProtocolLogo.baaa561a.svg"},64:function(e,t,a){"use strict";a.d(t,"a",function(){return l}),a.d(t,"b",function(){return o});var n=a(1),r=a.n(n),l=r.a.createContext(),o=function(e){return function(t){return r.a.createElement(l.Consumer,null,function(a){return r.a.createElement(e,Object.assign({},t,{ledgerController:a}))})}}},643:function(e,t,a){e.exports=a(1239)},648:function(e,t,a){}},[[643,1,2]]]);
//# sourceMappingURL=main.366d3ab3.chunk.js.map